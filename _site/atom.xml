<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
 
 <title>limboy's HQ</title>
 <link href="http://limboy.me/atom.xml" rel="self"/>
 <link href="http://limboy.me/"/>
 <updated>2017-04-14T17:34:26+08:00</updated>
 <id>http://limboy.me/</id>
 <author>
   <name>limboy</name>
   <email>limboy.me@gmail.com</email>
 </author>

 
 <entry>
   <title>The Center of "Why"</title>
   <link href="http://limboy.me/reading/2017/04/04/alan-kay.html"/>
   <updated>2017-04-04T00:00:00+08:00</updated>
   <id>http://limboy.me/reading/2017/04/04/alan-kay</id>
   <content type="html">&lt;p&gt;è¿™æ˜¯ Alan Kay åœ¨ 04 å¹´å†™çš„ä¸€ç¯‡é•¿æ–‡ã€‚å¯èƒ½æœ‰éƒ¨åˆ†åŒå­¦å¯¹ Alan Kay ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå…ˆåšä¸€ä¸ªç®€å•ä»‹ç»ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è‰¾ä¼¦Â·å‡¯ï¼ˆAlan Kayï¼‰æ˜¯è¿‘å½“ä»£è®¡ç®—æœºé©å‘½ä¹‹å…ˆé©±ï¼Œä»–æœ‰ä¸€å¥å¹¿ä¸ºäººçŸ¥çš„åè¨€ï¼šé¢„æµ‹æœªæ¥çš„æœ€å¥½çš„åŠæ³•å°±æ˜¯åˆ›é€ æœªæ¥ã€‚&lt;/p&gt;

  &lt;p&gt;ä¸‰å²å°±èƒ½é˜…è¯»ï¼Œäº”å²ä¾¿ä¼šè‡ªå­¦ï¼Œç­‰åˆ°ä¸Šå°å­¦çš„æ—¶å€™ï¼Œå·²ç»è¯»äº†ä¸Šç™¾æœ¬ä¹¦ã€‚åˆ°ç°åœ¨ï¼ˆ77å²ï¼‰ï¼Œå·²ç»è¯»äº†å¤§çº¦ 20,000 æœ¬ä¹¦ï¼Œæœ‰ä¸€ä»½&lt;a href=&quot;http://www.squeakland.org/resources/books/readingList.jsp&quot;&gt;æ¨èé˜…è¯»çš„ä¹¦å•&lt;/a&gt;ã€‚&lt;/p&gt;

  &lt;p&gt;äº¬éƒ½å¥–ï¼ˆå·ç§°æ—¥æœ¬çš„è¯ºè´å°”å¥–ï¼‰å’Œå›¾çµå¥–è·å¾—è€…ã€‚Smalltalk é¢å‘å¯¹è±¡ç¼–ç¨‹ç¯å¢ƒè¯­è¨€çš„å‘æ˜äººä¹‹ä¸€ï¼Œä¹Ÿæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³çš„åˆ›å§‹äººä¹‹ä¸€ï¼ŒåŒæ—¶ï¼Œä»–è¿˜æ˜¯ç¬”è®°æœ¬ç”µè„‘æœ€æ—©çš„æ„æƒ³è€…å’Œç°ä»£å›¾å½¢ç”¨æˆ·ä»‹é¢GUIçš„å»ºç­‘å¸ˆã€‚ä¹Ÿæœ€æ—©æå‡ºäº†Dynabookï¼ˆåæ¥ç»è¿‡æ¼”å˜å°±å˜æˆäº†æˆ‘ä»¬ä»Šå¤©çš„ç¬”è®°æœ¬ç”µè„‘ï¼‰çš„æ¦‚å¿µã€‚å½“å¹´å°±ä¹”å¸ƒæ–¯å°±æ˜¯åœ¨çœ‹åˆ°äº† PARC é‡Œçš„è¿™äº›ä½œå“åï¼Œä¸‹å®šå†³å¿ƒå¾€ GUI æ–¹å‘å‘åŠ›ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è€çˆ·å­å¯¹å„¿ç«¥æ•™è‚²éå¸¸é‡è§†ï¼Œè¿™ä¹Ÿç›´æ¥æ¿€å‘äº†ä»–å‘æ˜æ–°çš„ç¼–ç¨‹è¯­è¨€å’Œå›¾å½¢è§†çª—ç³»ç»Ÿï¼Œå¸Œæœ›æ¯ä¸ªå­©å­éƒ½èƒ½æœ‰ä¸€ä¸ªç¬”è®°æœ¬å¤§å°çš„ç”µè„‘ï¼Œåœ¨è½¯ä»¶é‡Œå»ºé€ å’Œæ¨¡æ‹Ÿä»–ä»¬è‡ªå·±çš„çœŸå®ä¸–ç•Œæ¨¡å‹ï¼Œå¹¶è®©ä»–ä»¬å®éªŒã€ä¿®è¡¥ã€è¯„ä»·å’Œè§‚å¯Ÿè¿™äº›æ¨¡å‹çš„è¡Œä¸ºç‰¹å¾ã€‚ä¸è¿‡ç”¨ä»–è‡ªå·±çš„è¯æ¥è¯´ï¼Œä»–å¯¹å„¿ç«¥æ•™è‚²å¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„çƒ­æƒ…ï¼Œå¯¹äºåŸ¹å…»ä¼˜ç§€çš„æˆå¹´äººå…´è¶£æ›´å¤§ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨ Alan Kay ä¼šå‚ä¸åˆ° YC æ–°åˆ›å»ºçš„ HARC (Human Advancement Research Community) é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªé¡¹ç›®çš„ä½¿å‘½æ˜¯é€šè¿‡å‘æ˜æ–°æŠ€æœ¯ï¼Œä¼ æ’­çŸ¥è¯†å’Œæƒ³æ³•ï¼Œè®©äººä»¬å¯ä»¥çœ‹å¾—æ›´è¿œï¼Œç†è§£åœ°æ›´åŠ æ·±åˆ»ã€‚è·Ÿå½“å¹´çš„ PARC æœ‰ç‚¹åƒï¼Œåè€…ç”±äºè¾‰ç…Œæ—¶æœŸçš„åŸç­äººé©¬å·²åŸºæœ¬èµ°å…‰ï¼Œè™½ç„¶ç°åœ¨ç‹¬ç«‹äº†å‡ºæ¥ï¼Œä¹Ÿå¾ˆéš¾å†ç°å½“å¹´çš„é£é‡‡äº†ã€‚&lt;/p&gt;

&lt;p&gt;å¿˜äº†æ€ä¹ˆæ¥è§¦åˆ°è¿™ç¯‡æ–‡ç« äº†ï¼Œçœ‹å®Œæ”¶è·ä¸å°‘ï¼Œä¸æ•¢ç‹¬äº«ã€‚è¿™é‡Œåšäº†ç²¾ç®€çš„ç¿»è¯‘ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è¿˜æ˜¯ç›´æ¥çœ‹è‹±æ–‡åŸæ–‡å§ï¼Œå†…å®¹ä¼šä¸°å¯Œä¸å°‘ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;æ›´å¤šçš„ä¹¦&quot;&gt;æ›´å¤šçš„ä¹¦&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šå­¦ä¹‹å‰å°±è¯»äº†å¾ˆå¤šä¹¦ï¼Œå‘ç°å¯¹åŒä¸€ä¸ªè§‚å¿µå¾€å¾€ä¼šæœ‰å¾ˆå¤šä¸åŒçš„è§£è¯´ã€‚ã€Œthere was more than one point of viewã€ï¼Œæ‰€ä»¥ä¸è¦æ€¥ç€æ¥å—æŸä¸ªè§‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åä¸Šå­¦åï¼Œå‘ç°å­¦æ ¡é‡Œæ¯ä¸ªé¢†åŸŸåªæœ‰ä¸€æœ¬ä¹¦ï¼Œä¹Ÿå°±æ˜¯è€å¸ˆæ‰‹é‡Œçš„é‚£æœ¬æƒå¨ä¹¦ã€‚ç»“æœç”±äºå‡†å¤‡å·¥ä½œåšå¾—è¿‡äºå……åˆ†ï¼Œç»å¸¸ä¼šæå„ç§é—®é¢˜ï¼Œæ¯”å¦‚ã€Œæˆ‘åœ¨å…¶ä»–ä¹¦ä¸Šçœ‹åˆ°è¿‡ä¸æ˜¯è¿™æ ·çš„ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯è¿™æ ·Â·Â·Â·ã€ï¼Œè‡ªç„¶å°±è¢«æ‰“å…¥å†·å®«ï¼Œä»–å€’ä¹Ÿä¸åŸ‹æ€¨ï¼Œåæ­£è¦å­¦ä»€ä¹ˆçœ‹ä¹¦å°±è¡Œäº†ï¼Œä¸å¤ªéœ€è¦è€å¸ˆã€‚&lt;/p&gt;

&lt;h3 id=&quot;9å²é‡åˆ°äº†ç¬¬ä¸€ä¸ªå¥½è€å¸ˆ&quot;&gt;9å²é‡åˆ°äº†ç¬¬ä¸€ä¸ªå¥½è€å¸ˆ&lt;/h3&gt;
&lt;p&gt;åœ¨è¿™ä¸ªè€å¸ˆï¼ˆçœ‹èµ·æ¥åº”è¯¥æ˜¯ä¸ªç‰©ç†è€å¸ˆï¼‰çš„è¯¾å ‚é‡Œçš„æ•™å®¤åé¢æ”¾ç€ä¸€å¼ æ¡Œå­ï¼Œä¸Šé¢æ”¾ç€å„ç§å·¥å…·ã€çº¿ã€ç”µæ± ã€ä¹¦ï¼Œå¥¹ä¹Ÿä¸è¯´è¿™äº›æ˜¯æ‹¿æ¥åšå•¥çš„ã€‚å¥½å¥‡çš„ Kay æ‹¿æ¥äº†å¹²ç”µæ± ã€ç”µçº¿ã€é’‰å­ã€å›å½¢é’ˆåšèµ·äº†ç”µç£æ„Ÿåº”å®éªŒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaak761qbj20ba08waen.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æˆåŠŸåœ°å¸èµ·å›å½¢é’ˆåï¼ŒKay åŒå­¦å¾ˆå…´å¥‹åœ°å«äº†å‡ºæ¥ï¼Œç„¶åæƒŠè®¶åœ°å‘ç°è€å¸ˆå±…ç„¶æ²¡æœ‰éª‚ä»–ï¼Œè€Œæ˜¯é—®ä»–æ€ä¹ˆåšåˆ°çš„ï¼Ÿä¹¦é‡Œè¿˜æåˆ°äº†ä»€ä¹ˆï¼Ÿå½“ä»–è¡¨ç¤ºä¸‹ä¸€ä¸ªè¦åšç”µæŠ¥æœºæ—¶ï¼Œè¯¢é—®äº†æœ‰æ²¡æœ‰æ„Ÿå…´è¶£çš„åŒå­¦ä¸€èµ·æ¥åšï¼Œç„¶åä¸‹åˆæ‰¾ä¸€æ®µæ—¶é—´ä¸€èµ·æ¥æï¼ˆ20%çš„ Side Project æ—¶é—´ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;åæ¥æœ‰ä¸€åŠä»¥ä¸Šçš„åŒå­¦éƒ½å‚ä¸åˆ°äº†é¡¹ç›®ä¸­ï¼Œè€Œä¸”è¶Šæ¥è¶Šæ—©åœ°æ¥åˆ°å­¦æ ¡ï¼Œè¿™æ ·å°±å¯ä»¥èŠ±æ›´å¤šçš„æ—¶é—´åšé¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿæ˜¯è¿™ä»½ç»å†è®© Kay æ„è¯†åˆ°åº”è¯¥å¦‚ä½•è¿›è¡ŒåŸºç¡€æ•™è‚²ï¼šè®©å­©å­ä»¬å‚ä¸åˆ°æ„Ÿå…´è¶£çš„é¡¹ç›®ä¸­ï¼ŒåŒæ—¶èåˆæ•°å­¦ã€ç§‘å­¦ã€è‰ºæœ¯åœ¨å…¶ä¸­ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;They need to go through many of the same processes of discovery in order to make new ideas their own.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;the-center-of-why-is-art&quot;&gt;The Center of â€œWhy?â€ is Art&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬åˆ›ä½œçš„æ‰€æœ‰äº‹ç‰©éƒ½å¯ä»¥è¢«ç§°ä½œè‰ºæœ¯ã€‚ç§‘å­¦å’ŒæŠ€æœ¯ä¹Ÿéƒ½æ˜¯è‰ºæœ¯ï¼Œåªæ˜¯å½¢å¼ä¸ä¸€æ ·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaaksldlqj20n00g47gf.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ã€Œç§‘å­¦çš„è‰ºæœ¯ã€å°±æ˜¯æ‰¾åˆ°ä¸è¢«æ„šå¼„çš„æ–¹å¼ï¼Œè®©ä¸å¯è§å˜å¾—å¯è§ï¼Œåˆ›å»ºæœ€èƒ½åæ˜ å®é™…æƒ…å†µçš„ç†è®ºã€‚&lt;/p&gt;

&lt;p&gt;ç§‘å­¦ä¸å®¹æ˜“è¢«ç›´è§‚åœ°è¡¨ç°ï¼Œå› ä¸ºåªèƒ½å€ŸåŠ©æ•°å­¦ã€ç‰©ç†æˆ–è€…è®¡ç®—æœºç­‰éå¤§è‡ªç„¶åŸäº§ç‰©æ¥æ­ç¤ºã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç§‘å­¦ä»‹äºèƒŒåçš„çœŸç›¸å’Œæè¿°èƒŒåçš„çœŸç›¸ä¹‹é—´&quot;&gt;ç§‘å­¦ä»‹äºã€ŒèƒŒåçš„çœŸç›¸ã€å’Œã€Œæè¿°èƒŒåçš„çœŸç›¸ã€ä¹‹é—´&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaamkyaf1j20ny0b4dj7.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸¤å¹…åœ°å›¾éƒ½æœ‰ç»†èŠ‚ï¼Œä¸”ç²¾å¿ƒç»˜åˆ¶ã€‚ä¸åŒçš„æ˜¯å³è¾¹æ˜¯çœŸå®çš„åœ°å›¾ï¼ˆå°åº¦ï¼‰ï¼Œè€Œå·¦è¾¹æ˜¯æŒ‡ç¯ç‹é‡Œçš„åœ°å›¾ã€‚å¾ˆéš¾é€šè¿‡è‚‰çœ¼æ¥åŒºåˆ†å“ªä¸ªæ˜¯ç°å®ä¸­çš„åœ°å›¾ï¼Œéœ€è¦å€ŸåŠ©é¢å¤–çš„æ‰‹æ®µï¼Œä¹Ÿå°±æ˜¯ã€Œç§‘å­¦çš„è‰ºæœ¯ã€ã€‚&lt;/p&gt;

&lt;p&gt;ä»¥é‡åŠ›ä¸ºä¾‹ï¼Œå®ƒå°±åƒä¸€åªå°å…”å­ï¼Œåœ¨å¹•å¸ƒä¸Šçš„æŠ•å½±å°±æ˜¯æˆ‘ä»¬åœ¨åœ°çƒä¸Šçš„æ„ŸçŸ¥å’Œé‡æµ‹ã€‚æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªæ¨¡å‹ï¼ŒåŒæ ·èƒ½å½¢æˆå…”å­æŠ•å½±ï¼Œä»¥ç‰›é¡¿çš„ä¸‡æœ‰å¼•åŠ›ç†è®ºä¸ºä¾‹ï¼Œä»–é€šè¿‡æ•°å­¦æ¥é˜è¿°æ¨¡å‹ï¼Œä½†å¦‚æœä»”ç»†è§‚å¯Ÿä¼šå‘ç°çœŸå®çš„å…”å­æŠ•å½±å°¾éƒ¨æ˜¯ä¸€ä¸ªå°åœ†çƒï¼Œè€Œç‰›é¡¿çš„æ¨¡å‹å°¾éƒ¨æ˜¯ç²—é•¿æ‰‹è‡‚çš„æŠ•å½±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaamyqi8zj20ys0nuwke.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªã€Œæ‰‹è‡‚æŠ•å½±ã€éœ€è¦èŠ±ä¸€ç‚¹æ—¶é—´å»å‘ç°ï¼Œæ¯”å¦‚æ°´æ˜Ÿçš„å…¬è½¬è½¨é“ä¸ç¬¦åˆç‰›é¡¿å®šå¾‹ï¼Œæ‰€ä»¥ç‰›é¡¿çš„ä¸‡æœ‰å¼•åŠ›æ¨¡å‹å¹¶ä¸å®Œç¾ã€‚ï¼ˆä¸ºäº†æŠŠå°å…”å­å°¾éƒ¨çš„å°åœ†çƒè¡¥ä¸Šï¼Œçˆ±å› æ–¯å¦é‡‡ç”¨äº†è·Ÿç‰›é¡¿æˆªç„¶ä¸åŒçš„æ–¹å¼ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaan9i50zj209h09h41n.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨æœ€è¿‘çš„å‡ ç™¾å¹´é‡Œï¼Œé€šè¿‡ç§‘å­¦ï¼Œæˆ‘ä»¬å‘ç°ç›´è§‰å¾€å¾€æ˜¯ä¸å‡†çš„ï¼šæˆ‘ä»¬åœ¨ä¸åœåœ°æ„šå¼„è‡ªå·±ã€‚æ‰€ä»¥å°½é‡é¿å…é€šè¿‡æ„Ÿè§‰æ¥åšåˆ¤æ–­å’Œè¡ŒåŠ¨ï¼Œå¤šæ€è€ƒä¸€ä¸‹ï¼Œä¸ç„¶å¾ˆå®¹æ˜“å¯¼è‡´é”™è¯¯çš„ç»“æœã€‚&lt;/p&gt;

&lt;p&gt;ç§‘å­¦è®©ä¸å¯è§å˜å¾—æ›´åŠ å¯è§ï¼Œè€Œæˆ‘ä»¬å¯¹äºè‡ªå·±å´å¾€å¾€è§†è€Œä¸è§ã€‚å¾ˆå¤šäººç”Ÿæ´»åœ¨è‡ªå·±çš„æ•…äº‹å’Œç¤¾ä¼šé‡Œï¼Œå¯¹äºè‡ªèº«ã€ç¯å¢ƒç”šè‡³åœ°çƒéƒ½å¾ˆå±é™©ã€‚æ‰€ä»¥æ•™è‚²çš„èŒè´£é™¤äº†æ•™æˆçŸ¥è¯†ã€æŠ€èƒ½ä¹‹å¤–ï¼Œæ›´é‡è¦çš„æ˜¯ä¼ æˆã€Œè®©ä¸å¯è§å˜å¾—å¯è§ã€çš„èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;åªæœ‰æ„è¯†åˆ°è‡ªå·±çœ‹ä¸æ¸…ï¼Œçœ‹ä¸å…¨æ‰ä¼šå­¦ç€å»å‘ç°ã€‚æ•™è‚²å°±æ˜¯å¸®åŠ©äººä»¬è®¤è¯†åˆ°è‡ªå·±è§†é‡çš„å±€é™æ€§ï¼ŒåŒæ—¶æ•™ä¼šä»–ä»¬å¦‚ä½•çœ‹å¾—æ›´æ¸…æ¥šä¸€äº›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ•°å­¦ä¹‹ç¾&quot;&gt;æ•°å­¦ä¹‹ç¾&lt;/h3&gt;
&lt;p&gt;æ•°å­¦æ¦‚å¿µå¾€å¾€å¾ˆéš¾å‘ä¸€ä¸ªæ™®é€šäººè§£é‡Šæ¸…æ¥šï¼Œä½†æœ‰ä¸€äº›å´å¯ä»¥é˜é‡Šå¾—å¾ˆæ˜äº†ã€‚æ¯”å¦‚ 2500 å¹´å‰å¯¹å‹¾è‚¡å®šç†çš„è¯æ˜ï¼ˆæƒ³è¦äº†è§£æ›´å¤šçš„å¯ä»¥å‚è€ƒ&lt;a href=&quot;http://math.stackexchange.com/questions/675522/whats-the-intuition-behind-pythagoras-theorem&quot;&gt;è¿™ä¸ªå¸–å­&lt;/a&gt; ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaankq1nhj20b405pmxm.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¯æ˜è¿‡ç¨‹ç›´è§‚ä¸”ç®€å•ï¼Œå¾ˆç¾ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è®¡ç®—ä¹‹ç¾&quot;&gt;è®¡ç®—ä¹‹ç¾&lt;/h3&gt;
&lt;p&gt;è®¡ç®—éš¾å…ä¼šæ¶‰åŠåˆ°æ•°å­¦ï¼Œåœ¨çœ‹åˆ° John McCarthy çš„ LISP è¯­è¨€åï¼ŒKay è§‰å¾—è¿™é—¨å¼ºå¤§åˆä¼˜é›…çš„è¯­è¨€å……æ»¡äº†é­…åŠ›ï¼Œçœ‹å¾…äº‹ç‰©çš„è§’åº¦å¥‡ç‰¹åˆæ·±åˆ»ï¼Œå°±åƒéº¦å…‹æ–¯éŸ¦çš„ç”µç£æ–¹ç¨‹ã€‚å¯¹ä»–ä¹‹åçš„æƒ³æ³•äº§ç”Ÿäº†å¾ˆå¤šå½±å“ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¤§å­¦æ—¶çœ‹åˆ°äº†å›¾å½¢ç¼–ç¨‹ç³»ç»Ÿï¼ˆSketchpadï¼‰ï¼Œæ„ˆå‘è§‰å¾—è®¡ç®—æœºå¯ä»¥åšçš„äº‹æƒ…ä¼šå¾ˆå¤šä¸”å¾ˆä¸ä¸€æ ·ã€‚åæ¥åˆæ¥è§¦åˆ°äº† Simula è¯­è¨€ï¼ŒåŒæ—¶ç»“åˆè‡ªå·±çš„æ•°å­¦å’Œå¾®ç”Ÿç‰©èƒŒæ™¯ï¼ˆæ²¡é”™ï¼Œä»–å¤§å­¦çš„ä¸“ä¸šä¹‹ä¸€æ˜¯å¾®ç”Ÿç‰©å­¦ï¼‰ï¼Œä»–æœ‰äº†è¿™ä¹ˆä¸ªæƒ³æ³•ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æˆ‘å‡å®šæœªæ¥ç†æƒ³çš„è®¡ç®—æœºèƒ½å¤Ÿå…·å¤‡ç”Ÿç‰©ç»„ç»‡ä¸€æ ·çš„åŠŸèƒ½ï¼Œæ¯ä¸ªâ€˜ç»†èƒâ€™èƒ½å¤Ÿç‹¬ç«‹è¿ä½œï¼Œä¹Ÿèƒ½ä¸å…¶ä»–åŠŸèƒ½ä¸€èµ·å®Œæˆå¤æ‚çš„ç›®æ ‡ã€‚â€˜ç»†èƒâ€™èƒ½å¤Ÿç›¸äº’é‡ç»„ï¼Œä»¥è§£å†³é—®é¢˜æˆ–è€…å®ŒæˆåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å›´ç»•ç€è¿™ä¸ªæƒ³æ³•å¼€å§‹è®¾è®¡ç³»ç»Ÿï¼Œè¿›è¡Œå„ç§è¯•éªŒï¼Œå½“åˆ«äººé—®èµ·ä»–åœ¨å¹²ä»€ä¹ˆæ—¶ï¼Œä»–å›ç­”ï¼šé¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;doug-engelbart-å’Œä»–çš„äº¤äº’ä¸–ç•Œ&quot;&gt;Doug Engelbart å’Œä»–çš„äº¤äº’ä¸–ç•Œ&lt;/h3&gt;
&lt;p&gt;Doug Engelbart åˆ›å»ºäº† NLS ç³»ç»Ÿï¼Œè¿™ä¸ªç³»ç»ŸåŒ…å«äº†å¯¼èˆªæ§åˆ¶å™¨ï¼ˆé¼ æ ‡å‰èº«ï¼‰ã€è¶…æ–‡æœ¬ã€å›¾å½¢ã€å‘½ä»¤è¡Œè¾“å…¥ç­‰ï¼Œæè¿°äº†ä¸€ä¸ªå¯äº¤äº’çš„è®¡ç®—æœºåº”è¯¥æ˜¯æ€æ ·çš„ã€‚&lt;/p&gt;

&lt;p&gt;å¯¼å¸ˆä»‹ç»äº† Ed Cheadle ç»™ Kay è®¤è¯†ï¼Œè¿™ä½åŒå­¦è¯•å›¾æŠŠè®¡ç®—å˜å¾—æ›´å°ï¼Œå°åˆ°å¯ä»¥æ”¾åœ¨æ¡Œä¸Šï¼ŒåŒæ—¶å¯ä»¥äº¤äº’ã€‚ç„¶åä¸¤äººä¸€æ‹å³åˆï¼Œå¼€å§‹ç ”å‘ FLEX Machineï¼Œç›®æ ‡æ˜¯ä¸ªäººè®¡ç®—æœºã€‚å®ƒè¢«æ„æ€æˆé•¿è¿™æ ·ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaao1lieqj20go0a2dio.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å½“æ—¶æ˜¯ 1968 å¹´ï¼Œè·ç¦» Macintosh 1 å‘å¸ƒè¿˜æœ‰ 16 å¹´ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æ¢ç´¢å¯äº¤äº’è®¡ç®—æœºçš„ç”¨é€”æ—¶ï¼Œé‡åˆ°äº† Seymour Papert å’Œ LOGO è¯­è¨€ï¼Œå‘ç°å¯ä»¥é€šè¿‡è®¡ç®—æœºå‘å„¿ç«¥æ›´ç›´è§‚åœ°é˜è¿°æŠ½è±¡æ¦‚å¿µï¼Œæ¯”å¦‚æ•°å­¦ã€‚Kay è¢«è¿™ä¸ªæƒ³æ³•éœ‡æ’¼åˆ°äº†ï¼Œè§‰å¾—è¿™æ˜¯è®¡ç®—æœºçš„æ­£é€”ã€‚äºæ˜¯å¼€å§‹æ„æ€ç±»ä¼¼ Flex çš„æœºå™¨ï¼Œä¸è¿‡é¢å‘å„¿ç«¥ï¼Œåå­—å« Dynabookã€‚æŠŠç¼–ç¨‹è¯­è¨€ä¸æ¸¸æˆç»“åˆæ¥è¡¨è¾¾æ•°å­¦ä¹‹ç¾ã€‚æ‰€ä»¥è®¡ç®—æœºé™¤äº†ä½œä¸ºå·¥å…·ï¼Œè¿˜å¯ä»¥ä½œä¸ºå±•ç¤ºçš„å¹³å°ã€‚ï¼ˆå¯æƒœè¿™ä¸ªæœ¬å­æœ€ç»ˆæ²¡æœ‰åšå‡ºæ¥ï¼Œä¸è¿‡ä¹Ÿç®—æ˜¯ç¬”è®°æœ¬çš„å…ˆé©±äº†ï¼‰&lt;/p&gt;

&lt;p&gt;è¿™å°±éœ€è¦ä¸€é—¨æ–°çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œä¸ºäº†å‘äººè¯æ˜åªéœ€åŠé¡µå°±èƒ½å°†å½“æ—¶ä¸–ç•Œä¸Šæœ€å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€æè¿°æ¸…æ¥šï¼Œä¸¤ä¸ªç¤¼æ‹œä¹‹åï¼ŒKay åšå‡ºäº† Smalltalk çš„ kernelã€‚ä¸€ä¸ªæœˆä¹‹åå’ŒåŒäº‹ä¸€èµ·ç ”å‘å‡ºäº†å¯ä»¥æ­£å¸¸å·¥ä½œçš„é«˜çº§ã€ç®€å•åˆå¼ºå¤§çš„é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ã€‚&lt;/p&gt;

&lt;p&gt;å‡ ä¸ªæœˆä¹‹åï¼ŒDynabook çš„è¿‡æ¸¡æ€äº§ç‰© Alto è¯ç”Ÿäº†ã€‚1975 å¹´ï¼Œå·²ç»æœ‰ä¸Šåƒå° Alto è®¡ç®—æœºåœ¨å­¦æ ¡ä¸­è¢«ä½¿ç”¨äº†ã€‚ï¼ˆç¬¬ä¸€ä»£è‹¹æœç”µè„‘æ­£å¼å‘è¡Œåœ¨ 9 å¹´åï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaaovb0pzj20dn0go7aq.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹åçš„å‡ å¹´æ—¶é—´é‡Œï¼ŒPARC çš„ç ”ç©¶äººå‘˜å„è‡ªé’»ç ”è‡ªå·±çš„é¢†åŸŸï¼Œå¹¶ä¸”å–å¾—äº†ä¸é”™çš„ç»“æœï¼Œå¯¹äºæ¨åŠ¨è®¡ç®—æœºåŠäº’è”ç½‘åŠŸä¸å¯æ²¡ã€‚ï¼ˆè¿™äº›é‡è¦çš„å·¥ä½œä¸»è¦æ˜¯ç”± 25 ä¸ªç§‘å­¦å®¶å®Œæˆçš„ï¼‰&lt;/p&gt;

&lt;h3 id=&quot;å­©å­ä»¬èƒ½åšäº›ä»€ä¹ˆ&quot;&gt;å­©å­ä»¬èƒ½åšäº›ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å­©å­ä»¬æ˜¯å¤©ç”Ÿçš„è‰ºæœ¯å®¶ï¼Œå¦‚æœè¦æ•™è‚²ä»–ä»¬ï¼Œè¦ä¿æŠ¤å¥½ä»–ä»¬çš„è‰ºæœ¯æ€ç»´ï¼Œå…ˆè®©ä»–ä»¬å¯¹æŸä¸ªæƒ³æ³•äº§ç”Ÿå…´è¶£ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚å¯ä»¥è®©ä»–ä»¬ç»“å¯¹ç»„æˆå°é¡¹ç›®ç»„ï¼ˆ10äººå·¦å³ï¼‰ï¼Œè®¾è®¡æ±½è½¦ï¼Œå¹¶é€šè¿‡è°ƒæ•´å‚æ•°å’Œä¸€äº›ç®€å•çš„ç¼–ç¨‹ï¼Œè®©è¿™è¾†è½¦æŒ‰è‡ªå·±çš„æ„æ„¿è·‘èµ·æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1feaap9qneej20yi0ban0f.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¯ä»¥ä¼ æˆç±»ä¼¼ã€ŒåŠ é€Ÿåº¦ã€è¿™æ ·çš„çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ¨¡æ‹Ÿå¤æ‚æ¨¡å‹&quot;&gt;æ¨¡æ‹Ÿå¤æ‚æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å›¾å½¢åŒ–ç¼–ç¨‹ï¼Œè®©è®¡ç®—æœºæ¥æ¨¡æ‹Ÿå¤æ‚çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ä¼ æŸ“ç—…æˆ–è€…è°£è¨€ã€‚ä¹Ÿå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé‡åŠ›æˆ–å¼¹æ€§ã€‚ç”šè‡³å¯¹ç°å®ä¸­çš„æ¡¥æ¢å»ºæ¨¡ï¼Œé€šè¿‡æ¨¡å‹æ¥æ¨¡æ‹Ÿå„ç§æç«¯åœºæ™¯ï¼Œä»¥æ­¤æ¥éªŒè¯æ¡¥æ¢çš„å¯é æ€§ï¼Œé¿å…å®Œå·¥åå‡ºç°å„ç§æ•…éšœã€‚&lt;/p&gt;

&lt;p&gt;ã€Œè¦äº†è§£ä¸–ç•Œï¼Œå¿…é¡»æ„å»ºä¸–ç•Œã€ï¼Œé€šè¿‡è®¡ç®—æœºå¯ä»¥å¯¹çœŸå®ä¸–ç•Œè¿›è¡Œå»ºæ¨¡ã€è°ƒæ•´ã€ä¼˜åŒ–ã€å®éªŒï¼Œå¯ä»¥æ›´å¥½åœ°è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œè¿™ä¸ä¹Ÿæ˜¯ä¸€ä»¶å¾ˆ Romantic å’Œ Art çš„äº‹æƒ…ä¹ˆï¼Ÿ&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>å¯¹èŒä¸šç”Ÿæ¶¯æ„Ÿåˆ°è¿·èŒ«æ—¶å¯ä»¥çœ‹çœ‹è¿™æœ¬ä¹¦</title>
   <link href="http://limboy.me/reading/2017/04/03/pivot.html"/>
   <updated>2017-04-03T00:00:00+08:00</updated>
   <id>http://limboy.me/reading/2017/04/03/pivot</id>
   <content type="html">&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1fe0o5wmam8j20rs15544o.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ— æ„ä¸­çœ‹åˆ°äº†è”¡å­¦é•›æ¨èè¿™æœ¬ä¹¦ï¼Œå» amazon çœ‹äº†ä¸‹ï¼Œè¯„åˆ†è¿˜æŒºé«˜ï¼Œäºæ˜¯å°±ä¸‹äº†ç”µå­ä¹¦ï¼Œçœ‹ä¸‹æ¥æ”¶è·è¿˜ä¸å°‘ã€‚&lt;/p&gt;

&lt;p&gt;å·¥ä½œäº†ä¸€æ®µæ—¶é—´ä¹‹åå¾€å¾€ä¼šå‡ºç°å›°æƒ‘ï¼šåšçš„äº‹æƒ…å¥½åƒä¸å†é‚£ä¹ˆæ¿€åŠ¨äººå¿ƒï¼Œæ˜¯ä¸æ˜¯è¯¥è½¬å²—ï¼Ÿä¸æ–­æ¶Œå…¥çš„å°é²œè‚‰è²Œä¼¼æ¯”è‡ªå·±æœ‰æ´»åŠ›ï¼Œæ˜¯ä¸æ˜¯è¯¥è·³æ§½ï¼Ÿæ˜¯ä¸æ˜¯è¯¥æ¢ä¸€ä¸ªæ–¹å‘ï¼Ÿè¿™äº›é—®é¢˜çš„æŠ˜ç£¨ä¹‹å¤„åœ¨äºã€Œé€‰æ‹©ã€ï¼Œé€‰æ‹©ä¸å¯é¿å…åœ°ä¼šå¤±å»ä¸€äº›ä¸œè¥¿ï¼Œè€Œæˆ‘ä»¬åˆæ˜¯é‚£ä¹ˆå®³æ€•å¤±å»ã€‚æ…¢æ…¢åœ°ï¼Œå°±ä¼šæ„Ÿåˆ°ææ…Œã€‚&lt;/p&gt;

&lt;p&gt;ä»‹ç»ä¹¦çš„å†…å®¹å‰ï¼Œå…ˆä»‹ç»ä¸‹ä½œè€…ï¼šçå¦® Â· å¸ƒè±å…‹ï¼ˆJenny Blakeï¼‰ï¼Œæ˜¯ Google ã€ŒèŒä¸šå¯¼å¸ˆè®¡åˆ’ã€çš„åˆ›å§‹æˆå‘˜ã€‚åœ¨Google å·¥ä½œçš„äº”å¹´é—´ï¼Œå¥¹ä¸º 1000 å¤šåå‘˜å·¥æä¾›äº†èŒä¸šåŸ¹è®­ä¸æŒ‡å¯¼ï¼Œè¿›è€Œå½¢æˆäº†ä¸€å¥—ã€ŒèŒä¸šè½¬å‹æ–¹æ³•è®ºã€ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬ä¹¦çš„æ ¸å¿ƒå†…å®¹å…¨éƒ¨æµ“ç¼©åœ¨ä¸‹é¢è¿™å¼ å›¾é‡Œäº†ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1fe0o6e1r8yj20fq0iqgmx.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è½¬å‹åˆ†ä¸º 4 ä¸ªé˜¶æ®µï¼Œè¿™äº›é˜¶æ®µä¸æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œå°±åƒä¸Šå›¾æè¿°çš„ä¸€æ ·ï¼Œæ˜¯å¾ªç¯è¿›è¡Œçš„ã€‚æ—¶é—´ä¹Ÿä¸ä¸€å®šï¼Œå‡ ä¸ªæœˆæˆ–å‡ å¹´éƒ½æœ‰å¯èƒ½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¬¬ä¸€é˜¶æ®µæ‰“åŸºç¡€plant&quot;&gt;ç¬¬ä¸€é˜¶æ®µï¼šæ‰“åŸºç¡€ï¼ˆPlantï¼‰&lt;/h3&gt;
&lt;p&gt;ä½œè€…ç”¨äº†ä¸€ä¸ªå¾ˆå½¢è±¡çš„æ¯”å–»ï¼šç¯®çƒè¿åŠ¨é‡Œçš„ã€Œè½¬èº«ã€ã€‚é¦–å…ˆè¦æœ‰ä¸€ä¸ªæ”¯æ’‘è„šæ¥ä½œä¸ºåŸºç¡€ï¼Œç„¶åå†åšä¸‹ä¸€æ­¥åŠ¨ä½œã€‚é‚£è¿™ä¸ªåŸºç¡€æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;æƒ³è±¡ä¸‹å¦‚æœé’±ä¸æ˜¯é—®é¢˜ï¼Œä½ ä¼šå¦‚ä½•æ”¯é…æ—¶é—´ï¼Ÿåšå“ªäº›äº‹æœ€è®©ä½ å…´å¥‹ï¼Ÿæœ€å¼•ä»¥ä¸ºè±ªçš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿå¸Œæœ›åˆ«äººå¦‚ä½•ä»‹ç»ä½ ï¼Ÿæœ‰æ²¡æœ‰ä»°æ…•çš„äººï¼Œä»–ä»¬çš„ä»€ä¹ˆç‰¹è´¨å¸å¼•äº†ä½ ï¼Ÿç›®å‰é¢ä¸´çš„å›°å¢ƒæ˜¯ä»€ä¹ˆï¼Ÿå¸Œæœ›ç”Ÿæ´»ä¸­å¤šä¸€ç‚¹ä»€ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿™äº›é—®é¢˜å¯ä»¥å¸®åŠ©æ‰¾åˆ°è‡ªå·±æœ€çœ‹é‡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚å¥åº·ã€åˆ›ä½œã€æˆé•¿ã€è´¢åŠ¡è‡ªç”±ç­‰ã€‚ç„¶åå›´ç»•è¿™äº›å…³é”®å­—çœ‹çœ‹å¯ä»¥åšä»€ä¹ˆã€‚æ¯”å¦‚ã€Œå¸®åŠ©ä»–äººã€å¯ä»¥ï¼šæ•™å­¦ã€æŒ‡å¯¼ã€åˆ†äº«ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;çŸ¥é“äº†è‡ªå·±æœ€åœ¨ä¹çš„ï¼Œä»¥åŠç›¸å…³çš„å¯ä»¥åšçš„äº‹æƒ…ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æŒ‰ç…§ä¼˜å…ˆçº§æ’åºï¼ˆå¦‚æœä¸æ¸…æ¥šä¼˜å…ˆçº§ï¼Œå¯ä»¥é—®ä¸€ä¸‹è‡ªå·±ï¼šå¦‚æœåªèƒ½é€‰ä¸€ä¸ªä¼šé€‰å“ªä¸ªï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åä¼šå‡ºæ¥ä¸€ä¸ªåˆ—è¡¨ï¼ŒæŠŠå®ƒæ”¾åœ¨è‡ªå·±æ¯å¤©èƒ½çœ‹åˆ°çš„åœ°æ–¹ï¼ˆæ¯”å¦‚å£çº¸ï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å¿«ä¹å…¬å¼&quot;&gt;å¿«ä¹å…¬å¼&lt;/h4&gt;

&lt;p&gt;ç”±äºä¸ªä½“é—´çš„å·®å¼‚ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å¿«ä¹çš„äº‹æƒ…ä¹Ÿä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™ä¸ªå…¬å¼åªèƒ½è‡ªå·±æ€»ç»“ã€‚å¯ä»¥ä»å¾®è§‚å’Œå®è§‚å±‚é¢ä¸Šå»æ‹†åˆ†ã€‚è¿™æ˜¯ä¸€ä¸ª Demoï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ww1.sinaimg.cn/large/afe37136gy1fe0o6nmuh2j21390qralz.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½œè€…è¿˜ç»™äº†ä¸€äº›å»ºè®®ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;é¿å…å†³ç­–ç–²åŠ³ã€‚ç²¾åŠ›æœ‰é™ï¼Œæ— è®ºå¤§å°å†³ç­–éƒ½éœ€è¦ç²¾åŠ›ï¼Œä¸è¦çº ç»“äºé‚£äº›å°äº‹ï¼ˆæ¯”å¦‚ä»Šå¤©ç©¿ä»€ä¹ˆï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;é”»ç‚¼èº«ä½“ã€‚è½¬å‹è¿‡ç¨‹å¯èƒ½æ¯”è¾ƒæ¼«é•¿ï¼Œèº«ä½“ä¸€å®šè¦æ’‘ä½ã€‚&lt;/li&gt;
  &lt;li&gt;å†¥æƒ³ã€‚æœ‰å¥‡æ•ˆã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ä½ å¸Œæœ›-1-å¹´åçš„è‡ªå·±æ˜¯æ€æ ·çš„&quot;&gt;ä½ å¸Œæœ› 1 å¹´åçš„è‡ªå·±æ˜¯æ€æ ·çš„ï¼Ÿ&lt;/h4&gt;
&lt;p&gt;é€šè¿‡å‰ä¸€æ­¥æ“ä½œï¼Œæœ‰äº†ç½—ç›˜ã€‚æ¥ä¸‹æ¥å°±è¯¥çŸ¥é“å…·ä½“è¯¥å¾€å“ªé‡Œèµ°äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ª 1 å¹´åçš„ vision éœ€è¦å…·ä½“ä¸”å¯¹è‡ªå·±æœ‰è¯±æƒ‘åŠ›ã€‚åªæœ‰å…·ä½“æ‰ä¸ä¼šåèˆªï¼›æœ‰è¯±æƒ‘åŠ›æ‰èƒ½å…‹æœé‡é‡é˜»ç¢ã€‚é‚£ä¸ºä»€ä¹ˆä¸æ˜¯ 5 å¹´å‘¢ï¼Ÿå› ä¸ºå˜æ•°å¤ªå¤šï¼Œå°±åƒ 07 å¹´ iPhone å‡ºæ¥äº†ï¼ŒInstagram çš„ä½œè€…ä»¬ä¼šåœ¨ 04 å¹´å†³å®šåšä¸€æ¬¾ iPhone åº”ç”¨ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¿™ä¸ª vision æœ€å¥½æœ‰ç”»é¢æ„Ÿï¼Œé‚£ç§æƒ³æƒ³å°±å¾ˆç¾å¥½çš„ç”»é¢ã€‚ æ¯”å¦‚ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1 å¹´åçš„ä»Šå¤©ï¼Œæˆ‘å¸Œæœ›è‡ªå·±ä½åœ¨ä¼¦æ•¦ï¼Œåœ¨å’–å•¡é¦†å‡†å¤‡è‡ªå·±çš„å›½é™…å•†åŠ¡è¯¾ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯ä»¥å…ˆæœ‰ä¸€äº›æ¨¡ç³Šçš„ç”»é¢ï¼Œå†æ…¢æ…¢é›•åˆ»ã€‚æ¯”å¦‚ã€Œæ¯å¤©æ—©ä¸Šæ¨ä¸å¾—æ—©ç‚¹èµ·åºŠè¦åšçš„äº‹ã€ã€ã€Œé€šè¿‡è‡ªå·±çš„å·¥ä½œå¯¹ä¸€éƒ¨åˆ†äººäº§ç”Ÿæ­£é¢å½±å“ã€ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æ˜ç¡®è‡ªå·±çš„å¼ºé¡¹&quot;&gt;æ˜ç¡®è‡ªå·±çš„å¼ºé¡¹&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;å°æ—¶å€™å¾ˆå–œæ¬¢ä»€ä¹ˆäº‹æƒ…ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;æœ€è¿‘å› ä¸ºå“ªäº›äº‹è€Œå¤‡å—ç§°èµï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å› ä¸ºåšäº†ä»€ä¹ˆè€Œæœ‰äº†ä¸€å®šçš„å£°èª‰ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;åšå“ªäº›äº‹è®©è‡ªå·±æ„Ÿè§‰å¾ˆé™¶é†‰ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™äº›é—®é¢˜å°±åƒé•œå­ï¼Œæ–¹ä¾¿çœ‹è§è‡ªå·±çš„ä¼˜åŠ¿ã€‚è¿™æ ·æ–¹ä¾¿çŸ¥é“è‡ªå·±ç›®å‰çš„çŠ¶æ€ï¼Œå¦‚æœè¦å»ç›®çš„åœ°ï¼Œè¿˜å·®å“ªäº›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¬¬äºŒé˜¶æ®µæ‰«æscan&quot;&gt;ç¬¬äºŒé˜¶æ®µï¼šæ‰«æï¼ˆScanï¼‰&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯å¯»æ‰¾åˆ°è¾¾ç›®çš„åœ°çš„äººï¼ˆå¯¼å¸ˆï¼è´µäººï¼‰ã€æŠ€èƒ½ï¼ˆæ˜¯å¦å…·å¤‡è½¬å‹æ‰€éœ€çš„æŠ€èƒ½ï¼‰å’Œæœºä¼šã€‚å¤šä¸è‡ªå·±ä»°æ…•çš„äººäº¤æµï¼Œå¬å–ä»–ä»¬çš„å»ºè®®ï¼›åšä¸€äº›è°ƒæŸ¥ï¼›å¡«è¡¥æŠ€èƒ½çŸ­æ¿ï¼›æ˜ç¡®æ€æ ·çš„æœºä¼šæ˜¯è‡ªå·±æœ€æƒ³è¦çš„ï¼›é€‚å½“åœ°åŠ å¼ºç¤¾äº¤åœˆï¼Œå¢åŠ æ›å…‰åº¦ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µå¤šæƒ³æƒ³æˆ‘èƒ½æä¾›ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›éœ€è¦è¢«è§£å†³çš„é—®é¢˜ï¼ŸåŒæ—¶è®©è‡ªå·±å¤„äºå¯è¢«å‘ç°çš„çŠ¶æ€ï¼ˆå°±åƒè“ç‰™è®¾å¤‡ä¸€æ ·ï¼‰ï¼Œé€šè¿‡å†™ä½œã€ä½œå“ã€åˆ†äº«æ‰©å¤§å½±å“åœˆï¼Œè¿™æ ·æ‰èƒ½è®©æœºä¼šæ‰¾åˆ°ä½ ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¯»æ‰¾é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œå¤šæƒ³æƒ³ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªé¡¹ç›®ï¼Ÿæƒ³è¦è¾¾åˆ°ä»€ä¹ˆç›®æ ‡ï¼Ÿæƒ³è¦å½±å“å“ªäº›äººï¼Ÿåº”è¯¥åšäº›ä»€ä¹ˆæ‰èƒ½æœ€å¤§åŒ–è‡ªå·±çš„ä»·å€¼ï¼Ÿ&lt;/p&gt;

&lt;h4 id=&quot;å‘å±•è‡ªå·±çš„ç¤¾ç¾¤&quot;&gt;å‘å±•è‡ªå·±çš„ç¤¾ç¾¤&lt;/h4&gt;
&lt;p&gt;è¿™éœ€è¦æ—¶é—´ï¼Œä½†æ˜¯å€¼å¾—ã€‚ä½œè€…ç¦»å¼€ Google çš„æ—¶å€™ï¼Œå°±æ˜¯é€šè¿‡åœ¨ 20% çš„ä¸šä½™æ—¶é—´å»ºç«‹çš„è‰¯å¥½å£ç¢‘ï¼Œç¦»èŒåä¾ç„¶æœ‰äººæŒç»­åœ°æ¥å’¨è¯¢ã€‚å°±åƒ KK è¯´çš„ï¼Œ1000 ä¸ªã€Œæ­»å¿ ç²‰ã€ï¼Œæ„¿æ„ä¹°ä½ å‡ºå”®çš„ä»»ä½•ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;ä½œè€…ä¸¾äº†ä¸ªä¾‹å­ï¼šDaniel Kelleghan ä¹‹å‰ä½œä¸ºæ‘„å½±å¸ˆåœ¨ Groupon å·¥ä½œï¼Œç¦»èŒååœ¨ä¸–ç•Œå„åœ°æ‹æ—¶å°šå’Œå»ºç­‘ï¼Œé€šè¿‡ä¸å®¢æˆ·åˆä½œæ¥ç»´æŒæ”¶å…¥ï¼ŒåŒæ—¶é€šè¿‡ Instagram ä¸Šçš„é«˜è´¨é‡ç…§ç‰‡æ¥åœˆç²‰ã€‚3 å¹´ä¸‹æ¥ç§¯æ”’äº† 7000 å¤šä¸ªç²‰ä¸ï¼Œç”±äºé«˜è´¨é‡çš„å›¾ç‰‡ï¼Œè¢« Instagram å®˜æ–¹æ¨èï¼Œç„¶åå°±è¿æ¥äº† 10k çš„ç²‰ä¸ã€‚æ¥ç€é…’åº—å’Œæœè£…å…¬å¸å°±è‡ªåŠ¨æ‰¾ä¸Šé—¨ï¼Œç°åœ¨ä»–åœ¨å¾ˆå¤šåœ°æ–¹éƒ½å¯ä»¥å…è´¹åƒä½ï¼Œä¸€äº›å¤§å“ç‰Œå¦‚å¥¥è¿ªä¹Ÿä¸»åŠ¨æ¥è°ˆåˆä½œã€‚&lt;/p&gt;

&lt;p&gt;æœ€åå¦‚æœå®åœ¨ä¸çŸ¥é“åšä»€ä¹ˆï¼Œå¯ä»¥è€ƒè™‘é‚£äº›æ²¡äººæ„¿æ„åšçš„äº‹ï¼Œå¯èƒ½ä¼šæœ‰æ–°çš„çµæ„Ÿï¼ŒåŒæ—¶åˆä¼šäº§ç”Ÿå·®å¼‚åŒ–ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¬¬ä¸‰é˜¶æ®µè¯•æ°´pilot&quot;&gt;ç¬¬ä¸‰é˜¶æ®µï¼šè¯•æ°´ï¼ˆPilotï¼‰&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯éªŒè¯ã€‚æœ‰æƒ³æ³•ï¼Œå¿«é€Ÿå®ç°å’Œæµ‹è¯•ï¼Œé€æ­¥è¿­ä»£ï¼Œæ•ˆæœä¸å¥½å°±æ¢ä¸€ä¸ªï¼Œæ•ˆæœå¥½å°±æŠ•å…¥æ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›åŸ¹å…»ã€‚&lt;/p&gt;

&lt;p&gt;äº§å“å¼€å‘ä¸­æœ‰ä¸€ä¸ª MVP çš„æ¦‚å¿µï¼šMinimum Viable Productsã€‚ä¸€ä¸ªå¾ˆå…¸å‹çš„ä¾‹å­å°±æ˜¯ ProductHuntï¼Œç°åœ¨å‡ ä¹æˆäº†å‘ç°æ–°ä¼˜äº§å“çš„é¦–é€‰ã€‚åœ¨æœ€å¼€å§‹å°±æ˜¯æ‰¾çš„ç½‘ä¸Šä¸€ä¸ªåˆ†äº«é“¾æ¥çš„æœåŠ¡ï¼Œé‚€è¯·å¥½å‹ä¸€èµ·æ¥åˆ†äº«æœ‰æ„æ€çš„äº§å“ï¼Œç„¶åå‘ç°æœ‰å¾ˆå¤šçš„è®¢é˜…ï¼Œæ‰å¼€å§‹è€ƒè™‘åšä¸€ä¸ª ProductHunt çš„ç½‘ç«™ã€‚æ‰¾äººé€šè¿‡ä¿®æ”¹å¼€æºé¡¹ç›®ï¼Œç”¨ 8 å¤©çš„æ—¶é—´æ­äº†ä¸€ä¸ªç±»ä¼¼ Hacker News çš„ç®€æ˜“ç½‘ç«™ã€‚&lt;/p&gt;

&lt;p&gt;åˆé€‚çš„è¯•æ°´é¡¹ç›®éœ€è¦è·Ÿç¬¬ä¸€é˜¶æ®µçš„ä»·å€¼ï¼ˆå¯¹ä½ æ¥è¯´æœ€é‡è¦çš„ä¸œè¥¿ï¼‰ã€æ„¿æ™¯ï¼ˆæœ€è®©ä½ å…´å¥‹çš„ï¼‰ã€æŠ€èƒ½ã€è´¢åŠ›ã€ç¤¾äº¤åœˆå¼ºç›¸å…³ã€‚&lt;/p&gt;

&lt;p&gt;å°½å¯èƒ½åœ°åœ¨å·¥ä½œä¹‹ä½™æŠ½å‡ºæ—¶é—´æ¥ç»è¥è‡ªå·±çš„é¡¹ç›®ã€‚éªŒè¯è¿‡ç¨‹ä¸­ï¼Œå¤šæƒ³æƒ³å“ªäº›æ˜¯å¯è¡Œçš„ï¼Œå“ªäº›ä¸å¯è¡Œï¼Œéœ€è¦åšå‡ºå“ªäº›æ”¹å˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¬¬å››é˜¶æ®µå¯åŠ¨launch&quot;&gt;ç¬¬å››é˜¶æ®µï¼šå¯åŠ¨ï¼ˆLaunchï¼‰&lt;/h3&gt;

&lt;p&gt;å¦‚æœæ¥åˆ°äº†è¿™ä¸ªé˜¶æ®µé‚£è¯´æ˜å‰å‡ ä¸ªé˜¶æ®µæ•ˆæœä¸é”™ï¼Œè¿™ä¸ªé˜¶æ®µä¸»è¦è€ƒè™‘çš„ç‚¹æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½•æ—¶è¯¥è¸å‡ºé‚£ä¸€æ­¥ã€‚&lt;/li&gt;
  &lt;li&gt;å…³é”®çš„å†³ç­–å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;éœ€è¦ä¸€ç‚¹ç‚¹å‹‡æ°”ï¼ŒåŒæ—¶è¯„ä¼°å¤±è´¥çš„é£é™©ï¼Œç›¸ä¿¡è‡ªä¼šæœ‰åˆ¤æ–­ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åè®°&quot;&gt;åè®°&lt;/h3&gt;
&lt;p&gt;è‹±æ–‡ä¹¦çœ‹ä¸‹æ¥ç¡®å®ç´¯ï¼Œä¸è¿‡åªè¦é™ä¸‹å¿ƒæ¥ï¼Œé—®é¢˜å€’ä¹Ÿä¸å¤§ã€‚è¿™ä¸ªæ¨¡å‹å…¶å®è·Ÿäº§å“çš„å‘¨æœŸæŒºåƒçš„ï¼šå…ˆå®šä¹‰äº§å“çš„ä»·å€¼å’Œè¦è§£å†³çš„é—®é¢˜ï¼Œç„¶åå¿«é€Ÿå‡º MVPï¼Œå†…æµ‹ã€è¿­ä»£ï¼Œä¸æ–­å¾ªç¯ï¼Œç›´åˆ°è´¨é‡å’ŒåŠŸèƒ½éƒ½ OK äº†ï¼Œæ­£å¼ä¸Šçº¿ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æ˜¯æŒºæœ‰å‚è€ƒä»·å€¼çš„ï¼Œè‡ªå·±ä¹Ÿä¼šåœ¨æ¥ä¸‹æ¥çš„æ—¶é—´ä¸­è¿›è¡Œå°è¯•ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>æ˜¯æ—¶å€™å­¦ä¹  RxSwift äº†</title>
   <link href="http://limboy.me/tech/2016/12/11/time-to-learn-rxswift.html"/>
   <updated>2016-12-11T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/12/11/time-to-learn-rxswift</id>
   <content type="html">&lt;p&gt;ç›¸ä¿¡åœ¨è¿‡å»çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œå¯¹ RxSwift å¤šå°‘æœ‰è¿‡æ¥è§¦æˆ–è€³é—»ï¼Œæˆ–è€…å·²ç»ç§¯ç´¯äº†ä¸å°‘å®æˆ˜ç»éªŒã€‚æ­¤æ–‡ä¸»è¦é’ˆå¯¹é‚£äº›åœ¨é—¨å£å¾˜å¾Šï¼Œæƒ³è¿›åˆæ‹è¸©å‘çš„åŒå­¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸ºä»€ä¹ˆè¦å­¦ä¹ -rxswift&quot;&gt;ä¸ºä»€ä¹ˆè¦å­¦ä¹  RxSwift&lt;/h3&gt;
&lt;p&gt;å½“å†³å®šåšä¸€ä»¶äº‹æƒ…æ—¶ï¼Œè‡³å°‘è¦çŸ¥é“ä¸ºä»€ä¹ˆã€‚RxSwift å®˜ç½‘ä¸¾äº†&lt;a href=&quot;https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Why.md&quot;&gt;å‡ ä¸ªä¾‹å­&lt;/a&gt;ï¼Œæ¯”å¦‚å¯ä»¥ç»Ÿä¸€å¤„ç† &lt;code class=&quot;highlighter-rouge&quot;&gt;Delegate&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;KVO&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Notification&lt;/code&gt;ï¼Œå¯ä»¥ç»‘å®š UIï¼Œæ–¹ä¾¿ç½‘ç»œè¯·æ±‚çš„å¤„ç†ç­‰ç­‰ã€‚ä½†è¿™äº›æ›´å¤šçš„æ˜¯æè¿°å¯ä»¥ç”¨ RxSwift æ¥åšä»€ä¹ˆï¼Œè·Ÿä¸ºä»€ä¹ˆè¦ä½¿ç”¨ RxSwift è¿˜æ˜¯ä¼šæœ‰ç‚¹ä¸åŒã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬å…ˆæ¥åˆ†æä¸‹ GUI ç¼–ç¨‹çš„æœ¬è´¨ï¼Œæˆ‘å–œæ¬¢æŠŠå®ƒæŠ½è±¡ä¸ºè§†å›¾å’Œæ•°æ®çš„ç»“åˆã€‚å…¶ä¸­è§†å›¾è´Ÿè´£ä¸¤ä»¶äº‹ï¼šå±•ç¤ºå’Œäº¤äº’ï¼Œå±•ç¤ºä»€ä¹ˆç”±æ•°æ®å†³å®šã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14814474678383.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­å•å‘æ•°æ®æµå¯ä»¥é€šè¿‡&lt;a href=&quot;http://limboy.me/tech/2016/12/04/reswift-analyze.html&quot;&gt;ä¹‹å‰ä»‹ç»çš„ ReSwift&lt;/a&gt; å®Œæˆã€‚çœ‹èµ·æ¥å¥½åƒæ²¡ RxSwift ä»€ä¹ˆäº‹æƒ…ï¼Œå…¶å®ä¸ç„¶ï¼ŒRxSwift å¯ä»¥åœ¨ UniDirectional Data Flow çš„å„ä¸ªé˜¶æ®µéƒ½å‘æŒ¥ä½œç”¨ï¼Œä»è€Œè®© Data çš„å¤„ç†å’ŒæµåŠ¨æ›´åŠ ç®€æ´å’Œæ¸…æ™°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14814474032179.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é€šè¿‡å¯¹ RxCocoa çš„å„ç§å›è°ƒè¿›è¡Œç»Ÿä¸€å¤„ç†ï¼Œæ–¹ä¾¿äº†ã€ŒInteractã€çš„å¤„ç†ã€‚&lt;/li&gt;
  &lt;li&gt;é€šè¿‡å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; çš„ transform å’Œ compositeï¼Œæ–¹ä¾¿äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; çš„ç”Ÿæˆï¼ˆæ¯”å¦‚ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;throttle&lt;/code&gt; æ¥å‹ç¼© &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;é€šè¿‡å¯¹ç½‘ç»œè¯·æ±‚ä»¥åŠå…¶ä»–å¼‚æ­¥æ•°æ®çš„è·å–è¿›è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; å°è£…ï¼Œæ–¹ä¾¿äº†å¼‚æ­¥æ•°æ®çš„å¤„ç†ã€‚&lt;/li&gt;
  &lt;li&gt;é€šè¿‡ RxCocoa çš„ bindingï¼Œæ–¹ä¾¿äº†æ•°æ®çš„æ¸²æŸ“ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥ ReSwift è§„èŒƒäº†æ•°æ®æµï¼ŒRxSwift ä¸ºæ•°æ®çš„å¤„ç†æä¾›äº†æ–¹ä¾¿ï¼Œè¿™ä¸¤ä¸ªç±»åº“çš„ç»“åˆï¼Œå¯ä»¥äº§ç”Ÿæ¸…æ™°çš„æ¶æ„å’Œæ˜“ç»´æŠ¤çš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œå‰ææ˜¯å¯¹å®ƒä»¬æœ‰è¶³å¤Ÿçš„äº†è§£ï¼Œå°¤å…¶æ˜¯ RxSwiftï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-rxswift&quot;&gt;ä»€ä¹ˆæ˜¯ RxSwift&lt;/h3&gt;
&lt;p&gt;åœ¨ GUI ç¼–ç¨‹ä¸­ï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒå¤æ‚çš„æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;éåŸç”Ÿ UI æ•ˆæœçš„å®ç°ï¼ˆæ¯”å¦‚äº§å“ç»ç†ä»¬ç»å¸¸å†’å‡ºæ¥çš„å„ç§æƒ³æ³•ï¼‰ã€‚&lt;/li&gt;
  &lt;li&gt;å¤§é‡çŠ¶æ€çš„ç»´æŠ¤ã€‚&lt;/li&gt;
  &lt;li&gt;å¼‚æ­¥æ•°æ®çš„å¤„ç†ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;1ï¼‰ä¸åœ¨è¿™æ¬¡çš„è®¨è®ºèŒƒç•´ï¼ˆè¿™é‡Œçš„å­¦é—®ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚æµç•…æ€§å’Œæ€§èƒ½ï¼‰ã€‚2) å¯ä»¥é€šè¿‡å•å‘æ•°æ®æµæ¥è§£å†³ï¼ˆç»“åˆ Immutable Dataï¼‰ã€‚3) å¯ä»¥é€šè¿‡ RxSwift æ¥è§£å†³ã€‚é‚£ä¹ˆ RxSwift æ˜¯å¦‚ä½•å¤„ç†å¼‚æ­¥æ•°æ®çš„å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;åœ¨è¯´ RxSwift ä¹‹å‰ï¼Œå…ˆæ¥è¯´ä¸‹ Rxï¼Œ &lt;a href=&quot;http://reactivex.io/&quot;&gt;ReactiveX&lt;/a&gt; æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œæœ€åˆç”±å¾®è½¯å¼€å‘ï¼Œç»“åˆäº†è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å™¨æ¨¡å¼å’Œå‡½æ•°å¼ç¼–ç¨‹çš„ç²¾åï¼Œæ¥æ›´æ–¹ä¾¿åœ°å¤„ç†å¼‚æ­¥æ•°æ®æµã€‚å…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ¦‚å¿µæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå½“åˆ«äººåœ¨è·Ÿä½ è¯´è¯æ—¶ï¼Œä½ å°±æ˜¯é‚£ä¸ªè§‚å¯Ÿè€…ï¼Œåˆ«äººå°±æ˜¯é‚£ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œå®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;å¯èƒ½ä¼šä¸æ–­åœ°è·Ÿä½ è¯´è¯ã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;onNext:&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;å¯èƒ½ä¼šè¯´é”™è¯ã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;onError:&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;ç»“æŸä¼šè¯´è¯ã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;onCompleted&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ä½ åœ¨å¬åˆ°å¯¹æ–¹è¯´çš„è¯åï¼Œä¹Ÿå¯ä»¥æœ‰å‡ ç§ååº”ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ ¹æ®è¯´çš„è¯ï¼Œåšç›¸åº”çš„äº‹ï¼Œæ¯”å¦‚å¯¹æ–¹è®©ä½ å€Ÿæœ¬ä¹¦ç»™ä»–ã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;subscribe&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;æŠŠå¯¹æ–¹è¯´çš„è¯ï¼ŒåŠ å·¥ä¸‹å†ä¼ è¾¾ç»™å…¶ä»–äººï¼Œæ¯”å¦‚å¯¹æ–¹è¯´å°å¼ å¥½åƒä¸å¤ªèˆ’æœï¼Œä½ ä¼ è¾¾ç»™å…¶ä»–äººæ—¶å°±å˜æˆäº†å°å¼ å¤±æ‹äº†ã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;map:&lt;/code&gt;ï¼‰&lt;/li&gt;
  &lt;li&gt;å‚è€ƒå…¶ä»–äººè¯´çš„è¯å†åšå¤„ç†ï¼Œæ¯”å¦‚ A è¯´æŸå®¶åº—å¾ˆå¥½åƒï¼ŒB è¯´æŸå®¶åº—ä¸€èˆ¬èˆ¬ï¼Œä½ éœ€è¦ç»“åˆä¸¤ä¸ªäººçš„æ„è§å†åšå®šå¤ºã€‚ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;zip:&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥ï¼Œä»ç”Ÿæ´»ä¸­ä¹Ÿèƒ½çœ‹åˆ° Rx çš„å½±å­ã€‚ã€Œæœ‰äº›äº‹æƒ…æ€¥ä¸å¾—ï¼Œä½ å¾—ç­‰å®ƒè‡ªå·±ç†Ÿã€ï¼Œå¼‚æ­¥ï¼Œå…¶å®å°±æ˜¯è·Ÿæ—¶é—´æ‰“äº¤é“ï¼Œä¸åŒçš„æ—¶é—´ï¼Œæ‹¿åˆ°çš„æ•°æ®ä¹Ÿä¼šä¸ä¸€æ ·ã€‚å¯ä»¥&lt;a href=&quot;http://rxmarbles.com&quot;&gt;åœ¨çº¿æ„Ÿå—ä¸‹&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14814518766811.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œçš„æ ¸å¿ƒæ˜¯å½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œèƒ½å¤Ÿç«‹åˆ»çŸ¥æ™“ï¼Œå¹¶ä¸”é€šè¿‡ç»„åˆå’Œè½¬æ¢åï¼Œå¯ä»¥å³æ—¶ä½œå‡ºå“åº”ã€‚æœ‰ç‚¹åƒå¡”é˜²ï¼Œå…ˆåœ¨è·¯ä¸Šçš„å„ä¸ªèŠ‚ç‚¹åŸ‹å¥½æ­¦å™¨ï¼Œç„¶åç­‰ç€å°æ€ªå…½ä»¬è¿‡æ¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;rxswift-workflow&quot;&gt;RxSwift Workflow&lt;/h3&gt;

&lt;p&gt;å¤§è‡´åˆ†ä¸ºè¿™ä¹ˆå‡ ä¸ªé˜¶æ®µï¼šå…ˆæŠŠ Native Object å˜æˆ Observableï¼Œå†é€šè¿‡ Observable å†…ç½®çš„å„ç§å¼ºå¤§çš„è½¬æ¢å’Œç»„åˆèƒ½åŠ›å˜æˆæ–°çš„ Observableï¼Œæœ€åæ¶ˆè´¹æ–°çš„ Observable çš„æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14814540314644.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;native-object---observable&quot;&gt;Native Object -&amp;gt; Observable&lt;/h4&gt;

&lt;h5 id=&quot;rx-extension&quot;&gt;.rx extension&lt;/h5&gt;

&lt;p&gt;å‡è®¾éœ€è¦å¤„ç†ç‚¹å‡»äº‹ä»¶ï¼Œæ­£å¸¸çš„åšæ³•æ˜¯ç»™ Tap Gesture æ·»åŠ ä¸€ä¸ª Target-Actionï¼Œç„¶ååœ¨é‚£é‡Œå®ç°å…·ä½“çš„é€»è¾‘ï¼Œè¿™æ ·çš„é—®é¢˜åœ¨äºéœ€è¦é‡æ–°å–åå­—ï¼Œè€Œä¸”ä¸¢å¤±äº†ä¸Šä¸‹æ–‡ã€‚RxSwift (ç¡®åˆ‡è¯´æ˜¯ RxCocoa) ç»™ç³»ç»Ÿçš„è¯¸å¤šåŸç”Ÿæ§ä»¶ï¼ˆåŒ…æ‹¬åƒ &lt;code class=&quot;highlighter-rouge&quot;&gt;URLSession&lt;/code&gt;ï¼‰æä¾›äº† rx æ‰©å±•ï¼Œæ‰€ä»¥ç‚¹å‡»çš„å¤„ç†å°±å˜æˆäº†è¿™æ ·ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;tapBackground&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITapGestureRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;tapBackground&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;endEditing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addGestureRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tapBackground&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æ˜¯ä¸æ˜¯ç®€æ´äº†å¾ˆå¤šã€‚&lt;/p&gt;

&lt;h5 id=&quot;observablecreate&quot;&gt;Observable.create&lt;/h5&gt;

&lt;p&gt;é€šè¿‡è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å°† Native çš„ object åŒ…è£…æˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œæ¯”å¦‚å¯¹ç½‘ç»œè¯·æ±‚çš„å°è£…ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;URLRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;HTTPURLResponse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dataTaskWithRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;httpResponse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;resume&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Disposables&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å‡ºäºä»£ç çš„ç®€æ´ï¼Œç•¥å»äº†å¯¹ error çš„å¤„ç†ï¼Œä½¿ç”¨å§¿åŠ¿ç±»ä¼¼&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;disposeBag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DisposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Observerable&lt;/code&gt; è¿”å›çš„æ˜¯ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Disposable&lt;/code&gt;ï¼Œè¡¨ç¤ºã€Œå¯æ‰”æ‰ã€çš„ï¼Œæ‰”å“ªé‡Œå‘¢ï¼Œå°±æ‰”åˆ°åˆšåˆšåˆ›å»ºçš„è¢‹å­é‡Œï¼Œè¿™æ ·å½“è¢‹å­è¢«å›æ”¶ï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;dealloc&lt;/code&gt;ï¼‰æ—¶ï¼Œä¼šé¡ºä¾¿æ‰§è¡Œä¸€ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Disposable.dispose()&lt;/code&gt;ï¼Œä¹‹å‰åˆ›å»º &lt;code class=&quot;highlighter-rouge&quot;&gt;Disposable&lt;/code&gt; æ—¶ç”³è¯·çš„èµ„æºå°±ä¼šè¢«ä¸€å¹¶é‡Šæ”¾æ‰ã€‚&lt;/li&gt;
  &lt;li&gt;å¦‚æœæœ‰å¤šä¸ª subscriber æ¥ subscribe &lt;code class=&quot;highlighter-rouge&quot;&gt;response(aRequest)&lt;/code&gt; é‚£ä¹ˆä¼šåˆ›å»ºå¤šä¸ªè¯·æ±‚ï¼Œä»ä»£ç ä¹Ÿå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œæ¥ä¸€ä¸ª observer å°±åˆ›å»ºä¸€ä¸ª taskï¼Œç„¶åæ‰§è¡Œã€‚è¿™å¾ˆæœ‰å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¦‚ä½•è®©å¤šä¸ª subscriber å…±äº«ä¸€ä¸ªç»“æœï¼Œè¿™ä¸ªåé¢ä¼šæåˆ°ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;variable&quot;&gt;Variable()&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Variable(value)&lt;/code&gt; å¯ä»¥æŠŠ value å˜æˆä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œä¸è¿‡å‰ææ˜¯ä½¿ç”¨æ–°çš„èµ‹å€¼æ–¹å¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;aVariable.value = newValue&lt;/code&gt;ï¼Œæ¥çœ‹ä¸ª Demo&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;magicNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;magicNumberVariable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Variable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;magicNumber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;magicNumberVariable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asObservable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;magic number is &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;magicNumberVariable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;73&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// output&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// &lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// magic number is 42&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// magic number is 73&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;èµ·åˆçœ‹åˆ°æ—¶ï¼Œè§‰å¾—è¿˜è›®ç¥å¥‡çš„ï¼Œè·Ÿè¿›å»çœ‹äº†ä¸‹ï¼Œå‘ç°æ˜¯é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;subject&lt;/code&gt; æ¥åšçš„ï¼Œå¤§æ„æ˜¯æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt; å­˜åˆ°ä¸€ä¸ªå†…éƒ¨å˜é‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;_value&lt;/code&gt; é‡Œï¼Œå½“è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt; æ–¹æ³•æ—¶ï¼Œå…ˆæ›´æ–° &lt;code class=&quot;highlighter-rouge&quot;&gt;_value&lt;/code&gt; å€¼ï¼Œç„¶åè°ƒç”¨å†…éƒ¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;_subject.on(.next(newValue))&lt;/code&gt; æ–¹æ³•å‘ŠçŸ¥ subscriberã€‚&lt;/p&gt;

&lt;h5 id=&quot;subject&quot;&gt;Subject&lt;/h5&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Subject&lt;/code&gt; ç®€å•æ¥è¯´æ˜¯ä¸€ä¸ªå¯ä»¥ä¸»åŠ¨å‘å°„æ•°æ®çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œå¤šäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;onNext(value)&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;onError(error)&lt;/code&gt;, â€˜onCompletedâ€™ æ–¹æ³•ï¼Œå¯è°“å…¨èƒ½å‹é€‰æ‰‹ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;disposeBag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DisposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;PublishSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ¶&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ±&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ…°ï¸&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ…±ï¸&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è®°å¾—åœ¨ RAC æ—¶ä»£ï¼Œsubject æ˜¯ä¸€ä¸ªä¸å¤ªæ¨èä½¿ç”¨çš„åŠŸèƒ½ï¼Œå› ä¸ºè¿‡äºå¼ºå¤§äº†ï¼Œå®¹æ˜“å¤±æ§ã€‚RxSwift é‡Œå€’æ˜¯æ²¡æœ‰å¤ªæåŠï¼Œä½†è¿˜æ˜¯å°‘ç”¨ä¸ºä½³ã€‚&lt;/p&gt;

&lt;h4 id=&quot;observable---new-observable&quot;&gt;Observable -&amp;gt; New Observable&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; çš„å¼ºå¤§ä¸ä»…åœ¨äºå®ƒèƒ½å®æ—¶æ›´æ–° valueï¼Œè¿˜åœ¨äºå®ƒèƒ½è¢«ä¿®æ”¹ï¼è¿‡æ»¤ï¼ç»„åˆç­‰ï¼Œè¿™æ ·å°±èƒ½éšå¿ƒæ‰€æ¬²åœ°æ„é€ è‡ªå·±æƒ³è¦çš„æ•°æ®ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒæ•°æ®å‘ç”Ÿå˜åŒ–äº†å´ä¸çŸ¥é“çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;h5 id=&quot;combine&quot;&gt;Combine&lt;/h5&gt;
&lt;p&gt;Combine å°±æ˜¯æŠŠå¤šä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; ç»„åˆèµ·æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;zip&lt;/code&gt; (å°æç¤ºï¼šå¦‚æœå¯¹è¿™äº›å‡½æ•°ä¸å¤ªæ•æ„Ÿï¼Œå¯ä»¥&lt;a href=&quot;http://rxmarbles.com/&quot;&gt;å®é™…æ“ä½œä¸‹&lt;/a&gt;ï¼Œä½“ä¼šä¼šæ›´æ·±äº›)&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;zip&lt;/code&gt; å¯¹åº”ç°å®ä¸­çš„ä¾‹å­å°±æ˜¯æ‹‰é“¾ï¼Œæ‹‰é“¾éœ€è¦ä¸¤ä¸ªå…ƒç´ è¿™æ ·æ‰èƒ½æ‹‰ä¸Šå»ï¼Œè¿™é‡Œä¹Ÿä¸€æ ·ï¼Œåªæœ‰å½“ä¸¤ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; éƒ½æœ‰äº†æ–°çš„å€¼æ—¶ï¼Œsubscribe æ‰ä¼šè¢«è§¦å‘ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;stringSubject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;PublishSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;intSubject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;PublishSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringSubject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intSubject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stringElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;intElement&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stringElement&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;intElement&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;stringSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ…°ï¸&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;stringSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ğŸ…±ï¸&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;intSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;intSubject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// output&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ğŸ…°ï¸ 1&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ğŸ…±ï¸ 2&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœè¿™é‡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;intSubject&lt;/code&gt; å§‹ç»ˆæ²¡æœ‰æ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;onNext&lt;/code&gt;ï¼Œé‚£ä¹ˆå°†ä¸ä¼šæœ‰è¾“å‡ºï¼Œå°±åƒæ‹‰é“¾æ‰äº†ä¸€è¾¹çš„é“¾å­å°±æ‹‰ä¸ä¸Šäº†ã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;zip&lt;/code&gt;ï¼Œè¿˜æœ‰å…¶ä»–çš„ combine çš„å§¿åŠ¿ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;combineLatest&lt;/code&gt; / &lt;code class=&quot;highlighter-rouge&quot;&gt;switchLatest&lt;/code&gt; ç­‰ã€‚&lt;/p&gt;

&lt;h5 id=&quot;transform&quot;&gt;Transform&lt;/h5&gt;
&lt;p&gt;è¿™æ˜¯æœ€å¸¸è§çš„æ“ä½œäº†ï¼Œå¯¹ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; çš„æ•°å€¼åšä¸€äº›å°æ”¹åŠ¨ï¼Œç„¶åäº§å‡ºæ–°çš„å€¼ï¼Œä¾æ—§æ˜¯ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;disposeBag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DisposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ˜¯å¤§è‡´çš„å®ç°ï¼ˆæ‘˜è‡ªå®˜ç½‘ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ObservableType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;R&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;subscription&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subscribe&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                        &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;completed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;completed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;subscription&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æ¥å—ä¸€ä¸ª transform é—­åŒ…ï¼Œç„¶åè¿”å›ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œå› ä¸ºæ¥ä¸‹æ¥ä½¿ç”¨è€…å°†ä¼šå¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;myMap&lt;/code&gt; çš„ç»“æœè¿›è¡Œ subscribeï¼Œæ‰€ä»¥éœ€è¦åœ¨ create å†…éƒ¨ subscribe ä¸€ä¸‹ï¼Œä¸ç„¶æœ€å¼€å§‹çš„é‚£ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; å°±æ˜¯ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Cold Observable&lt;/code&gt;ï¼Œä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Cold Observable&lt;/code&gt; æ˜¯ä¸ä¼šäº§ç”Ÿæ–°çš„æ•°æ®çš„ã€‚&lt;/p&gt;

&lt;h5 id=&quot;filter&quot;&gt;Filter&lt;/h5&gt;
&lt;p&gt;Filter çš„ä½œç”¨æ˜¯å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; ä¼ è¿‡æ¥çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ï¼Œåªæœ‰ç¬¦åˆæ¡ä»¶çš„æ‰æœ‰èµ„æ ¼è¢« subscribeã€‚å†™æ³•ä¸Šè·Ÿ map å·®ä¸å¤šï¼Œå°±ä¸èµ˜è¿°äº†ã€‚&lt;/p&gt;

&lt;h5 id=&quot;connect&quot;&gt;Connect&lt;/h5&gt;
&lt;p&gt;è¿™æ˜¯æŒºæœ‰æ„æ€çš„ä¸€å—ï¼Œåœ¨ä¹‹å‰ä»‹ç» &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable.create&lt;/code&gt; æ—¶æœ‰æåˆ°è¿‡ï¼Œä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; è¢«å¤šæ¬¡ subscribe å°±ä¼šè¢«å¤šæ¬¡è§¦å‘ï¼Œå¦‚æœä¸€ä¸ªç½‘ç»œè¯·æ±‚åªæƒ³è¢«è§¦å‘ä¸€æ¬¡ï¼ŒåŒæ—¶æ”¯æŒå¤šä¸ª subscriberï¼Œå°±å¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;publish&lt;/code&gt; + &lt;code class=&quot;highlighter-rouge&quot;&gt;connect&lt;/code&gt; çš„ç»„åˆã€‚&lt;/p&gt;

&lt;p&gt;å½“ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;publish()&lt;/code&gt; æ–¹æ³•åï¼Œæ­£å¸¸çš„ subscribe å°±ä¸ä¼šè§¦å‘å®ƒäº†ï¼Œé™¤é &lt;code class=&quot;highlighter-rouge&quot;&gt;connect()&lt;/code&gt; æ–¹æ³•è¢«è°ƒç”¨ã€‚è€Œä¸”æ¯æ¬¡ subscribe ä¸ä¼šå¯¼è‡´ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; é‡æ–°é’ˆå¯¹ observer å¤„ç†ä¸€éã€‚çœ‹ä¸€ä¸‹è¿™å¼ å›¾&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://reactivex.io/documentation/operators/images/publishConnect.c.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æœ‰ä¸¤å—éœ€è¦æ³¨æ„ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;connect()&lt;/code&gt; ä¹‹å‰çš„ä¸¤æ¬¡ &lt;code class=&quot;highlighter-rouge&quot;&gt;subscribe&lt;/code&gt; å¹¶æ²¡æœ‰äº§ç”Ÿæ–°çš„ valueã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;connect()&lt;/code&gt; ä¹‹å &lt;code class=&quot;highlighter-rouge&quot;&gt;subscribe&lt;/code&gt; çš„ï¼Œåªæ˜¯ç­‰å¾…æ–°çš„ valueï¼ŒåŒæ—¶æ–°çš„ value è¿˜ä¼šåˆ†å‘ç»™ä¹‹å‰çš„ subscriberã€‚&lt;/li&gt;
  &lt;li&gt;å³ä½¿æ‰€æœ‰çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;subscription&lt;/code&gt; è¢« &lt;code class=&quot;highlighter-rouge&quot;&gt;dispose&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; ä¾æ—§å¤„äº &lt;code class=&quot;highlighter-rouge&quot;&gt;hot&lt;/code&gt; çŠ¶æ€ï¼Œå°±å¥½åƒè¿˜ä»¥ä¸ºæœ‰äººå…³å¿ƒæ–°çš„å€¼ä¸€æ ·ã€‚ï¼ˆè¿™å¯èƒ½ä¸æ˜¯æƒ³è¦çš„ç»“æœï¼‰&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;é’ˆå¯¹ç¬¬ 3 ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;refcount()&lt;/code&gt; æ¥ä»£æ›¿ &lt;code class=&quot;highlighter-rouge&quot;&gt;connect()&lt;/code&gt;ï¼Œå‰è€…ä¼šåœ¨æ²¡æœ‰ subscriber æ—¶è‡ªåŠ¨ã€Œå†·ã€ä¸‹æ¥ï¼Œä¸ä¼šå†äº§ç”Ÿæ–°çš„å€¼ã€‚ï¼ˆDemo å–è‡ª&lt;a href=&quot;http://www.tailec.com/blog/understanding-publish-connect-refcount-share&quot;&gt;è¿™é‡Œ&lt;/a&gt;ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;myObservable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;scheduler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;MainScheduler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;refCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 1)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;mySubscription&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myObservable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Next: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Disposing at 3 seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;mySubscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dispose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nf&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Subscribing again at 6 seconds&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;myObservable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Next: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡º&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;Starting at 0 seconds
Next: 0
Next: 1
Next: 2
Disposing at 3 seconds
Subscribing again at 6 seconds
Next: 0
Next: 1
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼Œ3 ç§’å subscription disposeï¼Œæ­¤æ—¶æ²¡æœ‰ä»»ä½• subscriber è¿˜å…³å¿ƒ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt;ï¼Œå› æ­¤å°±é‡ç½®äº†ï¼Œæ‰€ä»¥ 6 ç§’ååˆå›åˆ°äº†åˆå§‹çŠ¶æ€ï¼ˆå¦‚æœå˜æˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;connect&lt;/code&gt; æ–¹æ³•çš„è¯ï¼Œä¼šå‘ç° 6 ç§’åä¼šè¾“å‡º &lt;code class=&quot;highlighter-rouge&quot;&gt;Next: 6 / Next: 7&lt;/code&gt;ï¼‰&lt;/p&gt;

&lt;p&gt;é‚£å¦‚æœååŠ å…¥çš„ subscriber æƒ³è¦ä¹‹å‰çš„æ•°æ®æ€ä¹ˆåŠï¼Ÿå¯ä»¥å¯¹åŸå§‹çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; è®¾ç½® &lt;code class=&quot;highlighter-rouge&quot;&gt;replay(n)&lt;/code&gt;ï¼Œè¡¨ç¤ºæœ€å¤šè¿”å› n ä¸ªå…ƒç´ ç»™ååŠ å…¥çš„ subscriberã€‚&lt;/p&gt;

&lt;h3 id=&quot;tips&quot;&gt;Tips&lt;/h3&gt;
&lt;p&gt;ä¸Šé¢ä»‹ç»çš„æ˜¯æœ€åŸºæœ¬çš„æ¦‚å¿µã€‚é¡ºä¾¿æä¸€ä¸‹æ¯”è¾ƒå¸¸è§çš„å‡ ä¸ªé—®é¢˜ï¼š&lt;/p&gt;

&lt;h4 id=&quot;å¦‚ä½•å¤„ç†-scheduler&quot;&gt;å¦‚ä½•å¤„ç† Schedulerï¼Ÿ&lt;/h4&gt;

&lt;p&gt;é»˜è®¤ä»£ç éƒ½æ˜¯åœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå¦‚æœè¦æ‰‹åŠ¨åˆ‡æ¢çº¿ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;subsribeOn&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;observeOn&lt;/code&gt; ä¸¤ç§æ–¹å¼ï¼Œä¸€èˆ¬æ¥è¯´åè€…ç”¨å¾—ä¼šå¤šä¸€äº›ï¼Œé‚£è¿™ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;subscribeOn&lt;/code&gt; è·Ÿä½ç½®æ— å…³ï¼Œä¹Ÿå°±æ˜¯æ— è®ºåœ¨é“¾å¼è°ƒç”¨çš„ä»€ä¹ˆåœ°æ–¹ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;subscription&lt;/code&gt; éƒ½ä¼šå—å½±å“ï¼›è€Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;observeOn&lt;/code&gt; åˆ™ä»…å¯¹ä¹‹åçš„è°ƒç”¨äº§ç”Ÿå½±å“ï¼Œçœ‹ä¸ª Demoï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;observable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Observable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyObserver&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Disposable&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;observable thread: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onCompleted&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Disposables&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;disposeBag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;DisposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;observable&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;map1 thread: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observeOn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;ConcurrentDispatchQueueScheduler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;qos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userInteractive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;map2 thread: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;onNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;subscribe thread: &lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDisposableTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;disposeBag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœ 1) æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;observeOn&lt;/code&gt;ï¼Œé‚£ä¹ˆè¾“å‡ºå¦‚ä¸‹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;observable thread: &amp;lt;NSThread: 0x7f901cc0d510&amp;gt;{number = 1, name = main}
map1 thread: &amp;lt;NSThread: 0x7f901cc0d510&amp;gt;{number = 1, name = main}
map2 thread: &amp;lt;NSThread: 0x7f901ce15560&amp;gt;{number = 3, name = (null)}
subscribe thread: &amp;lt;NSThread: 0x7f901ce15560&amp;gt;{number = 3, name = (null)}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ° observable thread å’Œ map1 thread ä¾æ—§ä¿æŒå½“å‰çº¿ç¨‹ï¼Œä½† &lt;code class=&quot;highlighter-rouge&quot;&gt;observeOn&lt;/code&gt; ä¹‹åå°±å˜æˆäº†å¦ä¸€ä¸ªçº¿ç¨‹ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœ 1) æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;subscribeOn&lt;/code&gt;ï¼Œé‚£ä¹ˆä¼šè¾“å‡º&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;observable thread: &amp;lt;NSThread: 0x7fbdf1e097a0&amp;gt;{number = 3, name = (null)}
map1 thread: &amp;lt;NSThread: 0x7fbdf1e097a0&amp;gt;{number = 3, name = (null)}
map2 thread: &amp;lt;NSThread: 0x7fbdf1e097a0&amp;gt;{number = 3, name = (null)}
subscribe thread: &amp;lt;NSThread: 0x7fbdf1e097a0&amp;gt;{number = 3, name = (null)}
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°å…¨éƒ½å˜æˆäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;subscribeOn&lt;/code&gt; æŒ‡å®šçš„ Queueã€‚æ‰€ä»¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;subscribeOn&lt;/code&gt; çš„æ„ŸæŸ“åŠ›å¾ˆå¼ºï¼Œè¿ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; éƒ½èƒ½å½±å“åˆ°ã€‚&lt;/p&gt;

&lt;h4 id=&quot;cold-observable-å’Œ-hot-observable&quot;&gt;Cold Observable å’Œ Hot Observable&lt;/h4&gt;

&lt;p&gt;Cold ç›¸å½“äº InActiveï¼Œå°±åƒè¥¿éƒ¨ä¸–ç•Œé‡Œï¼Œæœªè¢«æ¿€æ´»çš„æœºå™¨äººä¸€æ ·ï¼›Hot å°±æ˜¯å¤„äºå·¥ä½œçŠ¶æ€çš„æœºå™¨äººã€‚&lt;/p&gt;

&lt;h4 id=&quot;subscription-ä¸ºä»€ä¹ˆè¦-dispose&quot;&gt;Subscription ä¸ºä»€ä¹ˆè¦ Disposeï¼Ÿ&lt;/h4&gt;

&lt;p&gt;å› ä¸ºæœ‰äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;Subscriber&lt;/code&gt; æ‰€ä»¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; è¢«æ¿€æ´»ï¼Œç„¶åå†…éƒ¨å°±ä¼šä½¿ç”¨å„ç§å˜é‡æ¥ä¿å­˜èµ„æºï¼Œå¦‚æœä¸ &lt;code class=&quot;highlighter-rouge&quot;&gt;dispose&lt;/code&gt; çš„è¯ï¼Œè¿™äº›èµ„æºå°±ä¼šä¸€ç›´è¢« keepï¼Œå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ—¶æ‰‹åŠ¨ dispose åˆå«Œéº»çƒ¦ï¼Œæ‰€ä»¥å°±æœ‰äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;DisposeBag&lt;/code&gt;ï¼Œå½“è¿™ä¸ª Bag è¢«å›æ”¶æ—¶ï¼ŒBag é‡Œé¢çš„ subscription ä¼šè‡ªåŠ¨è¢« disposeï¼Œç›¸å½“äºä» MRC å˜æˆäº† ARCã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;RxSwift å¦‚æœæ¦‚å¿µä¸Šæ•´ç†æ¸…æ¥šäº†ï¼Œä¼šå‘ç°å…¶å®å¹¶ä¸éš¾ï¼Œå¤šä» &lt;code class=&quot;highlighter-rouge&quot;&gt;Observable&lt;/code&gt; çš„è§’åº¦å»æ€è€ƒé—®é¢˜ï¼Œå¤šæƒ³ç€è½¬æ¢å’Œç»„åˆï¼Œæ…¢æ…¢å°±ä¼šä»å‘½ä»¤å¼ç¼–ç¨‹è½¬åˆ°å£°æ˜å¼ç¼–ç¨‹ï¼Œå¯¹äºæŠ½è±¡èƒ½åŠ›å’Œä»£ç çš„å¯è¯»æ€§éƒ½ä¼šæœ‰æå‡ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ã€Œæ— ä¾µå…¥é¡µé¢åŠ è½½å®Œæˆæ£€æµ‹ã€çš„ä¸€äº›æ€è·¯</title>
   <link href="http://limboy.me/tech/2016/12/08/page-open-detect.html"/>
   <updated>2016-12-08T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/12/08/page-open-detect</id>
   <content type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;

&lt;p&gt;åœ¨è¯¸å¤šçš„æ€§èƒ½æŒ‡æ ‡é‡Œï¼Œã€Œé¡µé¢åŠ è½½å®Œæˆè€—æ—¶ã€æ˜¯éå¸¸é‡è¦çš„ä¸€é¡¹ï¼Œå°¤å…¶æ˜¯é‡ç‚¹é¡µé¢ï¼Œå¦‚è¯¦æƒ…é¡µï¼Œ1 ç§’å†…æ‰“å¼€å’Œ 3 ç§’å†…æ‰“å¼€å·®åˆ«æ˜¯å¾ˆå¤§çš„ï¼Œç›´æ¥å½±å“ GMVã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥è¯´ä¸€ä¸‹ã€Œé¡µé¢åŠ è½½å®Œæˆã€çš„å®šä¹‰ï¼Œä¸æ˜¯é¡µé¢ layout å®Œæˆï¼Œä¸æ˜¯è¯·æ±‚å®Œæˆï¼Œè€Œæ˜¯å›¾ç‰‡å’Œæ–‡å­—éƒ½å·²è¢«æ¸²æŸ“å®Œæˆã€‚æ¯”è¾ƒå¸¸è§çš„åšæ³•æ˜¯åœ¨é¡µé¢çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;ViewDidAppear&lt;/code&gt; å’Œè¯·æ±‚å®Œæˆä¸”æ•°æ®è¢«è½¬æ¢æˆ Model ä¹‹ååˆ†åˆ«æ‰“ç‚¹ï¼Œå‰è€…è¡¨ç¤ºé¡µé¢å‡ºç°çš„æ—¶é—´ï¼Œåè€…è¡¨ç¤ºæ•°æ®è·å–çš„æ—¶é—´ï¼ŒåŸºæœ¬å¯ä»¥ä½“ç°å‡ºé¡µé¢åŠ è½½æ—¶é—´ã€‚ä½†ä¹Ÿæœ‰ä¸€äº›é—®é¢˜æ¯”å¦‚ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;ä¸šåŠ¡ç»å¸¸è°ƒæ•´ï¼Œæ‰€ä»¥åŸ‹ç‚¹ä¹Ÿéœ€è¦è°ƒæ•´ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¾ˆå®¹æ˜“å‡ºç°é”™åŸ‹ã€æ¼åŸ‹çš„é—®é¢˜ã€‚&lt;/li&gt;
  &lt;li&gt;æœ‰äº›é¡µé¢ä¼šæœ‰å¤šä¸ªè¯·æ±‚ï¼Œåªæœ‰è¿™äº›è¯·æ±‚å…¨éƒ¨å®Œæˆåï¼Œé¡µé¢æ‰èƒ½æ¸²æŸ“ï¼Œè¿™æ—¶æ•°æ®è¯·æ±‚åŸ‹ç‚¹å°±ä¼šæœ‰ç‚¹éº»çƒ¦ã€‚&lt;/li&gt;
  &lt;li&gt;è¿™å‡ ä¸ªæ—¶é—´ç‚¹è·Ÿç”¨æˆ·çœŸæ­£çœ‹åˆ°çš„æ—¶é—´è¿˜æ˜¯ä¼šæœ‰å·®åˆ«ï¼Œä¸å¤Ÿå‡†ç¡®ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥ä¸€ç§æ— ä¾µå…¥çš„æ£€æµ‹æœºåˆ¶å°±å¾ˆé‡è¦äº†ã€‚æ­£å¥½åœ¨&lt;a href=&quot;https://gold.xitu.io&quot;&gt;æ˜é‡‘&lt;/a&gt;ä¸Šçœ‹åˆ°äº†&lt;a href=&quot;https://gold.xitu.io/post/58440e98128fe1006c4c951d&quot;&gt;ç”¨å›¾åƒè¯†åˆ«æ¥è‡ªåŠ¨ç¡®è®¤ç½‘é¡µåŠ è½½æˆåŠŸ&lt;/a&gt;ï¼Œå—æ­¤å¯å‘ï¼Œè§‰å¾—æ­¤è·¯æœ‰æˆã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®ç°æ–¹æ¡ˆ&quot;&gt;å®ç°æ–¹æ¡ˆ&lt;/h3&gt;
&lt;p&gt;å½“ pushï¼present ä¸€ä¸ªé¡µé¢æ—¶ï¼Œéš”ä¸€æ®µæ—¶é—´å»æˆªå±å¹¶åˆ†æå½“å‰é¡µé¢çš„ç©ºç™½ï¼ˆçº¯è‰²ï¼‰éƒ¨åˆ†å æ¯”ï¼Œå¦‚æœè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œå°±è®¤ä¸ºé¡µé¢æœªåŠ è½½å®Œæˆã€‚è¿™é‡Œä¼šæœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;éœ€è¦ä¸»åŠ¨å»æˆªå±æ£€æµ‹ï¼Œè€Œä¸èƒ½åŠ è½½å®Œæˆåå‘ŠçŸ¥ã€‚è¿™å…¶ä¸­çš„å·®åˆ«åœ¨äºæ— æ³•å¾—çŸ¥å…·ä½“å“ªä¸ªæ—¶é—´åŠ è½½å®Œæˆäº†ã€‚&lt;/li&gt;
  &lt;li&gt;æœ‰äº›é¡µé¢è¢«æ•…æ„è®¾è®¡æˆæœ‰è¾ƒå¤šç•™ç™½ï¼Œè¿™æ—¶å°±ä¸å®¹æ˜“åˆ¤æ–­äº†ã€‚&lt;/li&gt;
  &lt;li&gt;ã€ŒæœªåŠ è½½å®Œæˆã€ä¸åŒçš„é¡µé¢ä¼šæœ‰ä¸åŒçš„è¡¨ç°ã€‚&lt;/li&gt;
  &lt;li&gt;å½“ç”¨æˆ·æ»‘åŠ¨æ—¶ï¼Œæœ‰å¯èƒ½ä¹‹å‰çš„é¡µé¢å·²ç»åŠ è½½äº†&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;çº¯è‰²å æ¯”&quot;&gt;çº¯è‰²å æ¯”&lt;/h3&gt;
&lt;p&gt;æœ€ç®€å•çš„æ–¹æ¡ˆå°±æ˜¯æŠŠå›¾ç‰‡ä¸Šçš„æ¯ä¸ªåƒç´ ç‚¹éƒ½å–å‡ºæ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªå­—å…¸é‡Œï¼Œä¹‹åå¦‚æœæœ‰ç›¸åŒè‰²å€¼çš„åƒç´ ï¼Œé‚£ä¹ˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;count++&lt;/code&gt;ã€‚é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä¸€ä¸ªå±å¹•å‡ åä¸‡ä¸ªç‚¹ï¼Œè¿™ä¸€è½®éƒ½è¿˜æ²¡åˆ†æå®Œï¼Œç”¨æˆ·å·²ç»æ‰“å¼€ç¬¬äºŒä¸ªé¡µé¢äº†ã€‚&lt;/p&gt;

&lt;p&gt;å†å›åˆ°æƒ³è¦è¾¾åˆ°çš„ç›®æ ‡ï¼šçº¯è‰²éƒ¨åˆ†å æ¯”ã€‚é‚£ä¹ˆå°†å›¾ç‰‡å‹ç¼©åˆ°æ›´å°çš„ size ä¸å°±è¡Œäº†ä¹ˆã€‚è€å¥—è·¯ï¼Œé“ºå¼ ç”»å¸ƒï¼ŒæŠŠå›¾ç‰‡æµ‡ä¸Šå»ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;imageWithImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;scaledToSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;newSize&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;drawInRect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGRectMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newImage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯çœŸæ­£çš„è®¡ç®—äº†ï¼Œè¿‡ç¨‹ä¹Ÿæ¯”è¾ƒç®€å•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// æŠŠ UIImage è½¬æ¢æˆ CGImage Data
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGDataProviderRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGImageGetDataProvider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;CFDataRef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixelData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGDataProviderCopyData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UInt8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFDataGetBytePtr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataLength&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CFDataGetLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixelData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numberOfColorComponents&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// R,G,B, and A
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// ç”¨æ¥è£… color ï¼Œkey ä¸º R-G-B å­—ç¬¦ä¸²ï¼Œvalue ä¸ºå‡ºç°æ¬¡æ•°
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableDictionary&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;colorCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataLength&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;numberOfColorComponents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;colorCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;UInt8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;red&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;UInt8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;UInt8&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		
		&lt;span class=&quot;c1&quot;&gt;// ä»¥ R-G-B ä¸º key
&lt;/span&gt;		&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stringWithFormat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;%d-%d-%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;red&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;green&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;blue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;integerValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// æŒ‰å‡ºç°æ¬¡æ•°æ’åº
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sortedColorCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allValues&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sortedArrayUsingComparator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSComparisonResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;_Nonnull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;_Nonnull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;intValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj2&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;intValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSOrderedDescending&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSOrderedAscending&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;percent&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSMutableArray&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// è®¡ç®—å æ¯”ï¼Œå¹¶ä»é«˜åˆ°ä½æ’åºï¼Œå–å‰ 10 ä¸ª
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sortedColorCount&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;enumerateObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Nonnull&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;percent&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;intValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;colorCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;percent&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å…ˆæŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;UIImage&lt;/code&gt; è½¬æ¢æˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;CFDataRef&lt;/code&gt;ï¼Œå†éå†è·å– &lt;code class=&quot;highlighter-rouge&quot;&gt;Color&lt;/code&gt;ï¼Œå¯¹ç›¸åŒçš„çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Color&lt;/code&gt; è¿›è¡Œç´¯åŠ ï¼Œæœ€åæ’ä¸€ä¸‹åºå³å¯ã€‚&lt;/p&gt;

&lt;p&gt;è¿”å›çš„æ•°æ®ç±»ä¼¼è¿™æ ·ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4586517&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;06202247&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;mo&quot;&gt;02&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;921348&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·å°±èƒ½æ‹¿åˆ°äº†é¢œè‰²çš„å æ¯”ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®æˆ˜&quot;&gt;å®æˆ˜&lt;/h3&gt;

&lt;p&gt;å‡è®¾è®¾å®šçº¯è‰²åŒºåŸŸè¶…è¿‡ 30% è®¤ä¸ºæ²¡æœ‰å®Œå…¨åŠ è½½ï¼Œæ¥æ‰¾å‡ ä¸ª Demo æµ‹è¯•ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://s16.mogucdn.com/p1/161208/idid_ifqtcztfhbqwendcmmzdambqgyyde_600x1036.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç»“æœç¬¦åˆã€ŒæœªåŠ è½½å®Œæ¯•ã€å®šä¹‰&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.4139326&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.06808989&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.05438202&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å†æ¢ä¸€ä¸ª&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://s16.mogucdn.com/p1/161208/idid_ifrgizrwme2wgndcmmzdambqmeyde_600x1036.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è™½ç„¶æ²¡æœ‰åŠ è½½å®Œï¼Œä½†ç»“æœå°‘äº 30%&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.2788764&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.06808989&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.04853933&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœæŠŠå€¼è®¾å¾—å°ä¸€äº›ï¼Œé‚£ä¹ˆæœ‰å¯èƒ½ã€Œè¯¯æ€ã€ï¼Œæ¯”å¦‚è¿™ä¸ªç•Œé¢&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://s17.mogucdn.com/p1/161208/idid_ifrdimlemfrggndcmmzdambqmeyde_600x1067.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç»“æœ&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.4530337&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.06561798&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.02921348&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªç•Œé¢å·²ç»åŠ è½½å®Œæˆäº†ï¼Œä½†ç”±äºç©ºç™½é¢ç§¯è¾ƒå¤šï¼Œå› æ­¤çº¯è‰²çš„å æ¯”ä¹Ÿè¾ƒå¤šï¼Œå¦‚æœæŒ‰ç…§ä¹‹å‰çš„å…¬å¼å°±ä¼šè¯¯ä¼¤ï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹‹åå†è®¨è®ºã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹å¦ä¸€ä¸ªæœªåŠ è½½å®Œæ¯•çš„é¡µé¢ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://s16.mogucdn.com/p1/161208/idid_ie4tszldguytanlcmmzdambqgqyde_750x1278.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªé¡µé¢çš„ç»“æœæ˜¯è¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.3433708&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.1941573&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.1822472&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä¸­é—´éƒ¨åˆ†åŠ è½½å‡ºæ¥ï¼ˆä¹Ÿå°±æ˜¯é¢ç§¯æœ€å¤§çš„é‚£ä¸€å—ï¼‰ï¼Œé‚£ä¹ˆå°±å˜æˆäº†&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;    &lt;span class=&quot;s&quot;&gt;&quot;0.1941573&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;0.1822472&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ä¹Ÿå±äºé¡µé¢æœªåŠ è½½å®Œæˆï¼Œä½†åˆæ˜¯ä¸€ä¸ªæ–°çš„è§„åˆ™äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;å†æ¥å›é¡¾ä¸€ä¸‹ã€Œæˆªå›¾åˆ†æçº¯è‰²å æ¯”ã€å¸¦æ¥çš„é—®é¢˜ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;éš” N ç§’å»æˆªå›¾æ—¶ï¼Œç”¨æˆ·å¯èƒ½æ»‘åˆ°ç¬¬ 2 å±äº†ï¼Œè¿™æ—¶ç¬¬ 1 å±åŠ è½½å®Œäº†ï¼Œä½† 2 å±è¿˜æ²¡æœ‰åŠ è½½å®Œï¼Œä¸åº”è¯¥å±äºã€Œé¡µé¢åŠ è½½æœªå®Œæˆã€èŒƒç•´ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸åŒé¡µé¢çš„çº¯è‰²ç‰¹æ€§ä¸ä¸€æ ·ï¼Œæœ‰çš„æ¯”è¾ƒåˆ†æ•£ï¼Œæœ‰çš„æ­£å¸¸çŠ¶æ€ä¸‹ä¹Ÿä¼šæœ‰æ¯”è¾ƒå¤šçš„çº¯è‰²ï¼Œè¿™æ ·å°±å®¹æ˜“è¯¯åˆ¤ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¯¹äºåœºæ™¯ 1 è¿˜æ²¡æœ‰æƒ³åˆ°ç‰¹åˆ«å¥½çš„å¤„ç†æ–¹å¼ï¼Œä¸€ç§åŠæ³•æ˜¯é€šè¿‡åˆ¤æ–­ runloop çš„ mode æ˜¯å¦ç­‰äº &lt;code class=&quot;highlighter-rouge&quot;&gt;UITrackingRunLoopMode&lt;/code&gt; æ¥åˆ¤æ–­æ˜¯å¦æœ‰æ»‘åŠ¨ï¼Œä¸å¤ªä¼˜é›…ï¼Œä½†å¯èƒ½è¡Œå¾—é€šã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºåœºæ™¯ 2 å¯ä»¥æŠŠæ•°æ®å‘é€åˆ°æœåŠ¡ç«¯ï¼Œè®©æœåŠ¡ç«¯å»è®¡ç®—æŸä¸ªé¡µé¢çš„çº¯è‰²åˆ†å¸ƒæƒ…å†µï¼Œæ¯”å¦‚å¤§éƒ¨åˆ†éƒ½æ˜¯ &amp;lt; 10%ï¼Œæœ‰å°‘éƒ¨åˆ†åœ¨ 20% ä»¥ä¸Šï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ¤å®šä¸ºæœªåŠ è½½å®Œæˆï¼Œä¸è¿‡æˆæœ¬è¿˜æ˜¯æœ‰ç‚¹é«˜ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆè™½ç„¶å¯ä»¥åšåˆ°æ— ä¾µå…¥ï¼Œä½†åœ¨ç»“æœåˆ¤å®šä¸Šè¿˜æ˜¯å­˜åœ¨äº›ç¼ºé™·ï¼ŒæœŸå¾…æœ‰æ›´æˆç†Ÿçš„æ–¹æ¡ˆã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ReSwift ä»‹ç»</title>
   <link href="http://limboy.me/tech/2016/12/04/reswift-analyze.html"/>
   <updated>2016-12-04T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/12/04/reswift-analyze</id>
   <content type="html">&lt;h3 id=&quot;ä»€ä¹ˆæ˜¯-reswift&quot;&gt;ä»€ä¹ˆæ˜¯ ReSwift&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ReSwift/ReSwift&quot;&gt;ReSwift&lt;/a&gt; æ˜¯åŸºäº &lt;a href=&quot;http://redux.js.org/&quot;&gt;Redux&lt;/a&gt; æ€æƒ³å®ç°çš„ Swift ç±»åº“ã€‚åŸºæœ¬çš„æµç¨‹å¦‚ä¸‹&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14808452245719.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å½“ç”¨æˆ·ç‚¹å‡»äº†è§†å›¾ä¸Šçš„æŸä¸ªå…ƒç´ æ—¶ï¼Œä¼šå‘å‡ºä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼Œè¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; åŒ…å«äº†ä¸¤ä¸ªåŸºæœ¬å…ƒç´ ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Action Type&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Action Payload&lt;/code&gt;ï¼Œæ¯”å¦‚ã€Œç‚¹å‡»æ”¶è—æŒ‰é’®ã€è¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼Œå¯èƒ½ä¼šè¢«æè¿°ä¸ºï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;Action(&quot;CollectButtonTapped&quot;, [&quot;itemID&quot;: 189])&lt;/code&gt;ã€‚ç„¶åè¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; å°±ä¼šåˆ°è¾¾ &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt;ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; ä¹Ÿå¾ˆç®€å•ï¼Œåªåšä¸¤ä»¶äº‹ï¼š1. æ¥æ”¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼›2. å°† &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; å‘é€ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;Reducer&lt;/code&gt;ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;Reducer&lt;/code&gt; åšçš„äº‹æƒ…å°±æ›´ç®€å•äº†ï¼Œæ¥æ”¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; å‘å‡ºçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt;ï¼Œå†…éƒ¨è¿ç®—ä¹‹åï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt;ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; æ‹¿åˆ°äº†æ–°çš„  &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; åï¼Œå†æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; å‘é€ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt;ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt; æ¸²æŸ“æ–°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ç®€å•æè¿°ä¸‹å„ä¸ªæ¨¡å—çš„èŒè´£ï¼š&lt;/p&gt;

&lt;h4 id=&quot;view&quot;&gt;View&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt; å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªã€Œå£³ã€ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½ç”± &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; æä¾›ï¼Œè¿™æ ·å°±æŠŠè¡¨ç°å±‚å’Œæ•°æ®å±‚åˆ†å¼€äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;view = f(state)
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;action&quot;&gt;Action&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; ç”¨æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Œæ¯”å¦‚ä¸å°å¿ƒç”¨è„šè¸¢åˆ°äº†æ¤…å­ï¼Œç¥ç»ç³»ç»Ÿå°±ä¼šæŠŠè¿™ä¸ªä¿¡æ¯ä¼ é€’ç»™å¤§è„‘ï¼Œè¿™ä¸ªä¿¡æ¯å°±æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼Œè€Œå¤§è„‘å°±æ˜¯ä¹‹åè¦è®²åˆ°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&quot;store&quot;&gt;Store&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯æ ¸å¿ƒæ¨¡å—ï¼Œå°±åƒå¤§è„‘ä¼šä¸åœåœ°æ¥å—åˆ°å„ç§ &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt;ï¼Œå¹¶ä½œå‡ºååº”ï¼Œåªä¸è¿‡åœ¨è¿™é‡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; å¹¶ä¸å…·å¤‡ã€Œåšå†³å®šã€çš„èƒ½åŠ›ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Action&lt;/code&gt; äº¤ç»™äº†æ‰€æœ‰å¯èƒ½å…³å¿ƒå®ƒçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;Reducers&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;ReSwift æ¨èä¸€ä¸ª App åªæœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt;ï¼Œåœ¨å®é™…æƒ…å†µä¸­ï¼Œå¦‚æœè¿™ä¹ˆåšçš„è¯ï¼Œä¼šå¸¦æ¥ä¸å°‘çš„å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ‰€æœ‰çš„æ¨¡å—éƒ½éœ€è¦ä¾èµ– &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt;ï¼Œè¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; ä¼šå¾ˆåºå¤§ï¼Œä¸å¯é¿å…çš„ä¼šå½±å“æ€§èƒ½ã€‚æ‰€ä»¥ï¼Œå•ä¸ªé¡µé¢æˆ–æ¨¡å—æœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; ä¼šæ¯”è¾ƒåˆé€‚ã€‚&lt;/p&gt;

&lt;h4 id=&quot;state&quot;&gt;State&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; æ˜¯ä¸€ä¸ªéšå½¢çš„æ€æ‰‹ï¼Œå› ä¸ºä½¿ç”¨å®ƒæå…¶æ–¹ä¾¿ï¼Œè€Œå®ƒçš„å±å®³ä¹Ÿä¸ä¼šç¬é—´çˆ†å‘ï¼Œå°±åƒæ¸©æ°´ç…®é’è›™ä¸€æ ·ï¼Œç­‰å‘ç°é—®é¢˜è¶Šæ¥è¶Šå¤šã€è¢«å„ç§å¤šçº¿ç¨‹é—®é¢˜å›°æ‰°æ—¶ï¼Œå°±ä¼šæ„Ÿå—åˆ°å®ƒçš„å¨åŠ›äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; å•ç‹¬æ‹å‡ºæ¥ï¼Œå¹¶ä¸”ä½¿ç”¨ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2015/414/&quot;&gt;Value Types&lt;/a&gt; æ¥è§£å†³å„ç§å¤šçº¿ç¨‹æˆ–å˜é‡è¢«ä¿®æ”¹å¯¼è‡´çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;WWDC çš„ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2016/419/&quot;&gt;Protocol and Value Oriented Programming in UIKit Apps&lt;/a&gt; ä¸­ä¹Ÿæ¨èä½¿ç”¨ Value Compositionï¼Œè€Œä¸æ˜¯ç»§æ‰¿ï¼ŒåŒæ—¶æŠŠ State é›†ä¸­åˆ°ä¸€ä¸ªåœ°æ–¹å¤„ç†ï¼Œä¹Ÿæœ‰åŠ©äº Local Reasoningã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-reswift&quot;&gt;ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ ReSwift&lt;/h3&gt;
&lt;p&gt;ç¡®åˆ‡è¯´æ¥æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ã€Œå•å‘æ•°æ®æµã€çš„æ¶æ„æ¨¡å¼ï¼Œä¸»è¦æœ‰è¿™ä¹ˆå‡ ä¸ªå¥½å¤„ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ•°æ®å•å‘æµåŠ¨å®¹æ˜“è®©ç»“æ„å˜å¾—æ¸…æ™°ï¼Œå‡ºé—®é¢˜æ—¶ä¹Ÿæ›´å®¹æ˜“æ’æŸ¥ã€‚&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨äº† ã€ŒValue Typesã€ä½œä¸ºæµåŠ¨çš„æ•°æ®ï¼Œé¿å…å„ç§è¯¡å¼‚çš„ã€Œä¸å°å¿ƒè¢«ç¯¡æ”¹ã€æˆ–å¤šçº¿ç¨‹ bugã€‚&lt;/li&gt;
  &lt;li&gt;åœ¨ç»Ÿä¸€çš„å…¥å£å¤„ç†æ•°æ®ï¼ˆStateï¼‰ï¼Œæ¯”èµ·æ•£è½åœ¨å„å¤„æ›´åŠ å®¹æ˜“æ§åˆ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/ReSwift/ReSwift&quot;&gt;Readme&lt;/a&gt; é‡Œå¸¦äº†ä¸€ä¸ªç®€å•çš„ Demoï¼Œå¯ä»¥æ„Ÿå—ä¸‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æºç ä¸€ç¥&quot;&gt;æºç ä¸€ç¥&lt;/h3&gt;
&lt;p&gt;ReSwift (3.0.0) çš„æºç å¾ˆç²¾ç®€ï¼Œå¯¹ Swift ç†Ÿæ‚‰çš„è¯ï¼Œå¾ˆå¿«å°±èƒ½çœ‹å®Œã€‚è¯´ä¸‹æˆ‘è‡ªå·±åœ¨çœ‹æºç çš„è¿‡ç¨‹ä¸­å­¦åˆ°çš„ä¸€äº› tips å§ã€‚&lt;/p&gt;

&lt;h4 id=&quot;reduce-çš„ä½¿ç”¨&quot;&gt;Reduce çš„ä½¿ç”¨&lt;/h4&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt; åœ¨å‡½æ•°å¼ç¼–ç¨‹çš„é¢†åŸŸé‡Œä¼šç»å¸¸è¢«ç”¨åˆ°ï¼Œç”šè‡³å¯ä»¥å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt; / &lt;code class=&quot;highlighter-rouge&quot;&gt;filter&lt;/code&gt; ç­‰åŠŸèƒ½ï¼Œè¶³è§å…¶å¼ºå¤§ã€‚å®ƒçš„è¿è¡Œè§„åˆ™æ˜¯ä»¥å‡½æ•°çš„å¤„ç†ç»“æœä½œä¸ºåˆå§‹å€¼ï¼Œå†ç»“åˆæ•°ç»„ä¸­çš„å…ƒç´ è¿”å›å¤„ç†ç»“æœï¼Œä¸æ–­å¾ªç¯ï¼Œç›´åˆ°æ•°ç»„ä¸­çš„å…ƒç´ å…¨éƒ¨å¤„ç†å®Œæˆã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14808586998591.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ Swift ä¸­ï¼Œå®ƒæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;Sequence&lt;/code&gt; åè®®æ‰©å±•çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç­¾åå¦‚ä¸‹&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;initialResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;nextPartialResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;rethrows&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Result&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ ReSwift ä¸­æœ‰å¥½å‡ ä¸ªåœ°æ–¹éƒ½ç”¨åˆ°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;reduce&lt;/code&gt;ï¼Œæ¯”å¦‚é€šè¿‡å®ƒæ¥è¾¾åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;combineReducer&lt;/code&gt; çš„æ•ˆæœ&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;CombinedReducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyReducer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	  &lt;span class=&quot;c1&quot;&gt;// self.reducers åŒ…å«äº† AnyReducer çš„å®ä¾‹&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reducers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currentState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;_handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currentState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æŒ‰ç…§å…¥é˜Ÿåˆ—çš„å…ˆåï¼Œreducer è¢«ä¾æ¬¡æ‰§è¡Œï¼Œå¹¶ä¸”æŠŠç”Ÿæˆçš„æ–°çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;State&lt;/code&gt; ä½œä¸ºä¸‹ä¸€ä¸ªå¾ªç¯çš„åˆå§‹å€¼ä¼ é€’ç»™ä¸‹ä¸€ä¸ª reducerã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å¤„ç† &lt;code class=&quot;highlighter-rouge&quot;&gt;middleware&lt;/code&gt; æ—¶ï¼Œä¹Ÿæœ‰ç”¨åˆ°ç±»ä¼¼çš„æŠ€æœ¯ï¼Œä¸è¿‡é‚£ä¸ªæ›´åŠ å¤æ‚äº›ï¼Œæ¶‰åŠåˆ°&lt;a href=&quot;https://zh.wikipedia.org/zh-hans/%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0&quot;&gt;é«˜é˜¶å‡½æ•°&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h4 id=&quot;è£…é¥°å™¨æ¨¡å¼&quot;&gt;è£…é¥°å™¨æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;è£…é¥°å™¨æ¨¡å¼ç®€å•æ¥è¯´å°±æ˜¯åœ¨ä¸æ”¹å˜ç±»ï¼æ–¹æ³•åŸæœ‰åŠŸèƒ½çš„å‰æä¸‹ï¼Œæä¾›äº†ä¸€äº›é¢å¤–çš„èƒ½åŠ›ã€‚æ¯”è¾ƒå¸¸è§çš„æœ‰ validatorï¼Œå®¢æˆ·ç«¯æäº¤çš„æ•°æ®è¦å…¥åº“å‰éœ€è¦åšä¸€ä¸‹æ ¡éªŒï¼Œä¸é€šè¿‡çš„è¯ç›´æ¥è¿”å›ã€‚åœ¨ python é‡Œè£…é¥°å™¨éå¸¸å¸¸è§ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªæ–¹æ³•ä¸ŠåŠ ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;@cached&lt;/code&gt; æˆ–è€… &lt;code class=&quot;highlighter-rouge&quot;&gt;@validate&lt;/code&gt; ç­‰ annotationã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å®ç° Reducer æ—¶ï¼Œæœ‰ç”¨åˆ°è¿™ä¸ªæ¨¡å¼ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyReducer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Reducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyReducer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;associatedtype&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ReducerStateType&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ReducerStateType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ReducerStateType&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Reducer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withSpecificTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handleAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;_handleAction&lt;/code&gt; å¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;handleAction&lt;/code&gt; åšäº†ä¸ªæ ¡éªŒï¼Œï¼ˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;withSpecificTypes&lt;/code&gt; å‡½æ•°é‡Œå¦‚æœæ ¡éªŒä¸é€šè¿‡ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;handleAction&lt;/code&gt; ä¸ä¼šè¢«æ‰§è¡Œï¼‰ï¼Œè¿™æ ·å¯¹äºä½¿ç”¨è€…ï¼Œåªéœ€ç»§æ‰¿ Reducer å®ç° &lt;code class=&quot;highlighter-rouge&quot;&gt;handleAction&lt;/code&gt; æ–¹æ³•ï¼ŒReSwift å†…éƒ¨è°ƒç”¨æ—¶ä¼šä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;_handleAction&lt;/code&gt; æ¥åšä¸€äº›æ ¡éªŒã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;StoreSubscriber&lt;/code&gt; é‡Œä¹Ÿæœ‰ç”¨åˆ°ç±»ä¼¼çš„æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;h4 id=&quot;associatedtype-çš„ä½¿ç”¨&quot;&gt;associatedtype çš„ä½¿ç”¨&lt;/h4&gt;
&lt;p&gt;é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;associatedtype&lt;/code&gt;ï¼Œå¯ä»¥è®© protocol ä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;generic&lt;/code&gt;, Natasha è¿˜å†™è¿‡ä¸€ç¯‡å…³äº &lt;a href=&quot;https://www.natashatherobot.com/swift-what-are-protocols-with-associated-types/&quot;&gt;PAT ä½¿ç”¨çš„æ–‡ç« &lt;/a&gt;ï¼Œé‡Œé¢ä»¥å® ç‰©å°ç²¾çµä¸ºä¾‹ï¼Œé€šè¿‡ PAT è®©ä¸åŒçš„å°ç²¾çµå…·å¤‡äº†ä¸åŒçš„èƒ½åŠ›ã€‚ä¸è¿‡ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;associatedtype&lt;/code&gt; æˆ– &lt;code class=&quot;highlighter-rouge&quot;&gt;Self&lt;/code&gt; åï¼Œå°±ä¸èƒ½ä½œä¸ºå˜é‡çš„ç±»å‹æ¥å£°æ˜äº†ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;var something: AProtoclWithAssociatedType&lt;/code&gt; è¿™æ ·ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå…·ä½“åŸå› å¯ä»¥å‚è€ƒ&lt;a href=&quot;http://krakendev.io/blog/generic-protocols-and-their-shortcomings&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;ï¼Œä¸»è¦æ˜¯å› ä¸ºæ— æ³•æŒ‡å®š Generic çš„ç±»å‹ï¼Œå¯¼è‡´ç¼–è¯‘å™¨æ— æ³•åœ¨ç¼–è¯‘æœŸé—´å°±ç¡®å®šå…·ä½“çš„ç±»å‹ï¼Œå¯¹äºå¼ºç±»å‹è¯­è¨€æ¥è¯´ï¼Œè¿™æ˜¯ä¸èƒ½æ¥å—çš„ã€‚&lt;/p&gt;

&lt;p&gt;ReSwift ä¸­ï¼Œåœ¨å®šä¹‰ StoreType æ—¶ï¼Œæœ‰ç”¨åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;associatedtype&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StoreType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;associatedtype&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;/// Initializes the store with a reducer and an intial state.&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyReducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨å®šä¹‰ reducer protocol æ—¶ï¼Œä¹Ÿæœ‰ç”¨åˆ°ï¼ˆä¹Ÿæ˜¯å…³è”äº† StateTypeï¼‰ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å¯¹å¤–åªè¯»å¯¹å†…å¯è¯»å†™&quot;&gt;å¯¹å¤–åªè¯»ï¼Œå¯¹å†…å¯è¯»å†™&lt;/h4&gt;
&lt;p&gt;åœ¨ OC æ—¶ä»£ï¼Œé€šå¸¸çš„åšæ³•æ˜¯åœ¨ .h é‡Œå£°æ˜ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;readonly&lt;/code&gt;ï¼Œç„¶ååœ¨ .m çš„ class extension é‡Œï¼Œå°†åŒåçš„å±æ€§å£°æ˜ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;readwrite&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;Swift æ²¡æœ‰å¤´æ–‡ä»¶çš„æ¦‚å¿µï¼Œç›´æ¥ä¸€å¥è¯æå®š &lt;code class=&quot;highlighter-rouge&quot;&gt;private(set)&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Subscription&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;StateType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private(set)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;subscriber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;AnyStoreSubscriber&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;State&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)?&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;subscription å¸Œæœ›å¤–éƒ¨å¯ä»¥æ‹¿åˆ° subscriberï¼Œä½†ä¸è¦ä¿®æ”¹å®ƒï¼Œäºæ˜¯åœ¨å‰é¢åŠ äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;private(set)&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;set&lt;/code&gt; æ–¹æ³•æ ‡è®°ä¸º privateã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;ReSwift è¿˜æ˜¯æŒºå€¼çš„ä¸€è¯•çš„ï¼Œä¸€æ–¹é¢æ˜¯å› ä¸ºå•å‘æ•°æ®æµç¡®å®å¯¹ç¨‹åºçš„æ¸…æ™°åº¦æœ‰å¸®åŠ©ï¼Œå¦ä¸€æ–¹é¢ ReSwift çš„ä»£ç å¾ˆç®€æ´ï¼Œå†…éƒ¨å®ç°æ¯”è¾ƒå®¹æ˜“ææ˜ç™½ï¼Œè¿™æ ·å³ä½¿å‡ºé—®é¢˜ä¹Ÿæ¯”è¾ƒå®¹æ˜“å®šä½ã€‚&lt;a href=&quot;https://realm.io/news/benji-encz-unidirectional-data-flow-swift/&quot;&gt;Realm&lt;/a&gt; ä¸Šæœ‰ä½œè€…åˆ†äº«çš„æ¡ˆä¾‹ï¼Œå¯ä»¥å‚è€ƒä¸‹ã€‚ä¸è¶³å˜›è‚¯å®šä¹Ÿæœ‰ï¼Œæ¯”å¦‚åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯åšäº†æ•°æ®æµï¼Œç¼ºå°‘ Diff æ”¯æŒï¼Œåœ¨åšåˆ—è¡¨æ›´æ–°ï¼åˆ é™¤æ—¶ä¼šæ¯”è¾ƒç—›è‹¦ï¼›å¦‚ä½•ä¸ MVVM ç­‰æ¯”è¾ƒæˆç†Ÿçš„æ¶æ„æœ‰æ•ˆåœ°ç»“åˆèµ·æ¥ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºæ•°æ®éƒ½é€šè¿‡ State æ¥ä¼ é€’ï¼Œå¯ä»¥åœ¨å‡º bug æ—¶ï¼Œä¸Šä¼ å½“æ—¶çš„ state å†…å®¹æ–¹ä¾¿å®šä½ï¼›è¿˜å¯ä»¥åŸºäº State æ¥åš&lt;a href=&quot;https://github.com/ReSwift/ReSwift#demo&quot;&gt;æ—¶å…‰æœº&lt;/a&gt;ã€‚ä¸å¦¨åœ¨ Side Project ä¸­å°è¯•ä¸‹ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>æ—¥æœ¬å°è±¡</title>
   <link href="http://limboy.me/essay/2016/10/06/japan-impression.html"/>
   <updated>2016-10-06T00:00:00+08:00</updated>
   <id>http://limboy.me/essay/2016/10/06/japan-impression</id>
   <content type="html">&lt;p&gt;æ—¶å¸¸ä¼šä»å„ç§é€”å¾„å¬åˆ°å¯¹æ—¥æœ¬çš„è¯„ä»·ï¼Œæœ‰å¥½çš„ï¼Œæœ‰åçš„ã€‚è¿™æ¬¡è¶ç€åä¸€å‡æœŸï¼Œå»å¤§é˜ªè½¬äº†è½¬ï¼Œä¹Ÿæ¥è¯´ä¸€ä¸‹è‡ªå·±çš„æ„Ÿå—ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ³¨é‡è®¾è®¡&quot;&gt;æ³¨é‡è®¾è®¡&lt;/h3&gt;
&lt;p&gt;è®¾è®¡æ˜¯å½¢å¼ä¸åŠŸèƒ½çš„ç»“åˆï¼Œå°¤å…¶ä½“ç°åœ¨ä¸€äº›ç»†èŠ‚ä¸Šã€‚åˆ°äº†å¤§é˜ªåï¼Œè¢«å¸¦åˆ°äº†é…’åº—ï¼Œè¿™å¯èƒ½æ˜¯æˆ‘è§è¿‡çš„æœ€ä¸åƒé…’åº—çš„é…’åº—äº†ï¼šæ²¡æœ‰å¤§å ‚ï¼Œæ²¡æœ‰å‰å°ï¼Œæ²¡æœ‰å¸®ä½ æ‹è¡Œæçš„å°å“¥ï¼Œä¸éœ€è¦ check inã€‚ç®€å•æ¥è¯´ï¼Œé€šè¿‡åˆç†çš„è®¾è®¡æ¥é¿å…äººåŠ›æˆæœ¬ã€‚å®ƒçš„è®¾è®¡æ˜¯è¿™æ ·çš„ï¼šåœ¨ç½‘ä¸Šè®¢å¥½æ—¥æœŸå’Œæˆ¿é—´ï¼Œåˆ°äº†ä¹‹åä¼šæœ‰ä¸€ä¸ªä¸“é—¨å–é’¥åŒ™çš„åœ°æ–¹ï¼Œæ²¡æœ‰é”ï¼Œç›´æ¥æ‰“å¼€æ‹¿åˆ°é’¥åŒ™å°±å¯ä»¥è¿›æˆ¿é—´äº†ï¼Œé€€æˆ¿çš„è¯åªéœ€æŠŠé’¥åŒ™æ”¾å›åŸå¤„å³å¯ã€‚è¿™æ ·çš„è®¾è®¡ï¼Œå¯¼è‡´é™¤äº†åŒè¡Œäººå‘˜ï¼Œåªåœ¨ã€Œé…’åº—ã€é‡è§è¿‡ä¸€ä¸ªäººã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/IMG_0003-1.jpg&quot; alt=&quot;IMG_0003&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å³ä¾§å°±æ˜¯å–é’¥åŒ™çš„ç®±å­ï¼Œæ‰¾åˆ°å¯¹åº”çš„æˆ¿é—´å·æ‰“å¼€ï¼Œé’¥åŒ™å°±åœ¨é‡Œé¢ã€‚ç„¶åæˆ‘å°±åœ¨æƒ³ä¸€ä¸ªé—®é¢˜ï¼šè¿™ç§ä¸åŠ å¯†ä¼ è¾“å…³é”®ä¿¡æ¯çš„æ–¹å¼å¾ˆå®¹æ˜“è¢«å…¶ä»–äººç ´åï¼Œæ›´å¥½çš„æ–¹å¼è‡³å°‘å¯ä»¥å…ˆåœ¨ç½‘ä¸Šç”Ÿæˆä¸€ä¸ªå¯†ç ï¼Œç„¶åæ ¹æ®å¯†ç æ¥æ‰“å¼€ç®±å­ã€‚ï¼ˆåæ¥åˆè€ƒè¯äº†ä¸‹ï¼Œé’¥åŒ™åº”è¯¥æ˜¯æ¯”é¢„å®šæ—¶é—´ä¸ä¹…æ”¾è¿›å»çš„ï¼Œè€Œä¸”æœ‰æ‘„åƒå¤´ï¼Œè¢«å·çš„å¯èƒ½æ€§ä¸é«˜ï¼Œé’¥åŒ™å½’è¿˜åç®±å­ä¼šè¢«é”ä½ï¼‰&lt;/p&gt;

&lt;p&gt;æˆ¿é—´çš„ç©ºé—´æ¯”è¾ƒå°ï¼Œå¤§æ¦‚ä¹Ÿå°±20å¹³ç±³å·¦å³ï¼Œä½†åœ¨åˆç†çš„å¸ƒå±€å’Œè®¾è®¡ä¸‹ï¼Œç«Ÿç„¶ä¹Ÿå®¹å¾—ä¸‹ä¸¤ä¸ªäººï¼Œè€Œä¸”è¯¥æœ‰çš„éƒ½æœ‰ï¼Œç”šè‡³å¯ä»¥åšé¥­å’Œæ³¡æ¾¡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/IMG_0006-1.jpg&quot; alt=&quot;IMG_0006&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/IMG_0009.jpg&quot; alt=&quot;IMG_0009&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€äº›å¾ˆè´´å¿ƒçš„è®¾è®¡ï¼Œæ¯”å¦‚ï¼šåœ°é“ç«™å‡ºæ¥ä¹‹åä¼šæœ‰æŒ‡å—è·¯æ ‡ï¼Œæ–¹ä¾¿é‚£äº›æ²¡æœ‰æ–¹å‘æ„Ÿçš„äººï¼›å¯¹ç€è·¯é¢çš„ç©ºè°ƒä¼šæŠŠæ’é£æ‰‡çš„æ–¹å‘å¾€ä¸‹è°ƒé¿å…ç›´æ¥å¹åˆ°äººï¼›åœ°é“é™¤äº†æ ‡å¿—å‡ºåœ°åï¼Œè¿˜ä¼šæ ‡å¿—å‡ºåºå·ï¼Œå¦‚ Y18ï¼ŒY19ï¼ŒæŠ¥ç«™åæ—¶ä¹Ÿä¼šæŠ¥åºå·ï¼Œè¿™æ ·ä¸è®¤è¯†å­—çš„åªè¦è®°ä½åºå·å°±è¡Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14757607584718.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ³¨é‡ä»–äººçš„æ„Ÿå—&quot;&gt;æ³¨é‡ä»–äººçš„æ„Ÿå—&lt;/h3&gt;
&lt;p&gt;è¿™ç‚¹ä»ä¸Šé¢çš„ä¸€äº›è®¾è®¡ç»†èŠ‚å°±èƒ½æ„Ÿå—å‡ºæ¥ï¼Œå…¶ä»–çš„è¿˜æœ‰ï¼šæ™šä¸Šè½¦ä¼šæ‰“è¿‘å…‰ç¯ï¼Œè¿™æ ·çœ‹ç€ä¸é‚£ä¹ˆåˆºçœ¼ï¼›è½»æ˜“ä¸é¸£å–‡å­ï¼Œåœ¨å¥ˆè‰¯å…¬å›­æ—¶ï¼Œæœ‰ä¸ªäººåœ¨æ‹å¼¯å¤„æ²¡æœ‰æ³¨æ„åˆ°åé¢çš„è½¦ï¼Œè¿˜æ˜¯æŒ‰è‡ªå·±çš„èŠ‚å¥åœ¨èµ°ï¼Œè™½ç„¶æŒ¡åˆ°äº†è½¦ï¼Œåæ¥åŒä¼´å‘ç°åï¼Œå–Šäº†å¥¹è®©ä¸€ä¸‹ï¼Œè½¦æ‰å¼€äº†è¿‡å»ï¼›åœ°é“ä¹Ÿä¸€æ ·ï¼Œå¤§å®¶ä¸€èˆ¬éƒ½æ¯”è¾ƒå®‰é™ï¼Œä¸ä¼šå¤§å£°è¯´è¯ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¾‹å¤–ï¼Œä»ç¯çƒå½±åŸå›æ¥çš„é‚£è¶Ÿåˆ—è½¦å¤§å®¶å°±ç•…å¿«åœ°èŠå¼€äº†ï¼›ã€Œè½¦è®©äººã€ä¹Ÿæ¯”è¾ƒå¸¸è§ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹å¼±åŠ¿ç¾¤ä½“ä¹Ÿå¾ˆæ³¨é‡ä»–ä»¬çš„ä½“éªŒï¼Œæ¯”å¦‚ï¼šæ´—è„¸çš„å‡ºæ°´å£å¤„ä¼šæœ‰ç›²æ–‡ï¼›åœ°é“çš„æŠ•å¸å£ä¼šæœ‰ç›²æ–‡ï¼›è¿å•¤é…’çš„æ€ç›–å¤„éƒ½æœ‰ç›²æ–‡ï¼›é©¬è·¯çš„çº¢ç»¿ç¯å˜æˆç»¿è‰²æ—¶ï¼Œè¿˜ä¼šæœ‰å«å£°ï¼Œå½“æ—¶è¿˜åœ¨ç¢ç£¨è¿™æ˜¯å‡ºäºæ€æ ·çš„è€ƒè™‘ï¼Œåæ¥æ‰æƒ³åˆ°è¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿é‚£äº›ç›²äººæˆ–è‰²ç›²è¿‡é©¬è·¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åŸå¸‚å¹²å‡€æ•´æ´&quot;&gt;åŸå¸‚å¹²å‡€æ•´æ´&lt;/h3&gt;
&lt;p&gt;ä¸å…‰æ˜¯åœ¨æ—¥æœ¬ï¼Œå»çš„å…¶ä»–å‡ ä¸ªåœ°æ–¹å¦‚å°æ¹¾ã€æ¸…è¿ˆç­‰ä¹Ÿç±»ä¼¼ã€‚æ›´å¥‡æ€ªçš„æ˜¯ä¸€è·¯ä¸Šè¿åƒåœ¾ç®±éƒ½å¾ˆå°‘ã€‚åæ¥é€æˆ‘ä»¬å»æœºåœºçš„å¸æœºæœ‰æåˆ°ï¼Œä»–ä»¬è‡ªå·±ä¼šæºå¸¦åƒåœ¾å›æ”¶å·¥å…·ï¼Œå¦‚å¡‘æ–™è¢‹ã€‚æ‰€ä»¥æœ‰æ—¶å–å®Œæ°´ä¹‹åï¼Œä¸çŸ¥è¯¥æŠŠç©ºæ°´ç“¶æ‰”å“ªï¼Œå°±è¿˜æ˜¯æ”¾å›åŒ…é‡Œï¼Œå›åˆ°ä½å¤„å†æ‰”åˆ°åƒåœ¾ç®±ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿˜èƒ½æœ‰æ„è¯†åœ°ä¸éšåœ°æ‰”åƒåœ¾ï¼Œç¡®å®ä¸å®¹æ˜“ï¼Œæ”¾åœ¨å›½å†…ä¸çŸ¥é“ä¼šæ˜¯æ€æ ·çš„çŠ¶å†µã€‚&lt;/p&gt;

&lt;p&gt;åæ¥æŸ¥é˜…äº†ä¸‹èµ„æ–™ï¼Œå‘ç°è¿™æ˜¯æ—¥æœ¬ä¸ºäº†æ²»ç†åƒåœ¾è€Œæƒ³å‡ºçš„ä¸€ä¸ªåŠæ³•ï¼šå‡å°‘å…¬å…±åœºæ‰€çš„åƒåœ¾æ¡¶ã€‚å¹¶ä¸”å‡å°‘åƒåœ¾å·¥åˆ°å±…æ°‘åŒºæ”¶åƒåœ¾çš„æ¬¡æ•°ï¼ˆç„¶ååƒåœ¾å°±æœ‰å¯èƒ½ä¼šåœ¨å®¶é‡Œå †ç§¯ï¼‰ã€‚è€Œä¸”ä»–ä»¬ä»å°å°±å¼€å§‹å®šæ—¶æ‰”åƒåœ¾ã€åƒåœ¾åŒºåˆ†çš„æ•™è‚²ï¼Œç”šè‡³æœ‰æ—¥å†æ ‡æ˜å“ªå¤©å¯ä»¥æ‰”ï¼Œå“ªå¤©ä¸å¯ä»¥ï¼Œæˆ‘çš„å¤©å“ªÂ·Â·Â·&lt;/p&gt;

&lt;h3 id=&quot;æ¼«ç”»æ–‡åŒ–&quot;&gt;æ¼«ç”»æ–‡åŒ–&lt;/h3&gt;
&lt;p&gt;åœ¨å»å¤§é˜ªçš„é£æœºä¸Šæ—¶å°±å‘ç°ï¼Œåæˆ‘å‰æ’çš„æ—¥æœ¬çš„ä¸­å¹´å¤§å”ï¼Œæ‰“å¼€äº† iPad ä¸Šçš„è¯»ä¹¦è½¯ä»¶ï¼Œå½“æ—¶å°±æƒ³æ—¥æœ¬äººæœç„¶æ˜¯çˆ±è¯»ä¹¦å•Šï¼Œå› ä¸ºæˆ‘èº«è¾¹çš„æ—¥æœ¬å¤§çˆ·å°±åœ¨çœ‹å®ä½“ä¹¦ã€‚ç„¶åç‚¹å‡»å…¶ä¸­ä¸€é¡¹åï¼Œå‡ºæ¥äº†åŠ¨æ¼«Â·Â·Â·&lt;/p&gt;

&lt;p&gt;åˆ°äº†å¤§é˜ªä¹‹åå‘ç°ï¼Œä¾¿åˆ©åº—é‡Œä¹Ÿæœ‰åŠ¨æ¼«ä¹¦åœ¨å–ï¼Œä¹Ÿèƒ½è§åˆ°ä¸­å­¦ç”Ÿæ¨¡æ ·çš„äººåœ¨é‚£è¹­ä¹¦çœ‹ï¼ˆå½“ç„¶ï¼Œä¾¿åˆ©åº—é‡Œè¿˜æœ‰ä¸€äº›å–œé—»ä¹è§çš„æ‚å¿—ï¼‰ï¼›åœ°é“ä¸Šä¹Ÿæœ‰ä¸åŒå¹´é¾„é˜¶æ®µçš„äººåœ¨çœ‹æ¼«ç”»ï¼ŒåŒ…æ‹¬å¹¿å‘Šéƒ½ä¼šæœ‰åŠ¨æ¼«çš„è¡¨ç°å½¢å¼ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä¸“ä¸šçš„æœåŠ¡è¡Œä¸š&quot;&gt;ä¸“ä¸šçš„æœåŠ¡è¡Œä¸š&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªä»ä¸Šé£æœºçš„é‚£ä¸€åˆ»å°±æ„Ÿå—åˆ°äº†ï¼Œç”±äºæ˜¯æ—¥æœ¬èˆªç©ºï¼Œæ‰€ä»¥ç©ºå§ä¹Ÿéƒ½æ˜¯æ—¥æœ¬çš„ï¼Œé¢å¯¹æ¯ä¸ªä¹˜å®¢æ—¶éƒ½æ˜¯å¾®ç¬‘æœåŠ¡ï¼Œç„¶åè¡¨ç¤ºæ„Ÿè°¢ã€‚é£æœºé¤ä¹Ÿæ¯”å›½å†…çš„å¥½ä¸€ä¸ª levelï¼Œç”¨å®Œé¤åï¼Œè¿˜ä¼šé€’ä¸Šç³–æœã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹äº†é£æœºä¹‹åï¼Œæœºåœºçš„å…¥å¢ƒåè°ƒäººå‘˜å’ŒåŠç†æ‰‹ç»­çš„éƒ½å¾ˆæœ‰ç¤¼è²Œï¼Œç¬‘è„¸ç›¸è¿ã€‚ç„¶åå°±å‘ç°äº†ä¸€ä¸ªç°è±¡ï¼ˆè¿™ä¸ªä¹‹ååœ¨å…¶ä»–åœºæ™¯ä¹Ÿæœ‰å‘ç°ï¼Œæ¯”å¦‚é¤å…ã€åœè½¦åœºç­‰ï¼‰ï¼Œæœ‰ä¸å°‘ã€Œé«˜é¾„å·¥ä½œäººå‘˜ã€ã€‚æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼Œæåˆ°é«˜é¾„å·¥ä½œäººå£æ¯”ä¾‹ä¸Šå‡æ˜¯ç”±äºé’å¹´åŠ³åŠ¨è€…å‡å°‘ï¼ŒåŠ ä¸Šå¿«é€Ÿé«˜é¾„åŒ–äººå£æŒ¤å‹ç¤¾ä¼šç¦åˆ©ä½“ç³»ã€‚è¿™ä¹ˆçœ‹æ¥æ—¥æœ¬çš„ç”Ÿæ´»å‹åŠ›è¿˜æ˜¯è›®å¤§çš„ã€‚&lt;/p&gt;

&lt;p&gt;å†å›æ¥è®²æœåŠ¡è¡Œä¸šï¼Œç¬¬ä¸€å¤©ã€Œå¯¼æ¸¸ã€å¸¦æˆ‘ä»¬åˆ°äº¬éƒ½åï¼Œæ‰¾äº†å®¶é¤å…ï¼Œé¤å…çš„æœåŠ¡å‘˜æœ‰å‡ ä½æ˜¯ä¸Šäº†å¹´çºªçš„å¤§å¦ˆï¼Œä¸Šæ¥å°±è¡¨æ¼”äº†ç©ºæ‰‹æŠ“å°å¼ºçš„ç»æŠ€ï¼Œç„¶åä¸åœåœ°å‘æˆ‘ä»¬é“æ­‰ï¼ŒæœåŠ¡çš„æ•´ä¸ªè¿‡ç¨‹ä¹Ÿéƒ½æ˜¯å¾ˆèˆ’æœï¼Œè™½ç„¶èœå¾ˆä¸€èˆ¬ï¼Œè€Œä¸”è´µï¼é™¤äº†é¤å…ï¼Œåƒä¾¿åˆ©åº—è¿™ç§çº§åˆ«çš„ï¼Œåº—å‘˜çš„æœåŠ¡ä¹Ÿä¸æ¯«ä¸å·®ã€‚æ‰€ä»¥å³ä½¿æ˜¯å½“ä¸ªæœåŠ¡å‘˜ä¹Ÿä¸å®¹æ˜“å‘¢ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h3&gt;
&lt;p&gt;åœ¨å¤§é˜ªæ—¶ï¼Œåšäº†ä¸€ä»¶å›½å†…å¾ˆå°‘åšçš„äº‹ï¼šçœ‹äº†ä¸€ä¸ªå¤šå°æ—¶çš„ç”µè§†èŠ‚ç›®ã€‚æœŸé—´å‡ ä¹æ²¡æœ‰æ‹¿èµ·æ‰‹æœºï¼Œä¸€ä¸ªèŠ‚ç›®å®Œäº†å°±æ¢ä¸€ä¸ªï¼Œè€Œä¸”æ˜¯åœ¨è¯­è¨€ä¸é€šçš„æƒ…å†µä¸‹ã€‚å…¶ä¸­ä¸€ä¸ªå¤§æ¦‚æ˜¯è®²å½“ä¸‹çƒ­é—¨å…³é”®å­—çš„ï¼Œæœ‰ç‚¹å¨±ä¹èŠ‚ç›®+æ–°é—»çš„å½¢å¼ï¼Œä¸€çœ‹é‡Œé¢æœ‰ä¸ªäººå¾ˆçœ¼ç†Ÿï¼Œç»†ä¸€çœ‹åŸæ¥æ˜¯åŒ—é‡æ­¦ã€‚è¿˜æœ‰ä¸€ä¸ªçœ‹äº†æŒºé•¿æ—¶é—´çš„èŠ‚ç›®æ˜¯ã€Œç”µè§†è´­ç‰©ã€ï¼Œè·Ÿå›½å†…ã€Œåªè¦ 998ï¼Œå¿«æ¥è´­ä¹°å§ã€çš„æ°›å›´ä¸åŒï¼Œæ²¡æœ‰å¤¸å¼ çš„è¯­è°ƒï¼Œæ²¡æœ‰çªå‡ºä»·æ ¼ï¼Œåœ¨ä»‹ç»äº†äº§å“èƒŒæ™¯å’ŒåŠŸèƒ½åï¼Œè¿˜ä¼šæŠŠåŸç†ä»¥é€šä¿—æ˜“æ‡‚çš„æ–¹å¼å‘ˆç°å‡ºæ¥ï¼Œæœ€åè¿˜æœ‰è¡—å¤´å’Œæ¼”æ’­å…çš„ç°åœºæ¼”ç¤ºã€‚çœ‹å®Œä¹‹åå°±ä¸€ä¸ªæ„Ÿè§‰ï¼šäº§å“åšçš„çœŸç»†è‡´ï¼Œå¦‚æœæˆ‘æ˜¯å®¶åº­ä¸»å¦‡çš„è¯ï¼Œå¾ˆå¯èƒ½ä¼šä¹°ä¸€ä¸ªï¼ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å°±æ˜¯ä¹Œé¸¦çœŸçš„ä¸å°‘ã€‚ä¹Œé¸¦åœ¨æ—¥æœ¬çš„åœ°ä½è¿˜æ˜¯æŒºé«˜çš„ï¼Œæœ‰ã€Œç«‹å›½ç¥å…½ã€ä¹‹ç§°ï¼Œèµ°åœ¨è·¯ä¸Šæ—¶ä¸æ—¶åœ°èƒ½è§åˆ°ä¹Œé¸¦é£è¿‡ï¼Œè€Œä¸”ä½“å‹æ˜¯çœŸå¤§ï¼Œå‘å‡ºçš„å«å£°è‡ªç„¶ä¹Ÿä¼šå¤§ä¸€äº›ã€‚ä¸è¿‡è¿™äº›ä¹Œé¸¦è¿˜æ˜¯ç»™æ—¥å¸¸ç”Ÿæ´»å¸¦æ¥äº†äº›éº»çƒ¦ï¼Œå› ä¸ºä»–ä»¬ä¼šæŠŠåƒåœ¾ç¿»å¾—åˆ°å¤„éƒ½æ˜¯ï¼ˆè¿™å¯èƒ½ä¹Ÿæ˜¯å‡å°‘å…¬å…±åƒåœ¾æ¡¶çš„ä¸€ä¸ªè€ƒè™‘ç‚¹å§ï¼‰ï¼Œæ®è¯´æ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯æŠŠé»‘è‰²çš„åƒåœ¾è¢‹æ¢æˆé»„è‰²çš„ï¼ˆåŒå­¦çš„æ¯•ä¸šè®ºæ–‡Â·Â·Â·ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;äº¤é€šçŠ¶å†µå¥½ï¼Œè¿™å¯èƒ½è·ŸåŸå¸‚æœ‰å…³ï¼Œä¸è¿‡çœ‹äº†ä¸‹å¤§é˜ªçš„äººå£å¯†åº¦ï¼š12,096/kmÂ²ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œæ­å·çš„äººå£å¯†åº¦ä¸º 1,479/kmÂ²ã€‚åœ¨å¤§é˜ªæ²¡æœ‰é‡åˆ°è¿‡å µè½¦ï¼Œå°±æ­£å¸¸çš„çº¢ç»¿ç¯ï¼Œè€Œæ­å·åˆ™æ˜¯å¦ä¸€ç§åœºæ™¯ï¼Œå†è¦ä¸‹ç‚¹é›¨å°±æ›´å´©æºƒäº†ã€‚&lt;/p&gt;

&lt;p&gt;ç©ºæ°”æ¯”å›½å†…çš„å¥½ä¸å°‘ï¼Œå‡ºå‘é‚£å¤©ï¼Œæ­å·é›¾è’™è’™çš„ï¼Œèƒ½è§åº¦ä¸é«˜ï¼Œå°¤å…¶æ˜¯æ±Ÿä¸Šï¼Œä¸€ç‰‡æœ¦èƒ§ã€‚åˆ°äº†å¤§é˜ªï¼Œè™½ç„¶ä¹Ÿæœ‰é‡å·¥ä¸šï¼Œä½†ç©ºæ°”å´è¿˜ OKï¼Œè‡³å°‘ä½çš„è¿™å‡ å¤©éƒ½æ˜¯å¦‚æ­¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/IMG_0295.jpg&quot; alt=&quot;IMG_0295&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°æˆ¿å±‹çš„é—´è·æ¯”è¾ƒå°ï¼Œåº”è¯¥è·Ÿé¢ç§¯å°æœ‰å…³ï¼Œæ¥¼å±‚ä¸æ˜¯å¾ˆé«˜ï¼Œæˆ‘ä»¬ä½ 10 æ¥¼ï¼Œè§†é‡å°±å¾ˆå¼€é˜”äº†ï¼Œå¯èƒ½è·Ÿåœ°éœ‡é¢‘å‘æœ‰ç‚¹å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;å¥³ç”Ÿæ™®éæ¯”è¾ƒä¼šåŒ–å¦†ï¼Œè¿™ä¸ªåœ¨å°æ¹¾ä¹Ÿæœ‰æ„Ÿå—åˆ°ï¼Œå°±æ˜¯æ— è®ºæµ“ã€æ·¡ï¼Œéƒ½ä¼šæ‰“æ‰®ä¸€ç•ªå†å‡ºé—¨ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“è§åˆ°ç¾å¥³ï¼ˆå½“ç„¶ä¹Ÿè·Ÿåº•å­å¥½æœ‰å…³ï¼‰ï¼Œå¯¹äºç”·ç”Ÿæ¥è¯´è¿™è‡ªç„¶æ˜¯ä¸€ä»¶å¹¸ç¦çš„äº‹å•¦ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åè¦æŠ±æ€¨çš„ä¸€ç‚¹æ˜¯è‹±æ–‡æ™®åŠç‡åä½ï¼Œå¾ˆå¤šäººéƒ½ä¸å¤ªä¼šè®²è‹±è¯­ï¼ŒåŒ…æ‹¬ä¸€äº›å¹´è½»äººï¼Œä¼šçš„è¯ï¼Œä¹Ÿå¾€å¾€æ˜¯é‚£ç§æ—¥å¼è‹±è¯­ï¼ˆæƒ³èµ·äº†é‚£ä¸ª supplies çš„ç¬‘è¯ï¼‰ã€‚æœ‰åœ¨éœ€è¦å¸®åŠ©çš„æ—¶å€™çœŸæ˜¯ä¼šæ¯”è¾ƒç´¯ï¼Œå¾€å¾€è¦æ¯”åˆ’å’ŒçŒœæµ‹ç»“åˆæ‰èƒ½å¤§æ¦‚è®©å¯¹æ–¹æ˜ç™½ä»¥åŠæ˜ç™½å¯¹æ–¹çš„æ„æ€ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;æ€»ä½“æ¥è¯´ï¼Œæ—¥æœ¬è¿˜æ˜¯æŒºæœ‰è‡ªå·±çš„ä¸€å¥—å“²å­¦çš„ï¼Œè™½ç„¶æœ‰æ—¶ä¼šæœ‰æ¯”è¾ƒæ­»æ¿çš„æ„Ÿè§‰ï¼Œæ¯”å¦‚ä¸€æ¡æ¯”è¾ƒçª„çš„é“ï¼Œä¼šæœ‰çº¢ç»¿ç¯ï¼Œæ—¥æœ¬äººå¾€å¾€è¦ç­‰åˆ°ç»¿ç¯æ—¶æ‰ä¼šè¿‡å»ï¼Œå³ä½¿è·¯é¢ä¸Šæ˜æ˜æ²¡æœ‰è½¦ã€‚åœ¨ã€Œç…§é¡¾ä»–äººæ„Ÿå—ã€è¿™ç‚¹ä¸Šåšå¾—æ¯”è¾ƒæè‡´ï¼ŒåŒ…æ‹¬æ—¥å¸¸çš„ä¸€äº›è®¾è®¡ã€è¡Œä¸ºä¸¾æ­¢ç­‰ï¼Œç”šè‡³ç›–ä¸ªæ¥¼éƒ½è¦ç”¨å¸ƒå›´èµ·æ¥ï¼Œé¿å…å™ªéŸ³å’Œç°å°˜ï¼Œè¿™ä¹Ÿæ˜¯è®©æˆ‘å°è±¡é¢‡æ·±çš„ä¸€ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹è¿™ä¸ªå›½å®¶çš„å°è±¡è¿˜ä¸é”™ï¼Œå¸Œæœ›æœ‰æœºä¼šè¿˜å¯ä»¥å†å»ä½“éªŒä¸‹ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>åšä¸€ä¸ª App å‰éœ€è¦è€ƒè™‘çš„å‡ ä»¶äº‹</title>
   <link href="http://limboy.me/tech/2016/07/06/starting-an-app.html"/>
   <updated>2016-07-06T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/07/06/starting-an-app</id>
   <content type="html">&lt;p&gt;éšç€å·¥å…·é“¾çš„å®Œå–„ï¼Œè¯­è¨€çš„å‡çº§ä»¥åŠå„ç§ä¼˜è´¨æ•™ç¨‹çš„æ¶Œç°ï¼Œåšä¸€ä¸ª App çš„æˆæœ¬ä¹Ÿè¶Šæ¥è¶Šä½äº†ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæœ‰äº›äº‹æƒ…æœ€å¥½å‰æœŸå°±åšèµ·æ¥ï¼Œé¿å…å½“ App æœ‰äº†ä¸€å®šè§„æ¨¡åï¼Œå†æ„Ÿæ…¨å½“åˆä¸ºä»€ä¹ˆæ²¡æœ‰å¤šç•™ç‚¹å¿ƒã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ&quot;&gt;å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿ&lt;/h3&gt;
&lt;p&gt;ä»¥ iOS ä¸ºä¾‹ï¼Œæœ‰æ—¶å›¾æ–¹ä¾¿ï¼Œå°±ç›´æ¥ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; äº†ï¼Œç”šè‡³çº¿ä¸Šéƒ½ä¸€ç›´å¼€ç€ã€‚ä¸€æ–¹é¢ä¼šå½±å“æ€§èƒ½ï¼Œå°¤å…¶æ˜¯è¾“å‡ºæ¯”è¾ƒé¢‘ç¹çš„æ—¶å€™ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå®¹æ˜“æ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼Œæ‰€ä»¥ä¸€èˆ¬åšæ³•æ˜¯åœ¨ Release æ¨¡å¼ä¸‹ç¦ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog&lt;/code&gt;ï¼Œæ¯”å¦‚åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;pch&lt;/code&gt; æ–‡ä»¶ä¸­ï¼Œé€šè¿‡å¯¹ç¯å¢ƒçš„åˆ¤æ–­ï¼Œå¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; åšä¸åŒçš„å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ä½†è¿™æ ·ä»ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬å‘ç°çº¿ä¸Šçš„ App åœ¨ç‰¹å®šåœºæ™¯ä¸‹ä¼šæœ‰æŸç§å¼‚å¸¸çš„è¡¨ç°ï¼Œè¿™æ—¶å°±å¾ˆå¸Œæœ›èƒ½æœ‰æ—¥å¿—æ¥æä¾›æ›´å¤šçš„ä¿¡æ¯ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨åƒ &lt;a href=&quot;https://github.com/CocoaLumberjack/CocoaLumberjack&quot;&gt;cocoalumberjack&lt;/a&gt; è¿™æ ·åŠŸèƒ½æ›´å®Œå–„çš„ç¬¬ä¸‰æ–¹æ—¥å¿—å·¥å…·ï¼Œåœ¨çº¿ä¸Šä»ç„¶å¼€ç€æ—¥å¿—ï¼Œä½†ä¸æ¶ˆè´¹ï¼Œè¿™æ ·å°±ä¸ä¼šæ³„éœ²æ•æ„Ÿä¿¡æ¯ã€‚å½“æˆ‘ä»¬éœ€è¦çœ‹æ—¥å¿—æ—¶ï¼Œå¯ä»¥é€šè¿‡ã€Œè°ƒè¯•æ¨¡å¼ã€æ‰“å¼€å®ƒï¼Œç„¶åè¿ä¸Š &lt;a href=&quot;http://lemonjar.com/iosconsole/&quot;&gt;iOS Console&lt;/a&gt; æ¥çœ‹ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸º Log æ˜¯ä¸€ä¸ªå¾ˆæ™®éçš„è¡Œä¸ºï¼Œæ‰€ä»¥æœ€å¥½å‰æœŸå°±è§„èŒƒèµ·æ¥ï¼ŒåæœŸéåœ°éƒ½æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; æ—¶ï¼Œå†è¦æ”¹åŠ¨ä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å·æ‡’ç‚¹ï¼Œç›´æ¥æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSLog&lt;/code&gt; çš„å®å®šä¹‰æ”¹äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;commit-message-è§„èŒƒ&quot;&gt;Commit Message è§„èŒƒ&lt;/h3&gt;
&lt;p&gt;åœ¨å‰æœŸå¼€å‘çš„æ—¶å€™ï¼Œå¾€å¾€ä¸ºäº†å¿«é€Ÿå®ç°åŠŸèƒ½ï¼Œè€Œå¿½ç•¥äº† Commit Message çš„è§„èŒƒï¼Œç„¶åå°±ä¼šå‡ºç°å¾ˆéšæ„çš„ Commit ä¿¡æ¯ã€‚è¿™æ ·åˆ«äººåœ¨ Review ä»£ç æ—¶å°±ä¼šå¾ˆç´¯ï¼Œå†™æŸä¸ªç‰ˆæœ¬çš„ Release Notes ä¹Ÿä¼šå˜å¾—è‰°è¾›ï¼Œç”šè‡³è¿‡ä¸€æ®µæ—¶é—´è‡ªå·±éƒ½ä¸çŸ¥é“è¿™äº› Commit ä»£è¡¨çš„æ„æ€ã€‚è€Œå¦‚æœè‡ªå·±ä¹Ÿè®²ä¸æ¸…è¿™æ¬¡æ”¹åŠ¨ç©¶ç«Ÿè¯¥æ€ä¹ˆæè¿°æ—¶ï¼Œå¾€å¾€æ˜¯è¿™æ¬¡æ”¹åŠ¨æ··æ‚äº†è¾ƒå¤šçš„ä¿¡æ¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/erlang/otp/wiki/Writing-good-commit-messages&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt; ç®€æ´ç²¾ç¡®åœ°æè¿°äº†ä¸ºä»€ä¹ˆè¦å†™å¥½ Commit Messageï¼Œä»¥åŠå¦‚ä½•å†™ã€‚éµå®ˆè¿™äº›è§„èŒƒåï¼Œå°±å¾ˆæ–¹ä¾¿äº§å‡ºè¿™æ ·çš„ Release Notes äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14676794942559.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;ä»£ç è§„èŒƒ&quot;&gt;ä»£ç è§„èŒƒ&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªæœ€å¥½åœ¨å‰æœŸå°±æŠ“èµ·æ¥ï¼Œå¦‚æœå‰æœŸä¸åšçº¦æŸï¼Œæ¯ä¸ªäººçš„é£æ ¼å¾€å¾€ä¼šæœ‰æ¯”è¾ƒå¤§çš„å·®å¼‚ï¼Œå¯¼è‡´ä»£ç çœ‹èµ·æ¥ä¼šæ¯”è¾ƒç´¯ï¼Œç”šè‡³æœ‰äº›äººæ˜¯ä»å…¶ä»–è¯­è¨€è½¬è¿‡æ¥çš„ï¼Œè¿˜ä¼šä¿ç•™ä¹‹å‰è¯­è¨€çš„ä¸€äº›ä¹¦å†™ä¹ æƒ¯ï¼Œå°±å®¹æ˜“æœ‰ã€Œå‡ºæˆã€çš„æ„Ÿè§‰ã€‚ä¸€è‡´çš„ä»£ç è§„èŒƒä¸ä»…çœ‹èµ·æ¥èˆ’æœï¼Œè€Œä¸”è®©å›¢é˜Ÿæ›´åƒä¸€ä¸ªæ•´ä½“ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªå®æ–½èµ·æ¥ä¼šæœ‰ä¸€å®šéš¾åº¦ï¼Œå°¤å…¶æ˜¯å›¢é˜Ÿä¸­æœ‰ä¸€äº›ã€Œè€äººã€çš„æ—¶å€™ï¼Œä»–ä»¬å¾€å¾€ç§¯ç´¯äº†ä¸€å¥—è‡ªå·±çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œè€Œä¸”ä¸å®¹æ˜“è¢«è¯´æœã€‚&lt;/p&gt;

&lt;h3 id=&quot;å‡†å¤‡ä¸€ä»½ç¼–ç¨‹å®ˆåˆ™&quot;&gt;å‡†å¤‡ä¸€ä»½ç¼–ç¨‹å®ˆåˆ™&lt;/h3&gt;
&lt;p&gt;é‡Œé¢åŒ…å«äº†ã€Œæœ€ä½³å®è·µã€å’Œã€Œä¸è¦è¸©çš„å‘ã€ï¼Œè¿™ä¸ªå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæé«˜å¼€å‘æ•ˆç‡ï¼Œé¿å…ä¸€äº›ä½çº§é”™è¯¯ã€‚æ¯”å¦‚ä»¥ iOS ä¸ºä¾‹ï¼Œã€Œä¸è¦éšä¾¿ä½¿ç”¨é€šçŸ¥ã€ï¼Œå› ä¸ºé€šçŸ¥ä½¿ç”¨èµ·æ¥å¤ªæ–¹ä¾¿äº†ï¼Œç”¨å¾—å¤šäº†è°ƒè¯•èµ·æ¥å°±ä¼šå¾ˆç´¯ï¼Œè€Œä¸”ä¹Ÿä¸å¥½ç®¡ç†ï¼›ã€Œé€šçŸ¥ç”¨å®Œä¹‹åè®°å¾— remove observerã€ï¼›ä¸è¦ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;containsString&lt;/code&gt; (å¦‚æœè¿˜éœ€è¦æ”¯æŒ iOS 7 çš„è¯)ã€‚éšç€æ—¶é—´çš„ç´¯ç§¯ï¼Œè¿™ä»½å®ˆåˆ™é‡Œçš„å†…å®¹ä¼šè¶Šæ¥è¶Šå¤šï¼Œä¹Ÿæ˜¯ä¸€ä»¶æŒºå®è´µçš„è´¢å¯Œã€‚&lt;/p&gt;

&lt;h3 id=&quot;é¡µé¢å¸ƒå±€è§„èŒƒ&quot;&gt;é¡µé¢å¸ƒå±€è§„èŒƒ&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ªåœ¨ Android ç›¸å¯¹è¿˜å¥½ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡ xml æ¥è¿›è¡Œå¸ƒå±€ã€‚åœ¨ iOS é‡Œç©æ³•å°±å¤šäº†ï¼Œæœ‰ç”¨ storyboard çš„ï¼Œæœ‰ç”¨ xib çš„ï¼Œæœ‰ç›´æ¥è®¡ç®—åæ ‡å’Œå¤§å°çš„ï¼Œæœ‰ç”¨åŸç”Ÿ autolayout çš„ï¼Œæœ‰ç”¨ç¬¬ä¸‰æ–¹å¸ƒå±€ç±»çš„ã€‚æ€»ä¹‹å°±æ˜¯å„æ˜¾ç¥é€šï¼Œå°½é‡ç”¨åŒä¸€ç§å¸ƒå±€è§„èŒƒï¼ˆä½†ä¸å»ºè®®ç›´æ¥è®¡ç®—åæ ‡å’Œå¤§å°ï¼‰ï¼Œçœ‹èµ·æ¥ä¹Ÿä¼šæ–¹ä¾¿äº›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç»Ÿè®¡åŸ‹ç‚¹&quot;&gt;ç»Ÿè®¡åŸ‹ç‚¹&lt;/h3&gt;
&lt;p&gt;è¿™æ˜¯å¾ˆé‡è¦çš„ä¸€å—ï¼Œå®¢æˆ·ç«¯æ‰€æœ‰çš„æ•°æ®åŸºæœ¬å°±é å®ƒäº†ï¼Œæ‰€ä»¥å°½é‡é€‰æ‹©ä¸€ä¸ªçµæ´»ã€ç¨³å®šçš„æ•°æ®æ–¹æ¡ˆï¼ŒåŒæ—¶æœ€å¥½åœ¨ä»–ä»¬æä¾›çš„ SDK ä¸Šå†å°ä¸€å±‚ï¼Œæ–¹ä¾¿åšä¸€äº›é¢å¤–çš„äº‹æƒ…ï¼ˆæ¯”å¦‚æƒ³åŒæ—¶æ¥å…¥å¦ä¸€å®¶æœåŠ¡ä½œå¯¹æ¯”ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;ç»Ÿè®¡åŸ‹ç‚¹è¿˜æœ‰å¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ã€ŒéªŒè¯ã€ï¼Œæ˜¯å¦æœ‰é”™æ‰“ã€æ¼æ‰“ç­‰ç°è±¡ï¼›iOS / Android æ˜¯å¦æœ‰ç”¨åŒä¸€ä¸ªç‚¹ï¼›æœ‰äº›ç‚¹è¿˜éœ€è¦é¢å¤–çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°çš„æ ¼å¼æ˜¯å¦æ­£ç¡®ç­‰ã€‚è¿™äº›å·¥å…·å¾€å¾€åªèƒ½è‡ªå·±æ¥åšäº†ï¼Œè¿™ä¹Ÿæ˜¯æ¯”è¾ƒèŠ±æ—¶é—´çš„ä¸€éƒ¨åˆ†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;app-æ¶æ„&quot;&gt;App æ¶æ„&lt;/h3&gt;
&lt;p&gt;App æ¶æ„ä¼šéšç€ä¸šåŠ¡ã€äººå‘˜çš„å¢é•¿è€Œæ¼”è¿›ï¼Œæ‰€ä»¥å½“å‘ç°å½“å‰çš„æ¶æ„æ— æ³•æ»¡è¶³æ—¥å¸¸çš„ä¸šåŠ¡è¿­ä»£æ—¶ï¼Œå°±éœ€è¦è€ƒè™‘å¯¹å®ƒåšè°ƒæ•´äº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¤§æ–¹å‘ä¸Šä¹Ÿå°±æ˜¯ MVP / MVVMï¼Œç­‰äººå‘˜å¤šèµ·æ¥æ—¶ï¼ŒåŸºæœ¬å°±æ˜¯ç»„ä»¶åŒ–å¼€å‘ï¼Œå½“ç„¶ç»„ä»¶åŒ–ä¹Ÿä¼šæœ‰å®ƒçš„é—®é¢˜ï¼ˆæ¯”å¦‚èµ„æº / ç±»é‡ç”¨ã€ç»„ä»¶é—´é€šä¿¡ç­‰ï¼‰ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨å‰æœŸé€‰æ‹©ä¸€ä¸ªç›¸å¯¹è½»é‡çº§ï¼Œä½†æ¯”è¾ƒæ¸…æ™°çš„æ¶æ„ï¼ˆå°½é‡ä¸è¦é€‰æ‹© MVCï¼‰ï¼Œå¤§å®¶éƒ½éµå®ˆè¿™ä¸ªæ¶æ„å¼€å‘ï¼Œä¹Ÿèƒ½ä¸€å®šç¨‹åº¦ä¸Šæé«˜æ•ˆç‡ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é¡µé¢è·³è½¬æœºåˆ¶&quot;&gt;é¡µé¢è·³è½¬æœºåˆ¶&lt;/h3&gt;
&lt;p&gt;è™½ç„¶ Androidã€iOS éƒ½åŸç”Ÿæ”¯æŒ open ç‰¹å®š scheme çš„ urlï¼Œä¸è¿‡å¯èƒ½çš„è¯ï¼Œè¿˜æ˜¯é€šè¿‡ router ç»Ÿä¸€å¤„ç†ä¼šæ¯”è¾ƒæ–¹ä¾¿ï¼Œä¹Ÿæ›´çµæ´»ã€‚æ¯”å¦‚å¯ä»¥çŸ¥é“æ³¨å†Œäº†å“ªäº› URLï¼›å¯ä»¥çŸ¥é“é¡µé¢çš„è·³è½¬æˆåŠŸç‡ï¼›æ–¹ä¾¿å¤„ç†ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„éœ€æ±‚ç­‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åœ¨çº¿é…ç½®&quot;&gt;åœ¨çº¿é…ç½®&lt;/h3&gt;
&lt;p&gt;åœ¨çº¿é…ç½®å¯ä»¥èµ‹äºˆ App æå¤§çš„çµæ´»æ€§ï¼Œæ¯”å¦‚è¿è¥çš„ä¸€äº›æ´»åŠ¨ã€banner ä½è°ƒæ•´ã€é¦–é¡µå¼¹çª—ç­‰ï¼›è¿˜å¯ä»¥é’ˆå¯¹ç‰¹å®šæœºå‹ã€ç³»ç»Ÿåˆ†å‘ç‰¹å®šçš„å†…å®¹ï¼Œç»“åˆè§„åˆ™å¼•æ“ç”šè‡³å¯ä»¥ç»™ä¸€éƒ¨åˆ†æœ‰ç›¸åŒç‰¹å¾çš„ç”¨æˆ·å‘æ¨é€ï¼›å¯ä»¥åšæµé‡åˆ‡åˆ†ç­‰ã€‚æ‰€ä»¥ä¸€ä¸ªå¼ºå¤§/ç¨³å®šçš„é…ç½®ä¸­å¿ƒå°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼ŒA/B Test ä¹Ÿå¯ä»¥åŸºäºé…ç½®ä¸­å¿ƒæ¥åšã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰äº›æ³¨æ„äº‹é¡¹ï¼Œå› ä¸ºä¸å°‘é…ç½®çš„å€¼æ˜¯è¿è¥å¡«çš„ï¼Œå¥¹ä»¬å¯¹ value ä¸é‚£ä¹ˆæ•æ„Ÿï¼Œæ‰€ä»¥ä¼šå‡ºç° value ä¸ºç©ºï¼Œæˆ–è€…ä¸æ˜¯æƒ³è¦çš„ç±»å‹ï¼Œæˆ–è€…é…äº†å¼ å›¾ç‰‡ï¼Œä½†æ˜¯ä½“ç§¯è¶…å¤§ç­‰ï¼Œæœ‰å¯èƒ½é€ æˆå®¢æˆ·ç«¯ crash / OOM ç­‰å¼‚å¸¸è¡¨ç°ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯è¦æœ‰è¶³å¤Ÿå¼ºå¤§çš„å®¹é”™èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é€‰æ‹©åˆé€‚çš„-crash-å¹³å°&quot;&gt;é€‰æ‹©åˆé€‚çš„ Crash å¹³å°&lt;/h3&gt;
&lt;p&gt;Crash ä¼šç»™ç”¨æˆ·é€ æˆæå¤§çš„è´Ÿé¢ä½“éªŒï¼Œæ‰€ä»¥éœ€è¦ç»å¸¸å…³æ³¨ Crash æƒ…å†µï¼Œå°¤å…¶æ˜¯åˆšå‘ç‰ˆçš„é‚£æ®µæ—¶é—´ã€‚è¿™å— &lt;a href=&quot;http://fabric.io&quot;&gt;fabric&lt;/a&gt; åšçš„æ¯”è¾ƒå¥½ï¼Œåªæ˜¯ç”±äºæ˜¯å›½å¤–çš„æœåŠ¡ï¼Œä¼šæœ‰äº›è®¸æ•°æ®ä¸Šçš„ä¸¢å¤±ï¼Œä¸è¿‡é—®é¢˜å€’ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å›½å†…çš„ä¸€äº›æœåŠ¡ï¼Œå¦‚ buglyï¼Œæ¯•ç«Ÿè…¾è®¯è‡ªå·±ä¹Ÿåœ¨ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;code-review&quot;&gt;Code Review&lt;/h3&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯å®¹æ˜“å¿½è§†çš„ä¸€ç‚¹ï¼Œå½“ä¸šåŠ¡éœ€æ±‚å‹è¿‡æ¥æ—¶ï¼Œå…ˆæŠŠåŠŸèƒ½å®ç°äº†å†è¯´ï¼Œè€Œä¸”åœ¨åˆæœŸå¾€å¾€äººæ‰‹ä¹Ÿä¸å¤Ÿï¼ŒæŠ½ä¸å‡ºæ—¶é—´æ¥åš Code Reviewã€‚å¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œå¯ä»¥å…ˆ Review ä¸€äº›æ ¸å¿ƒçš„ç‚¹ï¼Œä¿è¯é‡è¦çš„ä»£ç æ˜¯ç»è¿‡ Review çš„ï¼Œä¸å¤ªé‡è¦çš„ä¸šåŠ¡ä»£ç å¯ä»¥å…ˆæ”¾æ”¾ï¼Œç­‰äººå‘˜å……è¶³åå†è¦†ç›–æ›´å¤§çš„èŒƒå›´ã€‚&lt;/p&gt;

&lt;p&gt;Code Review çš„ä¸»è¦ä½œç”¨æ˜¯ä¿éšœä»£ç è´¨é‡ï¼ŒåŒæ—¶ä¿ƒè¿›åŒæ–¹æˆé•¿ï¼Œä¸€ä¸ªæ‹…å¿ƒç‚¹æ˜¯è´¨é‡åä½çš„ä»£ç æ¯”ä¾‹å¦‚æœè¾ƒå¤§çš„è¯ï¼Œä¼šå½±å“å¼€å‘è€…çš„å¿ƒæƒ…ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ï¼Œæ—¥ç§¯æœˆç´¯å°±æˆäº†é‡é‡çš„ã€Œå†å²åŒ…è¢±ã€ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é€‰æ‹©åˆé€‚çš„å¼€å‘æ¨¡å¼&quot;&gt;é€‰æ‹©åˆé€‚çš„å¼€å‘æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;å¦‚æœæ˜¯ä½¿ç”¨ git æ¥åšæºç ç®¡ç†çš„è¯ï¼Œå¯ä»¥é‡‡ç”¨ &lt;a href=&quot;http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/&quot;&gt;flow&lt;/a&gt; æ¨¡å¼ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³å¤§éƒ¨åˆ†çš„éœ€æ±‚ï¼Œè€Œä¸”ä¸å°‘ git å·¥å…·ä¹Ÿå†…ç½®äº† flow çš„æ”¯æŒã€‚è¿™æ ·å½“éœ€è¦å¤„ç† feature / hotfix / å‘ç‰ˆç­‰åœºæ™¯æ—¶ï¼Œå°±ä¼šå¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æŒç»­é›†æˆ&quot;&gt;æŒç»­é›†æˆ&lt;/h3&gt;
&lt;p&gt;æŒç»­é›†æˆçš„ç›®çš„æ˜¯è®©äº§å“åœ¨å¿«é€Ÿè¿­ä»£çš„è¿‡ç¨‹ä¸­è¿˜èƒ½ä¿è¯è´¨é‡ï¼Œå½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¯ä»¥ç¬¬ä¸€æ—¶é—´è¢«æ£€æŸ¥å‡ºæ¥ï¼Œæ–¹ä¾¿ä¿®å¤ã€‚å¦‚æœæƒ³å·æ‡’çš„è¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æœåŠ¡ï¼Œå¦‚ &lt;a href=&quot;https://travis-ci.org/&quot;&gt;travis&lt;/a&gt;ï¼Œä¹Ÿå¯ä»¥è‡ªå·±åŸºäº Jenkins æ¥æ­ï¼ŒiOS çš„è¯ï¼Œé…åˆ fastlane æ•ˆæœä¼šæ›´å¥½ã€‚è‡ªå·±æ­çš„å¥½å¤„æ˜¯çµæ´»åº¦æ›´å¤§ï¼Œå¯ä»¥åŠ å…¥ä¸€äº›ä¸ªæ€§åŒ–éœ€æ±‚ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰æ‰“åŒ…å¹³å°çš„è¯ï¼Œè¿˜å¯ä»¥å®šæ—¶å‡ºä¸€ä¸ªåŒ…ï¼Œè¿™æ ·å½“å‘ç°æŸä¸ªåŠŸèƒ½ä½¿ç”¨èµ·æ¥æœ‰é—®é¢˜ï¼Œä»£ç ä¸Šåˆæ²¡ä»€ä¹ˆå¤´ç»ªæ—¶ï¼Œå¯ä»¥å¯¹æ¯”ä»¥å‰çš„åŒ…æ¥å®šä½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;bug-ç®¡ç†ç³»ç»Ÿ&quot;&gt;Bug ç®¡ç†ç³»ç»Ÿ&lt;/h3&gt;
&lt;p&gt;è¿™ä¸ª Bug åŒ…æ‹¬æµ‹è¯•é˜¶æ®µå’Œçº¿ä¸Šçš„ Bugï¼ŒBug ç®¡ç†å·¥å…·æœ‰å¾ˆå¤šï¼Œä½¿ç”¨åœ¨çº¿æœåŠ¡æˆ–è‡ªå·±æ­éƒ½å¯ä»¥ï¼Œä½†è¦æœ‰ï¼Œä¸ç„¶å¾ˆæœ‰å¯èƒ½å¿˜äº†è¿˜æœ‰å“ªäº›é—®é¢˜éœ€è¦ä¿®å¤ï¼Œå“ªäº›å·²ç»ä¿®å¤äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é¡¹ç›®ç®¡ç†å·¥å…·&quot;&gt;é¡¹ç›®ç®¡ç†å·¥å…·&lt;/h3&gt;
&lt;p&gt;åœ¨ App å¼€å‘åˆæœŸï¼Œäººå‘˜è¾ƒå°‘ï¼Œæ²Ÿé€šèµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ‰€ä»¥å¾ˆå¤šéœ€æ±‚å½“é¢å°±è¯´äº†ï¼Œä¸€äº›åŸå‹/è®¾è®¡å›¾å¯èƒ½ä¹Ÿæ˜¯ç›´æ¥ AirDrop è¿‡æ¥çš„ï¼Œè¿™æ ·æ•ˆç‡è‡ªç„¶é«˜ï¼Œä½†ä¸ä¾¿ç®¡ç†ã€‚æ¯”å¦‚æ²¡æœ‰ prdï¼Œäº§å“ã€å¼€å‘çš„ç†è§£å¯èƒ½ä¸ä¸€è‡´ï¼Œåˆ°å¤´æ¥å‘ç°åšçš„ä¸æ˜¯äº§å“æƒ³è¦çš„ï¼Œæˆ–è€…ä¸€äº›ç»†èŠ‚ä¸ç¬¦åˆè¦æ±‚ï¼›è®¾è®¡å›¾æœ‰æ›´æ–°ï¼Œä½†æ²¡æœ‰åŒæ­¥åˆ°æ‰€æœ‰çš„å¼€å‘ï¼›éœ€æ±‚æœ‰å˜æ›´ï¼Œä½†å½“æ—¶åœ¨ä¸“å¿ƒåšæŸä¸ª featureï¼Œå¯èƒ½å°±å¿˜äº†ï¼Œæˆ–è€…æ²¡æœ‰ç†è§£å…¨é¢ç­‰ã€‚æ‰€ä»¥æœ€å¥½è¿˜æ˜¯æœ‰ä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·æ¥ç»Ÿä¸€å¤„ç†ï¼Œå†ç»“åˆæ•æ·å¼€å‘ï¼Œé¡¹ç›®çš„è´¨é‡å’Œè¿›åº¦å°±å®¹æ˜“å¾—åˆ°ä¿éšœã€‚&lt;/p&gt;

&lt;h3 id=&quot;checklist&quot;&gt;Checklist&lt;/h3&gt;
&lt;p&gt;ä¸€ä¸ª App å‘å¸ƒä¸Šçº¿ä¹‹åï¼Œè¦ä¿è¯ä¸å‡ºå¤§çš„é—®é¢˜ï¼Œå°±è¦åœ¨å‘å¸ƒä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹ã€Œä¸€å®šä¸èƒ½å‡ºé—®é¢˜ã€çš„ç‚¹æ˜¯å¦æ­£å¸¸ï¼Œå°±åƒé£æœºèµ·é£ä¹‹å‰ä¸€å®šä¼šèµ°ä¸€é checklist ä¸€æ ·ã€‚æ¯”å¦‚æ¨é€æ˜¯å¦æ­£å¸¸ã€log æ˜¯å¦å…³é—­ã€ç»„ä»¶ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®ç­‰ï¼Œéšç€ App åŠŸèƒ½çš„å¢åŠ ï¼Œè¿™ä¸ª list ä¹Ÿä¼šè¶Šæ¥è¶Šé•¿ï¼Œè™½ç„¶è¿‡ä¸€é checklist ä¼šèŠ±è´¹äº›æ—¶é—´ï¼Œä½†è·Ÿæ”¶ç›Šç›¸æ¯”è¿˜æ˜¯å€¼å¾—çš„ã€‚&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;ä»¥ä¸Šè¿™äº›ç‚¹æ˜¯åœ¨æ„Ÿå—ä¸è¿‡ä¸åŒé‡çº§çš„ App å¼€å‘åæ•´ç†çš„ï¼Œè‚¯å®šè¿˜ä¼šæœ‰ç–æ¼ï¼Œä¸è¿‡å¦‚æœçœŸèƒ½åšåˆ°è¿™äº›ï¼Œå°±å·²ç»å¾ˆä¸é”™äº†ï¼Œè‡³å°‘å½“æœ‰æ–°äººè¿›æ¥æ—¶ï¼Œä¸ä¼šèƒŒä¸Šæ²‰é‡çš„ã€Œå†å²åŒ…è¢±ã€ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>è˜‘è‡è¡— App çš„ç»„ä»¶åŒ–ä¹‹è·¯Â·ç»­</title>
   <link href="http://limboy.me/tech/2016/03/14/mgj-components-continued.html"/>
   <updated>2016-03-14T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/03/14/mgj-components-continued</id>
   <content type="html">&lt;p&gt;å‰å‡ å¤©åœ¨ã€Œç§»åŠ¨å­¦ä¹ åˆ†äº«ç¾¤ã€åˆ†äº«äº†å…³äºè˜‘è‡è¡—ç»„ä»¶åŒ–æ–¹é¢çš„ä¸€ç‚¹ç»éªŒï¼Œç”±äºæ—¶é—´å’Œæ–‡å­—æè¿°æ–¹é¢çš„é™åˆ¶ï¼Œå¾ˆå¤šä¸œè¥¿è¡¨è¿°çš„ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè®©ä¸€äº›åŒå­¦äº§ç”Ÿäº†ç–‘æƒ‘ï¼Œcasatwyè€å¸ˆä¹Ÿå†™äº†ç¯‡&lt;a href=&quot;http://casatwy.com/iOS-Modulization.html&quot;&gt;æ–‡ç« &lt;/a&gt;æ¥çº æ­£å…¶ä¸­çš„ä¸€äº›å®ç°ï¼Œçœ‹å®Œä¹‹åç¡®å®æœ‰ä¸å°‘å¯å‘ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç»Ÿä¸€çš„è°ƒç”¨å®ç°&quot;&gt;ç»Ÿä¸€çš„è°ƒç”¨å®ç°&lt;/h4&gt;
&lt;p&gt;å°†ã€ŒURL è°ƒç”¨ã€å’Œã€Œç»„ä»¶é—´è°ƒç”¨ã€é€šè¿‡ runtime è¾¾åˆ°ç»Ÿä¸€ï¼Œé€šè¿‡ prefix çš„æ–¹å¼æ¥é¿å…å®‰å…¨ä¸Šçš„ä¸€äº›æ¼æ´ã€‚çœ‹èµ·æ¥ç¡®å®ä¼šèˆ’æœäº›ï¼Œä¹Ÿæ¯”è¾ƒçµæ´»ã€‚&lt;/p&gt;

&lt;h4 id=&quot;é€šè¿‡-category-æ¥ç»Ÿä¸€ç»„ä»¶å¯¹å¤–æš´éœ²çš„æ¥å£&quot;&gt;é€šè¿‡ Category æ¥ç»Ÿä¸€ç»„ä»¶å¯¹å¤–æš´éœ²çš„æ¥å£&lt;/h4&gt;
&lt;p&gt;æ”¯æŒ &lt;code class=&quot;highlighter-rouge&quot;&gt;openURL:&lt;/code&gt; ä½†æœ€ç»ˆè¿˜æ˜¯èµ°çš„ target-actionï¼Œè·Ÿå†…éƒ¨è°ƒç”¨æ— å·®åˆ«ã€‚
è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç›®å‰æœ‰å¾…æå‡çš„ç‚¹ï¼Œæƒ³çŸ¥é“æŸä¸ªç»„ä»¶æ”¯æŒå“ªäº› URL æˆ– å“ªäº› Protocol ä¸å¤Ÿæ–¹ä¾¿ï¼ŒURL çš„å‚æ•°ä¼ é€’ä¹Ÿæ˜¯ä¸ªé—®é¢˜ï¼Œå°†æ¥ URL å‘ç”Ÿå˜åŠ¨çš„è¯ï¼Œè°ƒæ•´èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ã€‚åç»­ä¼šåœ¨è¿™å—å†åŠ å¼ºä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;å½“åˆå†³å®šä½¿ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;openURL:&lt;/code&gt; æ¥åšé¡µé¢é—´çš„è·³è½¬ï¼Œè€Œä¸æ˜¯æ–¹æ³•è°ƒç”¨ï¼Œä¸»è¦æ˜¯è€ƒè™‘åˆ°æˆ‘ä»¬çš„å¤§éƒ¨åˆ†åœºæ™¯éƒ½å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è§£å†³ï¼Œå› æ­¤å°±è¿™ä¹ˆå®šäº†ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;openURL:&lt;/code&gt; æ›´åƒ Android é‡Œçš„ ã€Œéšå¼ Intentã€ï¼Œä¸å…³å¿ƒè°æ¥å¤„ç†è¿™ä¸ª URLï¼Œç”±ç³»ç»Ÿï¼ˆMGJRouterï¼‰æ¥å†³å®šã€‚è€Œæ–¹æ³•è°ƒç”¨æ›´åƒã€Œæ˜¾å¼ Intentã€æˆ–è€… RPCï¼Œæ˜ç¡®åœ°çŸ¥é“åº”è¯¥ç”±è°æ¥å¤„ç†ã€‚å‰è€…çš„å¥½å¤„æ˜¯å¯ä»¥æ›´å°‘åœ°å…³å¿ƒä¸šåŠ¡é€»è¾‘ï¼Œåè€…çš„å¥½å¤„æ˜¯å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®Œæˆå‚æ•°ä¼ é€’ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ›´æ˜ç¡®çš„è¡¨è¿°&quot;&gt;æ›´æ˜ç¡®çš„è¡¨è¿°&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;openURL&lt;/code&gt; åªæ˜¯é¡µé¢é—´çš„è°ƒç”¨æ–¹å¼&lt;/li&gt;
  &lt;li&gt;ç»„ä»¶é—´çš„è°ƒç”¨é€šè¿‡ protocol æ¥å®ç°&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ¯ä¸ªç»„ä»¶éƒ½æœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Entry&lt;/code&gt;ï¼Œè¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Entry&lt;/code&gt;ï¼Œä¸»è¦åšäº†ä¸‰ä»¶äº‹&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ³¨å†Œè¿™ä¸ªç»„ä»¶å…³å¿ƒçš„ URL&lt;/li&gt;
  &lt;li&gt;æ³¨å†Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿè¢«è°ƒç”¨çš„æ–¹æ³•/å±æ€§&lt;/li&gt;
  &lt;li&gt;åœ¨ App ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µåšä¸åŒçš„å“åº”&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;æ³¨å†Œè¿™ä¸ªç»„ä»¶å…³å¿ƒçš„-url&quot;&gt;æ³¨å†Œè¿™ä¸ªç»„ä»¶å…³å¿ƒçš„ URL&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;/image/MGJRouter.png&quot; alt=&quot;MGJRoute&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJRouter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;registerURLPattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;mgj://detail?id=:id&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routerParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;routerParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// create view controller with id
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// push view controller
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;URL çš„æ³¨å†Œä¼šæœ‰å¯¹åº”çš„ blockï¼Œæ‹¿åˆ°è¿™ä¸ª URL åï¼Œæƒ³æ€ä¹ˆæŠ˜è…¾å°±æ€ä¹ˆæŠ˜è…¾ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æ³¨å†Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿè¢«è°ƒç”¨çš„æ–¹æ³•å±æ€§&quot;&gt;æ³¨å†Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿè¢«è°ƒç”¨çš„æ–¹æ³•/å±æ€§&lt;/h4&gt;
&lt;p&gt;å½“æœ‰ä¸€äº›åœºæ™¯ä¸é€‚åˆç”¨ URL çš„æ–¹å¼æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡æ³¨å†Œ protocol æ¥å®ç°&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/ModuleManager.png&quot; alt=&quot;ModuleManage&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[ModuleManager registerClass:ClassA forProtocol:ProtocolA]&lt;/code&gt; çš„ç»“æœå°±æ˜¯åœ¨ MM å†…éƒ¨ç»´æŠ¤çš„ dict é‡Œæ–°åŠ äº†ä¸€ä¸ªæ˜ å°„å…³ç³»ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[ModuleManager classForProtocol:ProtocolA]&lt;/code&gt; çš„è¿”å›ç»“æœå°±æ˜¯ä¹‹å‰åœ¨ MM å†…éƒ¨ dict é‡Œ protocol å¯¹åº”çš„ classï¼Œä½¿ç”¨æ–¹ä¸éœ€è¦å…³å¿ƒè¿™ä¸ª class æ˜¯ä¸ªä»€ä¹ˆä¸œä¸œï¼Œåæ­£å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;ProtocolA&lt;/code&gt; åè®®ï¼Œæ‹¿æ¥ç”¨å°±è¡Œã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦æœ‰ä¸€ä¸ªå…¬å…±çš„åœ°æ–¹æ¥å®¹çº³è¿™äº› public protoclï¼Œä¹Ÿå°±æ˜¯å›¾ä¸­çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;PublicProtocl.h&lt;/code&gt;&lt;/p&gt;

&lt;h4 id=&quot;åœ¨-app-ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µåšä¸åŒçš„å“åº”&quot;&gt;åœ¨ App ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µåšä¸åŒçš„å“åº”&lt;/h4&gt;
&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æœ‰æåˆ°ï¼Œè¿™é‡Œç®€å•è¯´ä¸‹ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;ModuleEntry&lt;/code&gt;ï¼Œå®ç°æŸä¸ªç‰¹å®šçš„åè®®(è¯¥åè®®ç»§æ‰¿è‡ª &lt;code class=&quot;highlighter-rouge&quot;&gt;UIApplicationDelegate&lt;/code&gt; )ï¼Œç„¶åå®ç°å¯¹åº”çš„æ–¹æ³•å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é’ˆå¯¹casatwyé‚£ç¯‡æ–‡ç« çš„ä¸€äº›å›åº”&quot;&gt;é’ˆå¯¹casatwyé‚£ç¯‡æ–‡ç« çš„ä¸€äº›å›åº”&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;å•çº¯ä»¥openURLçš„æ–¹å¼æ˜¯æ— æ³•èƒœä»»è®©ä¸€ä¸ªAppå»å®æ–½ç»„ä»¶åŒ–æ¶æ„çš„&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åŒæ„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¹¶ä¸åªæœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;openURL&lt;/code&gt; ä¸€ç§æ–¹å¼&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ ¹æœ¬æ— æ³•è¡¨è¾¾éå¸¸è§„å¯¹è±¡&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å•çº¯åœ°é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;openURL&lt;/code&gt; ç¡®å®ä¸å¤ªå¥½è¡¨è¾¾ï¼Œä½†æˆ‘ä»¬å¹¶ä¸åªæœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;openURL&lt;/code&gt; ä¸€ç§æ–¹å¼&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨å†ŒURLçš„ç›®çš„å…¶å®æ˜¯ä¸€ä¸ªæœåŠ¡å‘ç°çš„è¿‡ç¨‹ï¼Œåœ¨iOSé¢†åŸŸä¸­ï¼ŒæœåŠ¡å‘ç°çš„æ–¹å¼æ˜¯ä¸éœ€è¦é€šè¿‡ä¸»åŠ¨æ³¨å†Œçš„ï¼Œä½¿ç”¨runtimeå°±å¯ä»¥äº†ã€‚å¦å¤–ï¼Œæ³¨å†Œéƒ¨åˆ†çš„ä»£ç çš„ç»´æŠ¤æ˜¯ä¸€ä¸ªç›¸å¯¹éº»çƒ¦çš„äº‹æƒ…ï¼Œæ¯ä¸€æ¬¡æ”¯æŒæ–°è°ƒç”¨æ—¶ï¼Œéƒ½è¦å»ç»´æŠ¤ä¸€æ¬¡æ³¨å†Œåˆ—è¡¨ã€‚å¦‚æœæœ‰è°ƒç”¨è¢«å¼ƒç”¨äº†ï¼Œæ˜¯ç»å¸¸ä¼šå¿˜è®°åˆ é¡¹ç›®çš„ã€‚runtimeç”±äºä¸å­˜åœ¨æ³¨å†Œè¿‡ç¨‹ï¼Œé‚£å°±ä¹Ÿä¸ä¼šäº§ç”Ÿç»´æŠ¤çš„æ“ä½œï¼Œç»´æŠ¤æˆæœ¬å°±é™ä½äº†ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç”±äºé€šè¿‡runtimeåšåˆ°äº†æœåŠ¡çš„è‡ªåŠ¨å‘ç°ï¼Œæ‹“å±•è°ƒç”¨æ¥å£çš„ä»»åŠ¡å°±ä»…åœ¨äºå„è‡ªçš„æ¨¡å—ï¼Œä»»ä½•ä¸€æ¬¡æ–°æ¥å£æ·»åŠ ï¼Œæ–°ä¸šåŠ¡æ·»åŠ ï¼Œéƒ½ä¸å¿…å»ä¸»å·¥ç¨‹åšæ“ä½œï¼Œååˆ†é€æ˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°½ç®¡é€šè¿‡ runtime å¯ä»¥åšåˆ°è¿™äº›ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯è¦é€šè¿‡ç»´æŠ¤ &lt;code class=&quot;highlighter-rouge&quot;&gt;Category&lt;/code&gt; æ¥æš´éœ²æ–°å¢çš„ Target-Actionï¼Œæ‰€ä»¥ runtime è™½ç„¶ä¸å­˜åœ¨æ³¨å†Œè¿‡ç¨‹ï¼Œä½†å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œè¿˜æ˜¯ä¼šæœ‰æ³¨å†Œè¿‡ç¨‹ï¼Œè¿˜æ˜¯éœ€è¦å»ç»´æŠ¤ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ²¡æœ‰æ‹†åˆ†è¿œç¨‹è°ƒç”¨å’Œæœ¬åœ°é—´è°ƒç”¨&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å…¶å®æ˜¯åˆ†ä¸ºã€Œç»„ä»¶é—´è°ƒç”¨ã€å’Œã€Œé¡µé¢é—´è·³è½¬ã€ä¸¤ä¸ªç»´åº¦ï¼Œåªè¦ app å“åº”æŸä¸ª URLï¼Œæ— è®ºæ˜¯ app å†…è¿˜æ˜¯ app å¤–éƒ½å¯ä»¥ï¼Œè€Œã€Œç»„ä»¶é—´ã€è°ƒç”¨èµ°çš„å®Œå…¨æ˜¯å¦ä¸€æ¡è·¯ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šæœ‰å®‰å…¨ä¸Šçš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä»¥è¿œç¨‹è°ƒç”¨çš„æ–¹å¼ä¸ºæœ¬åœ°é—´è°ƒç”¨æä¾›æœåŠ¡&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åŒä¸Š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æœ¬åœ°é—´è°ƒç”¨æ— æ³•ä¼ é€’éå¸¸è§„å‚æ•°ï¼Œå¤æ‚å‚æ•°çš„ä¼ é€’æ–¹å¼éå¸¸ä¸‘é™‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;åŒä¸Šï¼Œä½¿ç”¨ Protocol&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¿…é¡»è¦åœ¨ app å¯åŠ¨æ—¶æ³¨å†Œ URL å“åº”è€…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ˜¯çš„ï¼Œå°±è˜‘è‡è¡—çš„æ–¹æ¡ˆæ¥è¯´ï¼Œè¿™æ­¥ä¸å¯é¿å…ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è¿™ä¸ªä¸å¿…è¦çš„æ“ä½œä¼šå¯¼è‡´ä¸å¿…è¦çš„ç»´æŠ¤æˆæœ¬&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç»´æŠ¤åªæ˜¯åœ¨ç»„ä»¶å†…éƒ¨åšè°ƒæ•´ï¼Œå¹¶ä¸éœ€è¦åœ¨ä¸»å·¥ç¨‹é‡Œåšä¿®æ”¹ã€‚å¦‚æœé‡‡ç”¨ Category çš„æ–¹å¼ï¼Œå¥½å¤„æ˜¯ä¸ç”¨åœ¨å¯åŠ¨æ—¶æ³¨å†Œï¼Œä½†å½“ç»„ä»¶çš„æ¥å£æœ‰å˜åŠ¨æ—¶ï¼Œä¾ç„¶è¦ç»´æŠ¤ Categoryï¼Œè¿™ä¸ªæˆæœ¬æ˜¯å…ä¸äº†çš„ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ–°å¢ç»„ä»¶åŒ–çš„è°ƒç”¨è·¯å¾„æ—¶ï¼Œè˜‘è‡è¡—çš„æ“ä½œç›¸å¯¹å¤æ‚
åœ¨æœ¬æ–‡ç»™å‡ºçš„ç»„ä»¶åŒ–æ–¹æ¡ˆä¸­ï¼Œå“åº”è€…å”¯ä¸€è¦åšçš„äº‹æƒ…å°±æ˜¯æä¾›Targetå’ŒActionï¼Œå¹¶ä¸éœ€è¦å†åšå…¶å®ƒçš„äº‹æƒ…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æä¾›äº† Target-Action ä¹‹åï¼Œè¿˜æ˜¯è¦åœ¨ Category é‡Œæ·»åŠ ä¸€ä¸ª wrapper çš„å§?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ²¡æœ‰é’ˆå¯¹ target å±‚åšå°è£…
è¿™ç§åšæ³•ä½¿å¾—æ‰€æœ‰çš„è·¨ç»„ä»¶è°ƒç”¨è¯·æ±‚ç›´æ¥hitåˆ°ä¸šåŠ¡æ¨¡å—ï¼Œä¸šåŠ¡æ¨¡å—å¿…ç„¶å› æ­¤å˜å¾—è‡ƒè‚¿éš¾ä»¥ç»´æŠ¤ï¼Œå±äºä¾µå…¥å¼æ¶æ„ã€‚åº”è¯¥å°†åŸæœ¬å±äºè°ƒç”¨ç›¸åº”çš„éƒ¨åˆ†æ‹¿å‡ºæ¥æ”¾åœ¨target-actionä¸­ï¼Œæ‰èƒ½å°½å¯èƒ½ä¿è¯ä¸å°†æ— å…³ä»£ç ä¾µå…¥åˆ°åŸæœ‰ä¸šåŠ¡ç»„ä»¶ä¸­ï¼Œæ‰èƒ½ä¿è¯ä¸šåŠ¡ç»„ä»¶æœªæ¥çš„è¿ç§»å’Œä¿®æ”¹ä¸å—ç»„ä»¶è°ƒç”¨çš„å½±å“ï¼Œä»¥åŠé™ä½ä¸ºé¡¹ç›®çš„ç»„ä»¶åŒ–å®æ–½è€Œå¸¦æ¥çš„æ—¶é—´æˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ã€Œå°†åŸæœ¬å±äºè°ƒç”¨ç›¸åº”çš„éƒ¨åˆ†æ‹¿å‡ºæ¥æ”¾åœ¨target-actionä¸­ã€å¹¶ä¸æ˜¯å”¯ä¸€å¯è¡Œçš„æ–¹å¼ï¼Œä½¿ç”¨ Protocol/URL æ³¨å†Œä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;casatwy çš„ä¸€äº›æ€è·¯å’Œæ€è€ƒé—®é¢˜çš„è§’åº¦æŒºä¸é”™çš„ï¼Œä¹Ÿä»ä»–çš„æ–‡ç« ä¸­æ”¶è·äº†ä¸å°‘ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½æŠŠä¹‹å‰æ¨¡ç³Šçš„ä¸€äº›è§‚å¿µè¯´å¾—è¶³å¤Ÿæ¸…æ¥šï¼Œè¿˜æœ‰é—®é¢˜çš„è¯æ¬¢è¿ç»§ç»­äº¤æµï¼šï¼‰&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>è˜‘è‡è¡— App çš„ç»„ä»¶åŒ–ä¹‹è·¯</title>
   <link href="http://limboy.me/tech/2016/03/10/mgj-components.html"/>
   <updated>2016-03-10T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2016/03/10/mgj-components</id>
   <content type="html">&lt;p&gt;åœ¨ç»„ä»¶åŒ–ä¹‹å‰ï¼Œè˜‘è‡è¡— App çš„ä»£ç éƒ½æ˜¯åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œå¼€å‘çš„ï¼Œåœ¨äººæ¯”è¾ƒå°‘ï¼Œä¸šåŠ¡å‘å±•ä¸æ˜¯å¾ˆå¿«çš„æ—¶å€™ï¼Œè¿™æ ·æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œèƒ½ä¸€å®šç¨‹åº¦åœ°ä¿è¯å¼€å‘æ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;æ…¢æ…¢åœ°ä»£ç é‡å¤šäº†èµ·æ¥ï¼Œå¼€å‘äººå‘˜ä¹Ÿå¤šäº†èµ·æ¥ï¼Œä¸šåŠ¡å‘å±•ä¹Ÿå¿«äº†èµ·æ¥ï¼Œè¿™æ—¶å•ä¸€å·¥ç¨‹å¼€å‘æ¨¡å¼å°±ä¼šæ˜¾éœ²å‡ºä¸€äº›å¼Šç«¯&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è€¦åˆæ¯”è¾ƒä¸¥é‡ï¼ˆå› ä¸ºæ²¡æœ‰æ˜ç¡®çš„çº¦æŸï¼Œã€Œç»„ä»¶ã€é—´å¼•ç”¨çš„ç°è±¡ä¼šæ¯”è¾ƒå¤šï¼‰&lt;/li&gt;
  &lt;li&gt;å®¹æ˜“å‡ºç°å†²çªï¼ˆå°¤å…¶æ˜¯ä½¿ç”¨ Xibï¼Œè¿˜æœ‰å°±æ˜¯ Xcode Projectï¼Œè™½è¯´æœ‰&lt;a href=&quot;https://github.com/truebit/xUnique&quot;&gt;è„šæœ¬&lt;/a&gt;å¯ä»¥æ”¹å–„ï¼‰&lt;/li&gt;
  &lt;li&gt;ä¸šåŠ¡æ–¹çš„å¼€å‘æ•ˆç‡ä¸å¤Ÿé«˜ï¼ˆåªå…³å¿ƒè‡ªå·±çš„ç»„ä»¶ï¼Œå´è¦ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ï¼Œä¸å…¶ä»–ä¸ç›¸å¹²çš„ä»£ç ç³…åˆåœ¨ä¸€èµ·ï¼‰&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±é‡‡å–äº†ã€Œç»„ä»¶åŒ–ã€ç­–ç•¥ã€‚å®ƒèƒ½å¸¦æ¥è¿™äº›å¥½å¤„&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;åŠ å¿«ç¼–è¯‘é€Ÿåº¦ï¼ˆä¸ç”¨ç¼–è¯‘ä¸»å®¢é‚£ä¸€å¤§å¨ä»£ç äº†ï¼‰&lt;/li&gt;
  &lt;li&gt;è‡ªç”±é€‰æ‹©å¼€å‘å§¿åŠ¿ï¼ˆMVC / MVVM / FRPï¼‰&lt;/li&gt;
  &lt;li&gt;æ–¹ä¾¿ QA æœ‰é’ˆå¯¹æ€§åœ°æµ‹è¯•&lt;/li&gt;
  &lt;li&gt;æé«˜ä¸šåŠ¡å¼€å‘æ•ˆç‡&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…ˆæ¥çœ‹ä¸‹ï¼Œç»„ä»¶åŒ–ä¹‹åçš„ä¸€ä¸ªå¤§æ¦‚æ¶æ„&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575533415332.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ã€Œç»„ä»¶åŒ–ã€é¡¾åæ€ä¹‰å°±æ˜¯æŠŠä¸€ä¸ªå¤§çš„ App æ‹†æˆä¸€ä¸ªä¸ªå°çš„ç»„ä»¶ï¼Œç›¸äº’ä¹‹é—´ä¸ç›´æ¥å¼•ç”¨ã€‚é‚£å¦‚ä½•åšå‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;å®ç°æ–¹å¼&quot;&gt;å®ç°æ–¹å¼&lt;/h3&gt;

&lt;h4 id=&quot;ç»„ä»¶é—´é€šä¿¡&quot;&gt;ç»„ä»¶é—´é€šä¿¡&lt;/h4&gt;
&lt;p&gt;ä»¥ iOS ä¸ºä¾‹ï¼Œç”±äºä¹‹å‰å°±æ˜¯é‡‡ç”¨çš„ URL è·³è½¬æ¨¡å¼ï¼Œç†è®ºä¸Šé¡µé¢ä¹‹é—´çš„è·³è½¬åªéœ€ open ä¸€ä¸ª URL å³å¯ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œåªè¦å®šä¹‰ã€Œæ”¯æŒå“ªäº› URLã€å³å¯ï¼Œæ¯”å¦‚è¯¦æƒ…é¡µï¼Œå¤§æ¦‚å¯ä»¥è¿™ä¹ˆåšçš„&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJRouter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;registerURLPattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;mgj://detail?id=:id&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routerParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;routerParameters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// create view controller with id
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// push view controller
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;é¦–é¡µåªéœ€è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;[MGJRouter openURL:@&quot;mgj://detail?id=404&quot;]&lt;/code&gt; å°±å¯ä»¥æ‰“å¼€ç›¸åº”çš„è¯¦æƒ…é¡µã€‚&lt;/p&gt;

&lt;p&gt;é‚£é—®é¢˜åˆæ¥äº†ï¼Œæˆ‘æ€ä¹ˆçŸ¥é“æœ‰å“ªäº›å¯ç”¨çš„ URLï¼Ÿä¸ºæ­¤ï¼Œæˆ‘ä»¬åšäº†ä¸€ä¸ªåå°ä¸“é—¨æ¥ç®¡ç†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575445324533.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åå¯ä»¥æŠŠè¿™äº›çŸ­é“¾ç”Ÿæˆä¸åŒå¹³å°æ‰€éœ€çš„æ–‡ä»¶ï¼ŒiOS å¹³å°ç”Ÿæˆ .{h,m} æ–‡ä»¶ï¼ŒAndroid å¹³å°ç”Ÿæˆ .java æ–‡ä»¶ï¼Œå¹¶æ³¨å…¥åˆ°é¡¹ç›®ä¸­ã€‚è¿™æ ·å¼€å‘äººå‘˜åªéœ€åœ¨é¡¹ç›®ä¸­æ‰“å¼€è¯¥æ–‡ä»¶å°±çŸ¥é“æ‰€æœ‰çš„å¯ç”¨ URL äº†ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰è¿˜æœ‰ä¸€å—æ²¡æœ‰åšï¼Œå°±æ˜¯å‚æ•°è¿™å—ï¼Œè™½ç„¶æè¿°äº†çŸ­é“¾ï¼Œä½†çœŸæƒ³è¦ç”Ÿæˆå®Œæ•´çš„ URLï¼Œè¿˜éœ€è¦çŸ¥é“å¦‚ä½•ä¼ å‚æ•°ï¼Œè¿™ä¸ªæ­£åœ¨å¼€å‘ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ç§æƒ…å†µä¼šç¨å¾®éº»çƒ¦ç‚¹ï¼Œå°±æ˜¯ã€Œç»„ä»¶Aã€è¦è°ƒç”¨ã€Œç»„ä»¶Bã€çš„æŸä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚åœ¨å•†å“è¯¦æƒ…é¡µè¦å±•ç¤ºè´­ç‰©è½¦çš„å•†å“æ•°é‡ï¼Œå°±æ¶‰åŠåˆ°å‘è´­ç‰©è½¦ç»„ä»¶æ‹¿æ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;ç±»ä¼¼è¿™ç§åŒæ­¥è°ƒç”¨ï¼ŒiOS ä¹‹å‰é‡‡ç”¨äº†æ¯”è¾ƒç®€å•çš„æ–¹æ¡ˆï¼Œè¿˜æ˜¯ä¾æ‰˜äº &lt;code class=&quot;highlighter-rouge&quot;&gt;MGJRouter&lt;/code&gt;ï¼Œä¸è¿‡æ·»åŠ äº†æ–°çš„æ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;- (id)objectForURL:&lt;/code&gt;ï¼Œæ³¨å†Œæ—¶ä¹Ÿä½¿ç”¨æ–°çš„æ–¹æ³•è¿›è¡Œæ³¨å†Œ&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJRouter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;registerURLPattern&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;mgj://cart/ordercount&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toObjectHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;routerParamters&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// do some calculation
&lt;/span&gt;	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨æ—¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSNumber *orderCount = [MGJRouter objectForURL:@&quot;mgj://cart/ordercount&quot;]&lt;/code&gt; è¿™æ ·å°±æ‹¿åˆ°äº†è´­ç‰©è½¦é‡Œçš„å•†å“æ•°ã€‚&lt;/p&gt;

&lt;p&gt;ç¨å¾®å¤æ‚ä½†æ›´å…·é€šç”¨æ€§çš„æ–¹æ³•æ˜¯ä½¿ç”¨ã€Œåè®®ã€ &amp;lt;-&amp;gt; ã€Œç±»ã€ç»‘å®šçš„æ–¹å¼ï¼Œè¿˜æ˜¯ä»¥è´­ç‰©è½¦ä¸ºä¾‹ï¼Œè´­ç‰©è½¦ç»„ä»¶å¯ä»¥æä¾›è¿™ä¹ˆä¸ª Protocol&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MGJCart&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSInteger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°é€šè¿‡åè®®å¯ä»¥ç›´æ¥æŒ‡å®šè¿”å›çš„æ•°æ®ç±»å‹ã€‚ç„¶ååœ¨è´­ç‰©è½¦ç»„ä»¶å†…å†æ–°å»ºä¸ªç±»å®ç°è¿™ä¸ªåè®®ï¼Œå‡è®¾è¿™ä¸ªç±»åä¸º&lt;code class=&quot;highlighter-rouge&quot;&gt;MGJCartImpl&lt;/code&gt;ï¼Œæ¥ç€å°±å¯ä»¥æŠŠå®ƒä¸åè®®å…³è”èµ·æ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;registerClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCartImpl&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forProtocol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MGJCart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;/code&gt;ï¼Œå¯¹äºä½¿ç”¨æ–¹æ¥è¯´ï¼Œè¦æ‹¿åˆ°è¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;MGJCartImpl&lt;/code&gt;ï¼Œéœ€è¦è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;classForProtocol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MGJCart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt;&lt;/code&gt;ã€‚æ‹¿åˆ°ä¹‹åå†è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;+ (NSInteger)orderCount&lt;/code&gt; å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆï¼Œè¿™ä¸ªåè®®æ”¾åœ¨å“ªé‡Œæ¯”è¾ƒåˆé€‚å‘¢ï¼Ÿå¦‚æœè·Ÿç»„ä»¶æ”¾åœ¨ä¸€èµ·ï¼Œä½¿ç”¨æ—¶è¿˜æ˜¯è¦å…ˆå¼•å…¥ç»„ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„ç»„ä»¶å°±ä¼šæ¯”è¾ƒéº»çƒ¦äº†ã€‚æ‰€ä»¥æˆ‘ä»¬æŠŠè¿™äº›å…¬å…±çš„åè®®ç»Ÿä¸€æ”¾åˆ°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;PublicProtocolDomain.h&lt;/code&gt; ä¸‹ï¼Œåˆ°æ—¶åªä¾èµ–è¿™ä¸€ä¸ªæ–‡ä»¶å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;Android ä¹Ÿæ˜¯é‡‡ç”¨ç±»ä¼¼çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†&quot;&gt;ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†&lt;/h4&gt;
&lt;p&gt;ç†æƒ³ä¸­çš„ç»„ä»¶å¯ä»¥å¾ˆæ–¹ä¾¿åœ°é›†æˆåˆ°ä¸»å®¢ä¸­ï¼Œå¹¶ä¸”æœ‰è·Ÿ &lt;code class=&quot;highlighter-rouge&quot;&gt;AppDelegate&lt;/code&gt; ä¸€è‡´çš„å›è°ƒæ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;ModuleManager&lt;/code&gt; åšçš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆæ¥çœ‹çœ‹ç°åœ¨çš„å…¥å£æ–¹æ³•&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didFinishLaunchingWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;launchOptions&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJApp&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;startApp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadModuleFromPlist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSBundle&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mainBundle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pathForResource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;modules&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ofType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;plist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;allModules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleProtocol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;respondsToSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didFinishLaunchingWithOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;launchOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;trackLaunchTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å…¶ä¸­ &lt;code class=&quot;highlighter-rouge&quot;&gt;[MGJApp startApp]&lt;/code&gt; ä¸»è¦è´Ÿè´£ä¸€äº› SDK çš„åˆå§‹åŒ–ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;[self trackLaunchTime]&lt;/code&gt; æ˜¯æˆ‘ä»¬æ‰“çš„ä¸€ä¸ªç‚¹ï¼Œç”¨æ¥ç›‘æµ‹ä» &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; æ–¹æ³•å¼€å§‹åˆ°å…¥å£æ–¹æ³•è°ƒç”¨ç»“æŸèŠ±äº†å¤šé•¿æ—¶é—´ã€‚å…¶ä»–çš„éƒ½ç”± &lt;code class=&quot;highlighter-rouge&quot;&gt;ModuleManager&lt;/code&gt; æå®šï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;loadModuleFromPlist:pathForResource:&lt;/code&gt; æ–¹æ³•ä¼šè¯»å– bundle é‡Œçš„ä¸€ä¸ª plist æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹å¤§æ¦‚æ˜¯è¿™æ ·çš„&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575489295366.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;Module&lt;/code&gt; éƒ½å®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;ModuleProtocol&lt;/code&gt;ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;- (BOOL)applicaiton:didFinishLaunchingWithOptions:&lt;/code&gt; æ–¹æ³•ï¼Œå¦‚æœå®ç°äº†çš„è¯ï¼Œå°±ä¼šè¢«è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç³»ç»Ÿçš„ä¸€äº›äº‹ä»¶ä¼šæœ‰é€šçŸ¥ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;applicationDidBecomeActive&lt;/code&gt; ä¼šæœ‰å¯¹åº”çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;UIApplicationDidBecomeActiveNotification&lt;/code&gt;ï¼Œç»„ä»¶å¦‚æœè¦åšå“åº”çš„è¯ï¼Œåªéœ€ç›‘å¬è¿™ä¸ªç³»ç»Ÿé€šçŸ¥å³å¯ã€‚ä½†ä¹Ÿæœ‰ä¸€äº›äº‹ä»¶æ˜¯æ²¡æœ‰é€šçŸ¥çš„ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;- application:didRegisterUserNotificationSettings:&lt;/code&gt;ï¼Œè¿™æ—¶ç»„ä»¶å¦‚æœä¹Ÿè¦åšç‚¹äº‹æƒ…ï¼Œæ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ³•æ˜¯åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;AppDelegate&lt;/code&gt; çš„å„ä¸ªæ–¹æ³•é‡Œï¼Œæ‰‹åŠ¨è°ƒä¸€éç»„ä»¶çš„å¯¹åº”çš„æ–¹æ³•ï¼Œå¦‚æœæœ‰å°±æ‰§è¡Œã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIApplication&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didRegisterForRemoteNotificationsWithDeviceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;deviceToken&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modules&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;allModules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ModuleProtocol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;respondsToSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_cmd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;application&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;application&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didRegisterForRemoteNotificationsWithDeviceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deviceToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;å£³å·¥ç¨‹&quot;&gt;å£³å·¥ç¨‹&lt;/h4&gt;
&lt;p&gt;æ—¢ç„¶å·²ç»æ‹†å‡ºå»äº†ï¼Œé‚£æ‹†å‡ºå»çš„ç»„ä»¶æ€»å¾—æœ‰ä¸ªè½½ä½“ï¼Œè¿™ä¸ªè½½ä½“å°±æ˜¯å£³å·¥ç¨‹ï¼Œå£³å·¥ç¨‹ä¸»è¦åŒ…å«ä¸€äº›åŸºç¡€ç»„ä»¶å’Œä¸šåŠ¡SDKï¼Œè¿™ä¹Ÿæ˜¯ä¸»å·¥ç¨‹åŒ…å«çš„ä¸€äº›å†…å®¹ï¼Œæ‰€ä»¥å¦‚æœåœ¨å£³å·¥ç¨‹å¯ä»¥æ­£å¸¸è¿è¡Œçš„è¯ï¼Œåˆ°äº†ä¸»å·¥ç¨‹ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚ä¸è¿‡è¿™é‡Œå­˜åœ¨ç‰ˆæœ¬åŒæ­¥é—®é¢˜ï¼Œä¹‹åä¼šè¯´åˆ°ã€‚&lt;/p&gt;

&lt;h4 id=&quot;é‡åˆ°çš„é—®é¢˜&quot;&gt;é‡åˆ°çš„é—®é¢˜&lt;/h4&gt;

&lt;h5 id=&quot;ç»„ä»¶æ‹†åˆ†&quot;&gt;ç»„ä»¶æ‹†åˆ†&lt;/h5&gt;
&lt;p&gt;ç”±äºä¹‹å‰çš„ä»£ç éƒ½æ˜¯åœ¨ä¸€ä¸ªå·¥ç¨‹ä¸‹çš„ï¼Œæ‰€ä»¥è¦å•ç‹¬æ‹¿å‡ºæ¥ä½œä¸ºä¸€ä¸ªç»„ä»¶å°±ä¼šé‡åˆ°ä¸å°‘é—®é¢˜ã€‚é¦–å…ˆæ˜¯ç»„ä»¶çš„åˆ’åˆ†ï¼Œå½“æ—¶åœ¨å®šä¹‰ç»„ä»¶ç²’åº¦æ—¶ä¹ŸèŠ±äº†äº›æ—¶é—´è®¨è®ºï¼Œç©¶ç«Ÿæ˜¯ç²’åº¦ç²—ç‚¹å¥½ï¼Œè¿˜æ˜¯ç»†ç‚¹å¥½ã€‚ç²—ç‚¹çš„è¯æ¯”è¾ƒæœ‰åˆ©äºæ‹†åˆ†ï¼Œç»†ç‚¹çš„è¯çµæ´»åº¦æ¯”è¾ƒé«˜ã€‚æœ€ç»ˆè¿˜æ˜¯é€‰æ‹©ç²—ä¸€ç‚¹çš„ç²’åº¦ï¼Œå…ˆæ‹†å‡ºæ¥å†è¯´ã€‚&lt;/p&gt;

&lt;p&gt;å‡å¦‚è¦æŠŠè¯¦æƒ…é¡µè¿å‡ºæ¥ï¼Œå°±ä¼šå‘ç°å®ƒä¾èµ–äº†ä¸€äº›å…¶ä»–éƒ¨åˆ†çš„ä»£ç ï¼Œé‚£æœ€å¿«çš„æ–¹å¼å°±æ˜¯ç›´æ¥æŠŠä»£ç æ‹·è¿‡æ¥ï¼Œæ”¹ä¸ªåä½¿ç”¨ã€‚æ¯”è¾ƒç®€å•æš´åŠ›ã€‚è¯´èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œåšçš„æ—¶å€™ä¹Ÿæ˜¯æŒºæœ‰æŒ‘æˆ˜çš„ï¼Œå› ä¸ºæ­£å¸¸çš„ä¸šåŠ¡å¹¶ä¸ä¼šå› ä¸ºã€Œç»„ä»¶åŒ–ã€è€Œåœæ­¢ï¼Œæ‰€ä»¥å¼€å‘åŒå­¦ä»¬éœ€è¦åŒæ—¶å…¼é¡¾æ­£å¸¸çš„ä¸šåŠ¡å’Œç»„ä»¶çš„æ‹†åˆ†ã€‚&lt;/p&gt;

&lt;h5 id=&quot;ç‰ˆæœ¬ç®¡ç†&quot;&gt;ç‰ˆæœ¬ç®¡ç†&lt;/h5&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç»„ä»¶åŒ…æ‹¬ç¬¬ä¸‰æ–¹åº“éƒ½æ˜¯é€šè¿‡ Cocoapods æ¥ç®¡ç†çš„ï¼Œå…¶ä¸­ç»„ä»¶ä½¿ç”¨äº†ç§æœ‰åº“ã€‚ä¹‹æ‰€ä»¥é€‰æ‹© Cocoapodsï¼Œä¸€ä¸ªæ˜¯å› ä¸ºå®ƒæ¯”è¾ƒæ–¹ä¾¿ï¼Œè¿˜æœ‰å°±æ˜¯ç”¨æˆ·åŸºæ•°æ¯”è¾ƒå¤§ï¼Œä¸”ç¤¾åŒºä¹Ÿæ¯”è¾ƒæ´»è·ƒï¼ˆæ´»è·ƒåˆ°äº†ä¼šæ—¶ä¸æ—¶åœ°è§¦å‘ Github çš„ rate limitï¼Œå¯¼è‡´é•¿æ—¶é—´ clone ä¸ä¸‹æ¥Â·Â·Â· &lt;a href=&quot;https://github.com/CocoaPods/CocoaPods/issues/4989#issuecomment-193772935&quot;&gt;è§æ­¤&lt;/a&gt;ï¼‰ï¼Œå½“ç„¶ä¹Ÿæœ‰å…¶ä»–çš„ç®¡ç†æ–¹å¼ï¼Œæ¯”å¦‚ submodule / subtreeï¼Œåœ¨å¼€å‘äººå‘˜æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œæ–¹ä¾¿ã€çµæ´»çš„æ–¹æ¡ˆå®¹æ˜“å ä¸Šé£ï¼Œè™½ç„¶å®ƒä¹Ÿæœ‰è‡ªå·±çš„é—®é¢˜ã€‚ä¸»è¦æœ‰ç‰ˆæœ¬åŒæ­¥å’Œæ›´æ–°/ç¼–è¯‘æ…¢çš„é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;å‡å¦‚åŸºç¡€ç»„ä»¶åšäº†ä¸ª API æ¥å£å‡çº§ï¼Œè¿™ä¸ªå‡çº§ä¼šå¯¹åŸæœ‰çš„æ¥å£åšæ”¹åŠ¨ï¼Œè‡ªç„¶å°±ä¼šå‡ä¸€ä¸ªä¸­ä½çš„ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚åŸå…ˆæ˜¯ 1.6.19ï¼Œé‚£ä¹ˆç°åœ¨å°±å˜æˆ 1.7.0 äº†ã€‚è€Œæˆ‘ä»¬åœ¨ Podfile é‡Œéƒ½æ˜¯ç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;~&lt;/code&gt; æŒ‡å®šçš„ï¼Œè¿™æ ·å°±ä¼šå‡ºç°ä¸»å·¥ç¨‹çš„ pod ç‰ˆæœ¬å‡ä¸Šå»äº†ï¼Œä½†æ˜¯å£³å·¥ç¨‹æ²¡æœ‰åŒæ­¥åˆ°ï¼Œç„¶åç¾¤é‡Œå°±ä¼šå„ç§åé¦ˆç¼–è¯‘ä¸è¿‡ï¼Œè€Œä¸”è¿™ä¸ªç¼–è¯‘ä¸è¿‡çš„é•¿å°¾æœ‰æ—¶èƒ½æ‹–ä¸Šä¸¤ä¸‰å¤©ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬å°±æƒ³äº†ä¸ªåŠæ³•ï¼Œå¦‚æœä¸åœ¨å£³å·¥ç¨‹é‡ŒæŒ‡å®šåŸºç¡€åº“çš„ç‰ˆæœ¬ï¼Œåªåœ¨ä¸»å·¥ç¨‹é‡ŒæŒ‡å®šå‘¢ï¼Œç†è®ºä¸Šåº”è¯¥å¯è¡Œï¼Œåªè¦ä¸å‡ºç°æŸä¸ªåŸºç¡€åº“è¦åŒæ—¶ç»´æŠ¤å¤šä¸ªç‰ˆæœ¬çš„æƒ…å†µã€‚ä½†å®è·µä¸­å‘ç°ï¼Œå£³å·¥ç¨‹æœ‰æ—¶ä¼šè«åå…¶å¦™åœ°å‡ä¸ä¸Šå»ï¼Œåœ¨ podfile é‡ŒæŒ‡å®šæœ€æ–°çš„ç‰ˆæœ¬åˆå¯ä»¥å‡ä¸Šå»ï¼Œæ‰€ä»¥æ­¤è·¯ä¸é€šã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;pod update&lt;/code&gt; æ—¶é—´è¿‡é•¿ï¼Œç»å¸¸ä¼šåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;Analyzing Dependency&lt;/code&gt; ä¸Šå¡ 10 å¤šåˆ†é’Ÿï¼Œéå¸¸å½±å“æ•ˆç‡ã€‚åæ¥æ’æŸ¥ä¸‹æ¥æ˜¯è·Ÿç»„ä»¶çš„ Podspec æœ‰å…³ï¼Œé…ç½®äº† subspecï¼Œä¸”ä¾èµ–æ¯”è¾ƒå¤šã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åå°±æ˜¯ pod update ä¹‹åçš„ç¼–è¯‘ï¼Œç”±äºæ˜¯æºç ç¼–è¯‘ï¼Œæ‰€ä»¥è¿™å—çš„æ—¶é—´èŠ±è´¹ä¹Ÿä¸å°‘ï¼Œæ¥ä¸‹å»ä¼šè€ƒè™‘ framework çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æŒç»­é›†æˆ&quot;&gt;æŒç»­é›†æˆ&lt;/h3&gt;
&lt;p&gt;åœ¨åˆšå¼€å§‹ï¼ŒæŒç»­é›†æˆè¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œä¸šåŠ¡æ–¹å‡çº§ç»„ä»¶ï¼Œç›´æ¥æŠŠ podspec æ‰”åˆ° private repo é‡Œå°±å®Œäº‹äº†ã€‚è¿™æ ·æœ€ç®€å•ï¼Œä½†ä¹Ÿç»å¸¸ä¼šå¸¦æ¥ç¼–è¯‘é€šä¸è¿‡çš„é—®é¢˜ã€‚è€Œä¸”è¿™ç§éšæ„çš„ç‰ˆæœ¬å‡çº§ä¹Ÿä¸å¤ªèƒ½ä¿è¯è´¨é‡ã€‚äºæ˜¯æˆ‘ä»¬å°±æ­å»ºäº†ä¸€å¥—æŒç»­é›†æˆç³»ç»Ÿï¼Œå¤§æ¦‚å¦‚æ­¤&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575538180893.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯ä¸ªç»„ä»¶å‡çº§ä¹‹å‰éƒ½éœ€è¦å…ˆé€šè¿‡ç¼–è¯‘ï¼Œç„¶åå†å†³å®šæ˜¯å¦å‡çº§ã€‚è¿™å¥—ä½“ç³»çœ‹èµ·æ¥ä¸å¤æ‚ï¼Œä½†åœ¨å®æ–½è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°åç«¯çš„å¹¶å‘é—®é¢˜ï¼Œå¯¼è‡´ä¸šåŠ¡æ–¹è¦ä¹ˆé›†æˆå¤±è´¥ï¼Œè¦ä¹ˆè¦ç­‰ä¸å°‘æ—¶é—´ã€‚è€Œä¸”ä¹Ÿæ²¡æœ‰ä¸€ä¸ªåœ°æ–¹å¯ä»¥å‘ˆç°å½“å‰ç‰ˆæœ¬çš„ç»„ä»¶ç‰ˆæœ¬ä¿¡æ¯ã€‚è¿˜æœ‰å°±æ˜¯ä¸šåŠ¡æ–¹å¯¹äºè¿™ç§å‘½ä»¤è¡Œçš„å‡çº§æ–¹å¼æ¥å—åº¦ä¹Ÿä¸æ˜¯å¾ˆé«˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575547778269.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŸºäºæ­¤ï¼Œåœ¨ç»è¿‡äº†å‡ è½®è®¨è®ºä¹‹åï¼Œæœ‰äº†æ–°ç‰ˆçš„æŒç»­é›†æˆå¹³å°ï¼Œå‡çº§æ“ä½œé€šè¿‡ç½‘é¡µç«¯æ¥å®Œæˆã€‚&lt;/p&gt;

&lt;p&gt;å¤§è‡´æ€è·¯æ˜¯ï¼Œä¸šåŠ¡æ–¹å¦‚æœè¦å‡çº§ç»„ä»¶ï¼Œå‡è®¾ç°åœ¨çš„ç‰ˆæœ¬æ˜¯ 0.1.7ï¼Œæ·»åŠ äº†ä¸€äº› feature ä¹‹åï¼Œå£³å·¥ç¨‹æµ‹è¯•é€šè¿‡ï¼Œæƒ³é›†æˆåˆ°ä¸»å·¥ç¨‹é‡Œçœ‹çœ‹æ•ˆæœï¼Œæˆ–è€…å…¶ä»–ç»„ä»¶ä¹Ÿæƒ³å¼•ç”¨è¿™ä¸ªæœ€æ–°çš„ï¼Œå°±å¯ä»¥åœ¨åå°æ‰‹åŠ¨æŠŠç‰ˆæœ¬å‡åˆ° 0.1.8-rc.1ï¼Œè¿™æ ·çš„è¯ï¼ŒåŸå…ˆä¾èµ– &lt;code class=&quot;highlighter-rouge&quot;&gt;~&amp;gt; 0.1.7&lt;/code&gt; çš„ç»„ä»¶ï¼Œä¸ä¼šå‡åˆ° 0.1.8ï¼ŒåŒæ—¶æƒ³è¦æµ‹è¯•è¿™ä¸ªç»„ä»¶çš„è¯ï¼Œåªè¦æ‰‹åŠ¨æŠŠç‰ˆæœ¬è°ƒåˆ° 0.1.8-rc.1 å°±å¯ä»¥äº†ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šè§¦å‘ CI çš„ç¼–è¯‘æ£€æŸ¥ã€‚&lt;/p&gt;

&lt;p&gt;å½“æµ‹è¯•é€šè¿‡åï¼Œå°±å¯ä»¥æŠŠå°¾éƒ¨çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;-rc.n&lt;/code&gt; å»æ‰ï¼Œç„¶åç‚¹å‡»ã€Œé›†æˆã€ï¼Œå°±ä¼šèµ° CI ç¼–è¯‘æ£€æŸ¥ï¼Œé€šè¿‡çš„è¯ï¼Œä¼šåœ¨ä¸»å·¥ç¨‹çš„ podfile é‡Œå†™ä¸Šå›ºå®šçš„ç‰ˆæœ¬å· 0.1.8ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œpodfile é‡Œæ‰€æœ‰çš„ç»„ä»¶ç‰ˆæœ¬å·éƒ½æ˜¯å›ºå®šçš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575547304396.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å‘¨è¾¹è®¾æ–½&quot;&gt;å‘¨è¾¹è®¾æ–½&lt;/h3&gt;

&lt;h4 id=&quot;åŸºç¡€ç»„ä»¶åŠç»„ä»¶çš„æ–‡æ¡£--demo--å•å…ƒæµ‹è¯•&quot;&gt;åŸºç¡€ç»„ä»¶åŠç»„ä»¶çš„æ–‡æ¡£ / Demo / å•å…ƒæµ‹è¯•&lt;/h4&gt;
&lt;p&gt;æ— çº¿åŸºç¡€çš„èŒèƒ½æ˜¯ä¸ºé›†å›¢æä¾›è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯åœ¨è˜‘è‡è¡— App é‡Œèƒ½ work æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ‰€ä»¥å°±éœ€è¦æä¾›å…¥å£ï¼ŒçŸ¥é“æœ‰å“ªäº›å¯ç”¨ç»„ä»¶ï¼Œå¹¶ä¸”å¦‚ä½•ä½¿ç”¨ï¼Œå°±åƒè¿™æ ·ï¼ˆç›®å‰è¿˜æœªå®ç°ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575551851317.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™å°±è¦æ±‚ç»„ä»¶çš„è´Ÿè´£äººéœ€è¦åŠæ—¶åœ°æ›´æ–° README / CHANGELOG / APIï¼Œå¹¶ä¸”å½“å‘ç”Ÿ API å˜æ›´æ—¶ï¼Œèƒ½å¤Ÿå¿«é€Ÿé€šçŸ¥åˆ°ä½¿ç”¨æ–¹ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å…¬å…±-ui-ç»„ä»¶&quot;&gt;å…¬å…± UI ç»„ä»¶&lt;/h4&gt;
&lt;p&gt;ç»„ä»¶åŒ–ä¹‹åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯èµ„æºçš„é‡å¤æ€§ï¼Œä»¥å‰åœ¨ä¸€ä¸ªå·¥ç¨‹é‡Œçš„æ—¶å€™ï¼Œèµ„æºéƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‹¿åˆ°ï¼Œç°åœ¨ç‹¬ç«‹å‡ºå»äº†ï¼Œä¹Ÿä¸çŸ¥é“å“ªäº›æ˜¯å…¬ç”¨çš„ï¼Œå“ªäº›æ˜¯ç‹¬æœ‰çš„ï¼Œç´¢æ€§éƒ½æ”¾åˆ°è‡ªå·±çš„ç»„ä»¶é‡Œï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´åŒ…å˜å¤§ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯æ¯ä¸ªç»„ä»¶å¯èƒ½æ˜¯ä¸åŒçš„äº§å“ç»ç†åœ¨è·Ÿï¼Œè€Œä»–ä»¬å¾ˆå¯èƒ½åªå…³æ³¨äºè‡ªå·±å…³å¿ƒçš„é¡µé¢é•¿ä»€ä¹ˆæ ·ï¼Œè€Œå¿½ç•¥äº†æ•´ä½“çš„æ ·å¼ã€‚å…¬å…± UI ç»„ä»¶å°±æ˜¯ç”¨æ¥è§£å†³è¿™äº›é—®é¢˜çš„ï¼Œè¿™äº›ç»„ä»¶ç”šè‡³å¯ä»¥è·¨ App ä½¿ç”¨ã€‚ï¼ˆç›®å‰è¿˜æœªå®ç°ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/14575557095716.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;ã€Œç»„ä»¶åŒ–ã€æ˜¯ App è†¨èƒ€åˆ°ä¸€å®šä½“ç§¯åçš„è§£å†³æ–¹æ¡ˆï¼Œèƒ½ä¸€å®šç¨‹åº¦ä¸Šè§£å†³é—®é¢˜ï¼Œåœ¨æé«˜å¼€å‘æ•ˆç‡çš„è¿‡ç¨‹ä¸­ï¼Œé‡‡å‘æ˜¯éš¾å…çš„ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸¦æ¥äº›å¸®åŠ©ã€‚&lt;/p&gt;

</content>
 </entry>
 
 <entry>
   <title>ä¸å¯å˜å¯¹è±¡çš„é­…åŠ›</title>
   <link href="http://limboy.me/tech/2015/10/18/the-power-of-immutable-objects.html"/>
   <updated>2015-10-18T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2015/10/18/the-power-of-immutable-objects</id>
   <content type="html">&lt;blockquote&gt;
  &lt;p&gt;10x Engineer: a developer who incurs technical debt so fast he appears more productive than the 10 developers tasked w/ cleaning his mess up&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå…¨å±€å˜é‡åº”è¯¥å°½é‡å°‘ç”¨æˆ–ä¸ç”¨ï¼Œå› ä¸ºå®ƒä¼šå¸¦æ¥ä¸¤ä¸ªæ˜æ˜¾çš„é—®é¢˜ï¼šè€¦åˆå’Œä¸ç¡®å®šæ€§ã€‚æœ‰äº†å®ƒï¼Œå•å…ƒæµ‹è¯•å°±ä¸å¥½è¿›è¡Œï¼Œå³ä½¿é€šè¿‡äº†æµ‹è¯•ï¼Œä¹Ÿä¸èƒ½ç¡®ä¿è¿™ä¸ªå…¨å±€å˜é‡å˜äº†ä¹‹åæ˜¯å¦èƒ½é€šè¿‡æµ‹è¯•ã€‚ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„å•ä¾‹å°±æœ‰å…¨å±€å˜é‡çš„æ„å‘³ï¼šå¤–éƒ¨å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«ä¿®æ”¹ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†åŠ å¿«å¼€å‘é€Ÿåº¦ï¼Œå¾€å¾€ä¼šä»¥åŠŸèƒ½å®ç°ä¼˜å…ˆï¼Œå…¶ä¸­çš„ä¸€ä¸ªã€Œæ–¹æ³•ã€å°±æ˜¯æä¾›å¯å˜å¯¹è±¡ï¼Œæ¯”å¦‚åƒ OC é‡Œçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSMutableDictionary&lt;/code&gt;ã€‚å‰ä¸¤å¤©æ­£å¥½é‡åˆ°ä¸€ä¸ªä¸æ­¤æœ‰å…³çš„ caseï¼Œå¯ä»¥æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çš„ç½‘ç»œå±‚å‘é€è¯·æ±‚æ—¶ï¼Œé»˜è®¤ä¼šå¸¦ä¸Šä¸€äº›ç³»ç»Ÿå‚æ•°ï¼Œæ¯”å¦‚ iOS ç³»ç»Ÿç‰ˆæœ¬ï¼Œapp ç‰ˆæœ¬ç­‰ã€‚åŒæ—¶å¦‚æœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œä¹Ÿä¼šå¸¦ä¸Šä¸€äº›ç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;token&lt;/code&gt;ã€‚ä¸ºäº†æ–¹ä¾¿å¤ç”¨ï¼Œæˆ‘ä»¬æ¯æ¬¡è¯·æ±‚éƒ½ä¼šæŠŠå·²æœ‰çš„å‚æ•°æ”¾åœ¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ç½‘ç»œè¯·æ±‚ç±»ï¼Œå‡è®¾è¿™ä¸ªç±»çš„åå­—å«&lt;code class=&quot;highlighter-rouge&quot;&gt;APIClient&lt;/code&gt;ã€‚åŒæ—¶åˆå…è®¸å¤–éƒ¨åŠ¨æ€æ·»åŠ ä¸€äº›è¯·æ±‚å‚æ•°ï¼Œæ¯”å¦‚ç”¨æˆ·ä¿¡æ¯ï¼Œæ˜¯å¦å¯ç”¨è°ƒè¯•ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å‡ºäºæ–¹ä¾¿è€ƒè™‘ï¼Œæˆ‘ä»¬ç»™ &lt;code class=&quot;highlighter-rouge&quot;&gt;APIClient&lt;/code&gt; ç±»åŠ äº†ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;NSMutableDictionary&lt;/code&gt; å±æ€§ &lt;code class=&quot;highlighter-rouge&quot;&gt;builtinParameters&lt;/code&gt;ï¼Œè¿™æ ·å¤–éƒ¨åªè¦æ‹¿åˆ° &lt;code class=&quot;highlighter-rouge&quot;&gt;APIClient&lt;/code&gt; çš„å•ä¾‹ï¼Œç„¶åå¾€è¿™ä¸ªå±æ€§é‡Œé¢æ·»åŠ é¢å¤–çš„å‚æ•°å°±å¯ä»¥äº†ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;APIClient&lt;/code&gt; é‡Œä¼šæŠŠè¿™äº›å‚æ•°ç»„è£…æˆ &lt;code class=&quot;highlighter-rouge&quot;&gt;querystring&lt;/code&gt; å‘é€ç»™æœåŠ¡ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;å°±è¿™æ ·æ­£å¸¸è¿è¡Œäº†ä¸€æ®µæ—¶é—´ï¼Œå¿½ç„¶æœ‰ä¸€å¤©å‘ç°ç”¨æˆ·ç™»å‡ºåï¼ŒTaåŸå…ˆçš„ä¸€äº›ç™»å½•ä¿¡æ¯è¿˜æ˜¯è¢«å‘é€ç»™äº†æœåŠ¡ç«¯ã€‚å› ä¸ºè¿™ä¸ªç½‘ç»œè¯·æ±‚ç±»å¹¶æ²¡æœ‰åšè¿‡æ”¹åŠ¨ï¼Œæ‰€ä»¥æ’æŸ¥èµ·æ¥æ²¡ä»€ä¹ˆå¤´ç»ªã€‚ç»è¿‡å¤šæ¬¡æŠ“åŒ…å’Œè·Ÿè¸ªåï¼Œç»ˆäºå®šä½åˆ°äº†é—®é¢˜çš„åŸå› ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;builtinParameters&lt;/code&gt; è¿™ä¸ªå±æ€§åœ¨å¤–éƒ¨è¢«æ”¹å˜äº†ã€‚æ›´ç»†è‡´çš„åŸå› è·Ÿä¸€æ¬¡é‡æ„æœ‰å…³ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¯å˜å¯¹è±¡ä¼šç»™è°ƒè¯•å’Œç»´æŠ¤å¸¦æ¥éº»çƒ¦ï¼Œå°¤å…¶æ˜¯è¿™äº›å¯¹è±¡å¤šèµ·æ¥åï¼Œæ›´æ˜¯ä¸å¥½å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ã€Œå¯å˜å¯¹è±¡ã€å°±åƒç”·äººçš„æ‰¿è¯ºï¼šä¸å¯ä¿¡ï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ä¼šå› ä¸ºä»€ä¹ˆåŸå› å‘ç”Ÿæ”¹å˜ã€‚&lt;/p&gt;

&lt;p&gt;ã€Œä¸å¯å˜å¯¹è±¡ã€å°±ä¸ä¸€æ ·äº†ï¼Œæ‹¿åˆ°çš„æ˜¯ä»€ä¹ˆï¼Œå°±æ˜¯ä»€ä¹ˆï¼Œä¸ä¼šæ”¹å˜ï¼Œé™¤éè¢«æ¢æˆäº†ä¸€ä¸ªæ–°çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä½†ã€Œè¿™ä¸–ç•Œå”¯ä¸€ä¸å˜çš„å°±æ˜¯å˜åŒ–ã€ï¼Œä¸å¯å˜å¯¹è±¡å¦‚ä½•æ¥åº”å¯¹è¿™ä¸ªå……æ»¡å˜æ•°çš„ç¯å¢ƒå‘¢ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªã€ŒåŠ¨ç”»ã€&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://31.media.tumblr.com/fe521bb54c25c173355632a3f5e029fe/tumblr_nmobaa6IQa1ruhxczo1_500.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é€šè¿‡è¿ç»­å¿«é€Ÿåœ°ç¿»é¡µæ¥å½¢æˆåŠ¨ç”»çš„å‡è±¡ï¼Œè¿™ä¸»è¦æ˜¯åˆ©ç”¨äº†äººçœ¼çš„&lt;a href=&quot;https://www.wikiwand.com/zh-hant/%E8%A6%96%E8%A6%BA%E6%9A%AB%E7%95%99&quot;&gt;è§†è§‰åœç•™&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰ç‚¹æ‰¯è¿œäº†ï¼Œä½†è¿™è·Ÿã€Œä¸å¯å˜å¯¹è±¡ã€å¯å˜åŒ–ï¼Œè¿˜æŒºåƒçš„ï¼Œè¿™äº›å›¾åƒæ˜¯é™æ€çš„ï¼Œä¸å˜çš„ï¼Œä½†è¿™æœ¬ä¹¦è®©è¿™äº›å›¾åƒå˜äº†èµ·æ¥ã€‚è¿™æœ¬ä¹¦å¯ä»¥æ˜¯ä¸€ä¸ªç±»ï¼Œå…¶ä¸­çš„å›¾ç‰‡å¯ä»¥æ˜¯ä¸€ä¸ª ivarï¼Œå¤–éƒ¨å¯ä»¥ç»™è¿™ä¸ª ivar è®¾ç½®æ–°çš„ valueï¼Œè¿™æ ·å¯¹äº class æ¥è¯´ï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨è¿™ä¸ª ivarï¼Œä¸ç”¨æ‹…å¿ƒä»€ä¹ˆæ—¶å€™è¿™ä¸ª ivar è‡ªèº«ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;[dict addObject:]&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥çœ‹çœ‹ ReactJS+Flux æ˜¯å¦‚ä½•ä½¿ç”¨ Immutable Objects çš„ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆæ¥è¯´è¯´ Fluxï¼Œç”¨ä¸€å¼ å›¾å°±èƒ½å·®ä¸å¤šæè¿°æ¸…æ¥šäº†&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://facebook.github.io/flux/img/flux-simple-f8-diagram-with-client-action-1300w.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Flux çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œæ•°æ®æ˜¯å•å‘æµåŠ¨çš„ï¼Œå°±åƒæ¼æ–—ä¸€æ ·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Dispatcher&lt;/code&gt; æ˜¯ä¸€ä¸ªã€Œåˆ†å‘å™¨ã€ï¼Œå®ƒçš„èŒè´£æ˜¯æ¥å—æ‰€æœ‰çš„ Actionï¼Œç®€å•ç»„è£…åï¼Œæ‰”ç»™ Storeï¼Œå…¶ä»–çš„äº‹æƒ…å°±ä¸ç®¡äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Store&lt;/code&gt; æ˜¯ä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼Œå½“ Store æ¥æ”¶åˆ° Dispatcher è¿‡æ¥çš„ Action æ—¶ï¼Œä¼šæ ¹æ®è¿™äº› Actionï¼Œç”Ÿæˆæ–°çš„ Statesï¼Œç„¶åå†æŠŠå®ƒä¼ ç»™ Viewã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt; æ‹¿åˆ°è¿™äº›æ–°çš„ States åï¼Œä¼šæœ‰é€‰æ‹©çš„è¿›è¡Œç»„ä»¶çš„æ›´æ–°ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œçš„ States å°±æ˜¯ä¸€ä¸ªä¸å¯å˜å¯¹è±¡ï¼ŒStore ä¸ä¼šå»ä¿®æ”¹ States çš„æŸä¸ªå±æ€§ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„ã€‚ä½†æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æˆæœ¬ä¸æ˜¯ä¼šå¾ˆå¤§ï¼Ÿæ˜¯çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨ &lt;a href=&quot;https://www.wikiwand.com/en/Copy-on-write&quot;&gt;Copy on Write&lt;/a&gt; ç­‰æŠ€æœ¯è¿›è¡Œä¼˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹çœ‹ ReactJS æ‹¿åˆ°è¿™ä¸ªæ–°çš„ property åä¼šå¦‚ä½•å¤„ç†ï¼Œå…ˆæ¥çœ‹ä¸€å¼ å›¾&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/should-component-update.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;View ä¼šå¯¹æ–°çš„ property å’Œå½“å‰çš„ property åšæ¯”è¾ƒï¼Œå¦‚æœæ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œé‚£å°±ä»€ä¹ˆä¹Ÿä¸åšï¼ˆå°±åƒ C2 ä¸€æ ·ï¼‰ï¼Œå®ƒä¸‹é¢çš„èŠ‚ç‚¹ä¹Ÿä¸ç”¨æ¯”è¾ƒäº†ï¼›å¦‚æœæ•°æ®ä¸ä¸€è‡´ï¼Œå†å¾€ä¸‹æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°é‚£[å‡ ]ä¸ªéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰ä½¿ç”¨åˆ° Mutable Objectsï¼Œä½†ç…§æ · Getting Things Doneã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;
&lt;p&gt;Immutable Objects å’Œ Mutable Objects æœ‰å„è‡ªçš„ä½¿ç”¨åœºæ™¯ï¼Œåè€…å¯ä»¥ä½œä¸ºå‰è€…çš„å®¹å™¨ã€‚æ¯”å¦‚ Facebook åœ¨&lt;a href=&quot;http://www.infoq.com/news/2014/10/Facebook-ios-architecture&quot;&gt;ä»–ä»¬çš„æ¶æ„æ–‡ç« &lt;/a&gt;ä¸­æåˆ°ï¼Œä»–ä»¬çš„ Model ç±»æ˜¯åªè¯»çš„ï¼Œä½† Model å¯„ç”Ÿçš„å¯¹è±¡å¯ä»¥æ›´æ–° Modelã€‚æˆ‘ä»¬å¯èƒ½ä¹ æƒ¯äº†ä½¿ç”¨å¯å˜å¯¹è±¡ï¼Œå› ä¸ºå„ç§æ•™ç¨‹/ç¼–ç¨‹ä¹¦ç±ä¸Šéƒ½æ˜¯è¿™ä¹ˆå†™çš„ï¼Œä½†åˆç†åœ°ä½¿ç”¨ã€Œä¸å¯å˜å¯¹è±¡ã€æœ‰æ—¶ä¼šå¸¦æ¥æ›´å¥½çš„æ•ˆæœã€‚&lt;/p&gt;

&lt;h3 id=&quot;references&quot;&gt;References&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.infoq.com/news/2014/10/Facebook-ios-architecture&quot;&gt;How Immutable State Helped Facebook to Improve Its iOS App Architecture&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://realm.io/news/andy-matuschak-controlling-complexity/&quot;&gt;Controlling Complexity in Swift&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.infoq.com/presentations/Simple-Made-Easy&quot;&gt;Simple Made Easy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.infoq.com/minibooks/domain-driven-design-quickly&quot;&gt;Domain Driven Design&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content>
 </entry>
 
 <entry>
   <title>MVVM without ReactiveCocoa</title>
   <link href="http://limboy.me/tech/2015/09/27/ios-mvvm-without-reactivecocoa.html"/>
   <updated>2015-09-27T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2015/09/27/ios-mvvm-without-reactivecocoa</id>
   <content type="html">&lt;p&gt;MVVM æ˜¯ MVC æ¨¡å¼çš„ä¸€ç§æ¼”è¿›ï¼Œå®ƒä¸»è¦è§£å†³äº† ViewController è¿‡äºè‡ƒè‚¿å¸¦æ¥çš„ä¸æ˜“ç»´æŠ¤å’Œæµ‹è¯•çš„é—®é¢˜ã€‚å…¶ä¸­ ViewModel çš„ä¸»è¦èŒè´£æ˜¯å¤„ç†ä¸šåŠ¡é€»è¾‘å¹¶æä¾› View æ‰€éœ€çš„æ•°æ®ï¼Œè¿™æ · VC å°±ä¸ç”¨å…³å¿ƒä¸šåŠ¡ï¼Œè‡ªç„¶ä¹Ÿå°±ç˜¦äº†ä¸‹æ¥ã€‚ViewModel åªå…³å¿ƒä¸šåŠ¡æ•°æ®ä¸å…³å¿ƒ Viewï¼Œæ‰€ä»¥ä¸ä¼šä¸ View äº§ç”Ÿè€¦åˆï¼Œä¹Ÿå°±æ›´æ–¹ä¾¿è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;View æ˜¯ä¸€ä¸ªå£³ï¼Œå®ƒæ‰€å‘ˆç°çš„å†…å®¹éƒ½éœ€è¦ç”± ViewModel æ¥æä¾›ï¼Œè€Œ View åˆä¸ä¸ ViewModel ç›´æ¥æ²Ÿé€šï¼Œè¿™æ—¶å°±éœ€è¦ ViewController æ¥åšä¸­é—´çš„åè°ƒè€…ã€‚&lt;/p&gt;

&lt;p&gt;ViewController æŒæœ‰ View å’Œ ViewModelï¼Œå½“ VC åˆå§‹åŒ–æ—¶ï¼Œä¼šè®© ViewModel å»å–æ•°æ®ï¼Œç®€å•æ¥è¯´å°±æ˜¯è°ƒç”¨ VM çš„æŸä¸ªè·å–æ•°æ®çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ MVVM æœ€èˆ’æœçš„å§¿åŠ¿æ˜¯æ­é… ReactiveCocoaã€‚ä¸è¿‡å®ƒçš„é—®é¢˜åœ¨äºå­¦ä¹ æˆæœ¬å’Œç»´æŠ¤æˆæœ¬æ¯”è¾ƒé«˜ï¼Œåœ¨å°å›¢é˜Ÿä¸­æˆ–è®¸è¿˜å¯ä»¥å°è¯•ï¼Œå½“å¼€å‘äººå‘˜æ•°é‡è¾ƒå¤šæ—¶å°±å¾ˆéš¾æ¨èµ·æ¥äº†ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®²çš„ä¸»é¢˜ï¼šå¦‚ä½•ä¸å€ŸåŠ© ReactiveCocoa æ¥å®ç° MVVMã€‚&lt;/p&gt;

&lt;p&gt;å…ˆä»æ•°æ®çš„è·å–å¼€å§‹è¯´èµ·å§ã€‚åœ¨ ReactiveCocoa é‡Œæœ‰ä¸€ä¸ªç±»å«ã€ŒRACCommandã€ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯æ‰§è¡ŒæŸä¸ªä¼šæ”¹å˜æ•°æ®çš„æ“ä½œï¼Œç„¶åæä¾›è·å–æ•°æ®çš„æ–¹æ³•ï¼Œè·Ÿæˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„ç›®çš„å¾ˆåƒï¼Œæ‰€ä»¥å¯ä»¥å€Ÿé‰´è¿™ä¸ªæ€è·¯ï¼Œå†™ä¸€ä¸ªç®€å•çš„ Commandã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandCompletionBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 1
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandConsumeBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MGJCommandCompletionBlock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 2
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandCancelBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)();&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MGJCommandResult&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 3
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 4
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MGJCommand&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 5
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;executing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 6
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MGJCommandResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithConsumeHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandConsumeBlock&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;consumeHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 7
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithConsumeHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandConsumeBlock&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;consumeHandler&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cancelHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommandCancelBlock&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cancelHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 8
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 9
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;input&lt;/code&gt; æ˜¯å¤–éƒ¨ä¼ è¿‡æ¥çš„å€¼ï¼Œæ¯”å¦‚ user_idï¼Œå½“æ‹¿åˆ°æ•°æ®åï¼Œè°ƒç”¨ä¸‹ completionHandlerï¼Œè¿™æ · &lt;code class=&quot;highlighter-rouge&quot;&gt;result&lt;/code&gt; å±æ€§å°±ä¼šå˜åŒ–&lt;/li&gt;
  &lt;li&gt;æœ‰äº›æ“ä½œï¼Œå¦‚ http è¯·æ±‚ï¼Œéœ€è¦æ‰‹åŠ¨å–æ¶ˆ&lt;/li&gt;
  &lt;li&gt;å•ç‹¬æŠŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; ä½œä¸ºä¸€ä¸ªå±æ€§æ”¾å‡ºæ¥ï¼Œæ˜¯å› ä¸ºå¾ˆå¤šæ•°æ®è¯·æ±‚æ“ä½œéƒ½å¯èƒ½å‡ºé”™ï¼Œå½“å‡ºé”™åï¼Œåªéœ€æ”¹å˜è¿™ä¸ª error å±æ€§å³å¯ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;content&lt;/code&gt; å­˜æ”¾äº†è¿™ä¸ª Command çš„æ•°æ®å¤„ç†ç»“æœã€‚&lt;/li&gt;
  &lt;li&gt;æ ‡è¯†äº†è¿™ä¸ª Command ç›®å‰çš„è¿è¡ŒçŠ¶æ€ï¼Œæ¯”å¦‚å¯ä»¥æ ¹æ®è¿™ä¸ªçŠ¶æ€æ¥æ˜¾ç¤º loadingã€‚&lt;/li&gt;
  &lt;li&gt;æ¯æ¬¡ Command æ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡åï¼Œresult éƒ½ä¼šæ”¹å˜ï¼Œå¤–éƒ¨å¯ä»¥ KVO è¿™ä¸ª resultï¼Œç„¶åå°±å¯ä»¥å®æ—¶è·å–æœ€æ–°çš„ç»“æœäº†ã€‚&lt;/li&gt;
  &lt;li&gt;Command çš„æ‰§è¡Œé€»è¾‘ï¼Œå¦‚æœå®ç°äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;cancelHandler&lt;/code&gt; çš„è¯ï¼Œå¤–éƒ¨è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;cancel&lt;/code&gt;ï¼Œè¿™ä¸ª Handler å°±ä¼šè¢«è§¦å‘ã€‚&lt;/li&gt;
  &lt;li&gt;å¤–éƒ¨å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥è§¦å‘ Command çš„æ‰§è¡Œï¼ŒåŒæ—¶å¯ä»¥ä¼ ä¸€ä¸ªå‚æ•°è¿›æ¥ã€‚&lt;/li&gt;
  &lt;li&gt;å¤–éƒ¨å¯ä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥å–æ¶ˆ Command çš„æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å®ç°èµ·æ¥ä¹Ÿè›®ç®€å•çš„ï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ã€‚ç”¨èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// SomeViewModel.m
&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@weakify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;followCommand&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJCommand&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithConsumeHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MGJCommandCompletionBlock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;@strongify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FollowRequest&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getFollowList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;usersToFollow&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kFollowExpertSearchSucceedSignal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failure&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨ ViewController é‡Œçš„ç”¨æ³•å¤§æ¦‚åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// SomeViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;didTapFollowButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;button&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// æ ¹æ® button æ‰¾åˆ° userID
&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;followCommand&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å°±æ˜¯è¿™æ ·ï¼ŒVC æœ¬èº«ä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œéƒ½äº¤ç»™ ViewModel å»å¤„ç†ï¼Œè€Œè¿™äº›æ•°æ®è¯·æ±‚çš„ç»“æœå¤„ç†åˆæœ‰ä¸åŒçš„å¤„ç†æ–¹å¼ã€‚&lt;/p&gt;

&lt;h3 id=&quot;delegate&quot;&gt;Delegate&lt;/h3&gt;

&lt;p&gt;å½“ ViewModel æ‹¿åˆ°æ•°æ®åï¼Œå¯ä»¥æŠŠç»“æœä»¥ Delegate çš„æ–¹å¼é€šçŸ¥ VCï¼Œå°±åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// SomeViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;didFollowUserWithResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;result&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;followButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enabled&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;followButton&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doSomeAnimation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·åšçš„å¥½å¤„æ˜¯æ¯”è¾ƒç¬¦åˆè‹¹æœæ—¢æœ‰çš„è®¾è®¡æ¨¡å¼ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥çœ‹ Delegate åè®®æ¥çŸ¥é“ VM æš´éœ²äº†å“ªäº›æ¥å£ä¾›å¤–éƒ¨ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡è¿™ç§æ–¹æ³•å°‘äº†ç‚¹çµæ´»æ€§ï¼Œæ¯”å¦‚éœ€è¦è”åˆå¤šä¸ªå±æ€§çš„å˜åŒ–æ¥åšä¸€äº›äº‹æƒ…æ—¶ï¼Œå¤„ç†èµ·æ¥å°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè¿™ä¹Ÿæ˜¯ RAC å¼ºå¤§çš„åœ°æ–¹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;kvo&quot;&gt;KVO&lt;/h3&gt;

&lt;p&gt;RAC æ˜¯åŸºäº KVO æ„å»ºçš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç”¨ KVO æ¥è®© VC è·å– VM çš„å˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æˆ‘ä»¬éƒ½çŸ¥é“ KVO çš„æ§½ç‚¹æ¯”è¾ƒå¤šï¼Œæ¯”å¦‚ä½¿ç”¨èµ·æ¥ä¸æ–¹ä¾¿ï¼Œç”¨å®Œè¿˜è¦è®°å¾—ç§»é™¤ç­‰ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨ Facebook å¼€æºçš„ &lt;a href=&quot;https://github.com/facebook/KVOController&quot;&gt;KVOController&lt;/a&gt;ï¼Œå®ƒæ¯”è¾ƒå¥½çš„å¤„ç†äº† KVO å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶åˆèƒ½å‘æŒ¥ KVO å¸¦æ¥çš„ä¾¿æ·æ€§ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰äº†å®ƒæˆ‘ä»¬å°±èƒ½åœ¨ä¸€ä¸ªåœ°æ–¹æŠŠ VM çš„æ›´æ–°å¤„ç†æ‰äº†&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleViewModelUpdate&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;KVOController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModel&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;followCommand.result&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyValueObservingOptionInitial&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSKeyValueObservingOptionNew&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;change&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;NSKeyValueChangeNewKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// doSomething with the newValue
&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;// å¯¹ VM å…¶ä»– keyPath çš„å¤„ç†ä¹Ÿéƒ½å¯ä»¥æ”¾åˆ°è¿™é‡Œ
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœè§‰å¾—è¿™æ ·çš„å†™æ³•è¿˜æ˜¯å¤ªéº»çƒ¦ï¼Œå¯ä»¥åšä¸€å±‚ç®€å•çš„å°è£…ï¼Œä½¿ç”¨èµ·æ¥å°±åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handleViewModelUpdate&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModel&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;followCommand.result&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// use newValue to update view
&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æ˜¯ä¸æ˜¯ä¼šå¥½ä¸€ç‚¹ï¼Œä½¿ç”¨ KVO æ¯” Delegate å¥½çš„ä¸€ç‚¹æ˜¯ä¸ç”¨å†é¢å¤–å£°æ˜åè®®å’Œæ–¹æ³•ï¼Œè€Œä¸”æ”¯æŒ blockï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿä¼šæ–¹ä¾¿äº›ã€‚&lt;/p&gt;

&lt;p&gt;å¯¹äºåƒ &lt;code class=&quot;highlighter-rouge&quot;&gt;error&lt;/code&gt; è¿™æ ·å¾ˆå¤šæ“ä½œéƒ½ä¼šäº§ç”ŸåŒæ ·ç»“æœçš„åœºæ™¯ï¼Œå¯ä»¥å•ç‹¬æ‹¿å‡ºæ¥ï¼Œä½œä¸º ViewModel çš„ä¸€ä¸ªå±æ€§ï¼Œä½¿ç”¨æ—¶ï¼Œç›´æ¥ KVO è¿™ä¸ªå±æ€§å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç»†èŠ‚å¤„ç†&quot;&gt;ç»†èŠ‚å¤„ç†&lt;/h3&gt;

&lt;p&gt;å¦‚æœä¸æ¶‰åŠåˆ° TableView ç­‰ä¼šå‡ºç°å¤ç”¨åœºæ™¯çš„åœ°æ–¹ï¼ŒMVVM ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ã€‚å¦‚æœæœ‰äº† TableViewï¼Œåˆè¦åšä¸€äº›é¢å¤–çš„å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼ŒVC å¯ä»¥å¸¦ä¸€ä¸ª VMï¼Œé‚£å¦‚æœå‡ºç° Cell æ—¶æ€ä¹ˆåŠï¼ŒCell é‡ŒåˆåŒ…å«äº†æŒ‰é’®ï¼ŒæŒ‰é’®åˆéœ€è¦æ•°æ®è¯·æ±‚åˆæ€ä¹ˆå¤„ç†ï¼Ÿè¿™äº›éƒ½æ˜¯æ¯”è¾ƒå¸¸è§çš„åœºæ™¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ MVVM æ¥è§£å†³ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ VM çš„èŒè´£æ˜¯ä¸º View æä¾›æ•°æ®æ”¯æŒï¼ŒCell ä¹Ÿæ˜¯ä¸€ä¸ª Viewï¼Œé‚£ä¹ˆä¸º Cell é…å¤‡ä¸€ä¸ª VM
ä¸å°±å¯ä»¥äº†ä¹ˆã€‚&lt;/p&gt;

&lt;p&gt;è¿™æ ·çš„è¯ï¼ŒVC çš„ VM éœ€è¦åŒ…å«ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢çš„å…ƒç´ æ˜¯ CellVMï¼Œä½¿ç”¨èµ·æ¥å°±åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// SomeViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableViewCell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cellForRowAtIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSIndexPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;indexPath&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;UITableViewCell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dequeueReusableCellWithIdentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;Cell&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cellViewModels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

	&lt;span class=&quot;c1&quot;&gt;// cell å¯èƒ½ä¼šç”¨åˆ° cellVM é‡Œçš„ Commandï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå¤„ç† command çš„æ‰§è¡Œç»“æœ
&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;likeCommand.result&quot;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// update cell after like
&lt;/span&gt;	&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å½“ç„¶ä»…ä»…å¦‚æ­¤æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ä¸ªæ°å½“çš„æ—¶æœºæŠŠ KVO ç§»é™¤ï¼Œé¿å…å¤šæ¬¡ç›‘å¬ã€‚&lt;code class=&quot;highlighter-rouge&quot;&gt;UITableViewDelegate&lt;/code&gt; é‡Œçš„è¿™ä¸ªæ–¹æ³•å°±å¾ˆé€‚åˆã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// SomeViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didEndDisplayingCell&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UITableViewCell&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forRowAtIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSIndexPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;indexPath&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;unobserve&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cell&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;likeCommand.result&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ä¸è¿‡è¿™é‡Œä¹Ÿè¦è®²ç©¶ä¸€ä¸ªå¹³è¡¡ï¼Œå¦‚æœ Cell çš„ç±»å‹æ¯”è¾ƒå¤šï¼Œä¸”æ¶‰åŠ Command çš„åœ°æ–¹ä¸å¤šï¼Œåªæ˜¯åšå‘ˆç°æ–¹é¢çš„å·¥ä½œï¼Œç›´æ¥ä½¿ç”¨ Entity ä¼šæ›´æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;h3 id=&quot;tips&quot;&gt;Tips&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ViewController&lt;/code&gt; å°½é‡ä¸æ¶‰åŠä¸šåŠ¡é€»è¾‘ï¼Œè®© &lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; å»åšè¿™äº›äº‹æƒ…ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ViewController&lt;/code&gt; åªæ˜¯ä¸€ä¸ªä¸­é—´äººï¼Œæ¥æ”¶ &lt;code class=&quot;highlighter-rouge&quot;&gt;View&lt;/code&gt; çš„äº‹ä»¶ã€è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; çš„æ–¹æ³•ã€å“åº” &lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; çš„å˜åŒ–ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; ä¸èƒ½åŒ…å« Viewï¼Œä¸ç„¶å°±è·Ÿ View äº§ç”Ÿäº†è€¦åˆï¼Œä¸æ–¹ä¾¿å¤ç”¨å’Œæµ‹è¯•ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; ä¹‹é—´å¯ä»¥æœ‰ä¾èµ–ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ViewModel&lt;/code&gt; é¿å…è¿‡äºè‡ƒè‚¿ï¼Œä¸ç„¶ç»´æŠ¤èµ·æ¥ä¹Ÿæ˜¯ä¸ªé—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;MVVM å¹¶ä¸å¤æ‚ï¼Œè·Ÿ MVC ä¹Ÿæ˜¯å…¼å®¹çš„ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ª ViewModel å±‚ï¼Œä½†å°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå°æ”¹åŠ¨ï¼Œå°±èƒ½è®©ä»£ç å˜å¾—æ›´åŠ å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ï¼Œä¸å¦¨è¯•ä¸€ä¸‹å§ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>iOS ç»Ÿè®¡æ‰“ç‚¹é‚£äº›äº‹</title>
   <link href="http://limboy.me/tech/2015/09/09/ios-analytics.html"/>
   <updated>2015-09-09T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2015/09/09/ios-analytics</id>
   <content type="html">&lt;p&gt;ç»Ÿè®¡æ‰“ç‚¹æ˜¯ App å¼€å‘é‡Œå¾ˆé‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼ŒApp çš„è¿è¡ŒçŠ¶æ€ã€æ”¹ç‰ˆåçš„æ•ˆæœã€ç”¨æˆ·çš„å„ç§è¡Œä¸ºç­‰éƒ½éœ€è¦æ‰“ç‚¹ï¼Œå¸‚é¢ä¸Šä¹Ÿæœ‰ä¸å°‘å¯ä¾›é€‰æ‹©çš„ç¬¬ä¸‰æ–¹åº“ã€‚ å‡è®¾äº§å“æœ‰è¿™ä¹ˆä¸ªéœ€æ±‚ï¼šå½“ç”¨æˆ·åœ¨è¯¦æƒ…é¡µç‚¹å‡»è´­ä¹°æŒ‰é’®æ—¶ï¼Œè®°å½•ä¸€ä¸‹äº‹ä»¶ã€‚æˆ‘ä»¬å®ç°èµ·æ¥å¤§æ¦‚ä¼šæ˜¯è¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// DetailViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onBuyButtonTapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;button&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// do some stuff, maybe send a request to server
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXXAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kSomeEventYouDefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªéœ€æ±‚å°±è¿™æ ·è½»æ¾æå®šäº†ï¼Œä½†ç»†ç»†æƒ³æƒ³è¿˜æ˜¯æœ‰ä¸å°‘é—®é¢˜çš„ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;é¡µé¢ä¸Šä¼šæœ‰å…¶ä»–çš„ Buttonï¼Œå¯èƒ½æ¯ä¸ª Button éƒ½è¦æ”¾ä¸Šè¿™ä¹ˆä¸€æ®µä»£ç ã€‚&lt;/li&gt;
  &lt;li&gt;è¿™äº›ç»Ÿè®¡å…¶å®è·Ÿå…·ä½“çš„ä¸šåŠ¡æ— å…³ï¼Œæ²¡å¿…è¦è·Ÿä¸šåŠ¡ä»£ç æ··æ‚åœ¨ä¸€èµ·ï¼Œä¸ä¼˜é›…ã€‚&lt;/li&gt;
  &lt;li&gt;å½“æ”¹ç‰ˆæˆ–è€…é‡æ„æ—¶ï¼Œæœ‰å¯èƒ½å¿˜äº†æŠŠç›¸åº”çš„æ‰“ç‚¹ä»£ç è¿ç§»è¿‡å»ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥éœ€è¦ä¸€ç§æ›´å¥½çš„æ–¹å¼æ¥åšè¿™ä»¶äº‹ï¼Œè¿™å°±æ˜¯ä½¿ç”¨ AOP(&lt;a href=&quot;http://en.wikipedia.org/wiki/Aspect-oriented_programming&quot;&gt;Aspect-Oriented-Programming&lt;/a&gt;)ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ã€Œé¢å‘åˆ‡é¢ç¼–ç¨‹ã€&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;é€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°åœ¨ä¸ä¿®æ”¹æºä»£ç çš„æƒ…å†µä¸‹ç»™ç¨‹åºåŠ¨æ€ç»Ÿä¸€æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯ä»¥åŠ¨æ€çš„åœ¨å‡½æ•°è°ƒç”¨çš„å‰åæ’ä¸€æ®µä»£ç ã€‚iOS å¯ä»¥ä½¿ç”¨ Pete Steinberger å¼€å‘çš„ &lt;a href=&quot;https://github.com/steipete/Aspects&quot;&gt;Aspects&lt;/a&gt; è¿™ä¸ªåº“ï¼Œå¤§è‡´åŸç†æ˜¯åœ¨ runtime å±‚ï¼Œé€šè¿‡ swizzle method æ¥å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ¥çœ‹ä¸€ä¸ªå° Demo&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aspect_hookSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewWillAppear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectPositionAfter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSLog&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;View Controller %@ will appear animated: %tu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;UIViewController&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;viewWillAppear:&lt;/code&gt; è¢«è°ƒç”¨åï¼Œè¿˜ä¼šå†è°ƒä¸€ä¸‹æˆ‘ä»¬å®šä¹‰çš„ Blockï¼Œè¿™æ®µæ—¥å¿—å°±ä¼šè¢«è¾“å‡ºã€‚è€Œæ‰“ç‚¹æ­£å¥½ç¬¦åˆè¿™ç§åœºæ™¯ï¼šæ­£äº‹å¹²å®Œä¹‹åï¼Œé¢å¤–å¹²ä¸€äº›è·Ÿä¸šåŠ¡æ— å…³çš„äº‹æƒ…ã€‚&lt;/p&gt;

&lt;p&gt;ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡ AOP æ¥åšçš„è¯ï¼Œå¤§æ¦‚å°±æ˜¯è¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// DetailViewController.m
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onBuyButtonTapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;button&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// do some stuff, maybe send a request to server
&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// no need to call [XXXAnalytics event:]
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// AppDelegate.m
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setupAnalytics&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DetailViewController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aspect_hookSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;onBuyButtonTapped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;withOptions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectPositionAfter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXXAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kSomeEventYouDefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™æ ·ç»Ÿè®¡ä»£ç å°±ä»ä¸šåŠ¡ä»£ç ä¸­å‰¥ç¦»å‡ºæ¥äº†ã€‚ä½†æ˜¯åˆäº§ç”Ÿäº†ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå¤šä¸ª Button Eventï¼Œå²‚ä¸æ˜¯è¦å†™å¾ˆå¤šè¡Œè¿™æ ·çš„ä»£ç ï¼Œã€Œé‡å¤ã€è¿™æ ·çš„äº‹æƒ…ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜æ€ä¹ˆèƒ½å¿ï¼Œç®€å•ï¼Œé€ ä¸€ä¸ªæ–¹æ³•&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;selector&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;event&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aspect_hookSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectPositionAfter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXXAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;ä½¿ç”¨èµ·æ¥å°±åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setupAnalytics&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DetailViewController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@seletor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onBuyButtonTapped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kSomeEventYouDefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ListViewController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@seletor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;followButtonTapped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kAnotherEventYouDefined&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;çœ‹èµ·æ¥åˆå¹²å‡€äº†äº›ã€‚è¿™æ—¶ï¼Œäº§å“ç»ç†åˆæäº†ä¸ªéœ€æ±‚ï¼šå½“è¿™ä¸ªæŒ‰é’®ç‚¹å‡»æ—¶ï¼Œå¦‚æœå·²ç»ç™»å½•äº†ï¼Œå‘é€ EventAï¼Œå¦‚æœæ²¡æœ‰ç™»å½•åˆ™å‘é€ EventBï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å†åªæ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;[XXXAnalytics event:]&lt;/code&gt; è¿™ä¹ˆç®€å•äº†ï¼Œè¿˜éœ€è¦åŠ ä¸Šé¢å¤–çš„é€»è¾‘ï¼Œè¿™ä¹Ÿéš¾ä¸å€’æˆ‘ä»¬ï¼ŒåŠ ä¸Šä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt; å³å¯ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;klass&lt;/span&gt;
                   &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;selector&lt;/span&gt;
               &lt;span class=&quot;nf&quot;&gt;eventHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;eventHandler&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aspect_hookSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectPositionAfter&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;usingBlock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eventHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;eventHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ä½¿ç”¨
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DetailViewController&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;@seletor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;onBuyButtonTapped&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eventHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AspectInfo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aspectInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loggedIn&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXXAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;XXXAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å¥½äº†ï¼Œç°åœ¨åªè¦ä¸æ˜¯å¤ªå¤æ‚çš„æ‰“ç‚¹é€»è¾‘(é‚£äº›éœ€è¦æ–¹æ³•ä¸Šä¸‹æ–‡å˜é‡çš„)æˆ‘ä»¬éƒ½èƒ½åº”ä»˜äº†ï¼Œæ¥ä¸‹æ¥å°±è¯¥ç­‰äº§å“æ¥éªŒæ”¶äº†ã€‚äº§å“æ¬äº†ä¸ªå‡³å­ååœ¨èº«è¾¹ï¼Œç„¶åç‚¹ä¸€ä¸‹ Buttonï¼Œçœ‹ä¸€ä¸‹ Consoleï¼Œè¢«å‡ è½®è¹‚èºåï¼Œäº§å“ä¹Ÿæ…¢æ…¢åœ°æ¥å—äº†è¿™ç§éªŒæ”¶æ–¹å¼ã€‚åæ¥æŸä¸€å¤©ï¼Œå¿½ç„¶å‘ç°æŸä¸€é¡¹æˆ–æŸå‡ é¡¹æ•°æ®æœ‰å¼‚å¸¸ï¼Œç„¶åæ‰¾åˆ°å¼€å‘ï¼Œç„äº†ä¸€çœ¼ï¼šå“¦ï¼Œè¿™ä¸ªæ–¹æ³•è¢«é‡æ„äº†ã€‚æˆ–è€…æ–°åŠ çš„æ–¹æ³•å¿˜äº†åŠ ç»Ÿè®¡äº†ã€‚åªèƒ½ç­‰åˆ°ä¸‹ä¸ªç‰ˆæœ¬å†åŠ ä¸Šäº†ï¼Œå¦‚æœåªæ˜¯ä¸€èˆ¬çš„ç»Ÿè®¡æ•°æ®å€’è¿˜å¥½ï¼Œè·Ÿé’±ç›¸å…³çš„å°±éº»çƒ¦äº†ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç›´è§‚çš„éªŒè¯æ–¹å¼å‘¢ï¼Ÿå½“ç„¶ï¼Œç¨‹åºå‘˜æ˜¯ä¸‡èƒ½çš„å‘€ã€‚ä¸€ä¸ªç†æƒ³çš„çŠ¶å†µæ˜¯ï¼Œäº§å“æ‰“å¼€ App åï¼Œå¼€å¯æŸä¸ªå¼€å…³å°±èƒ½çœ‹åˆ°æ‰€æœ‰ä¼šå‘é€ Event çš„æŒ‰é’®ï¼Œå°±åƒè¿™æ ·&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/analytics_highlight.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å…¶ä¸­æ•°å­—ä»£è¡¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;EventID&lt;/code&gt;ã€‚å¦‚ä½•å®ç°å‘¢ï¼Ÿè¿˜è®°å¾—æ³¨å†Œäº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¼ å…¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;class&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;selector&lt;/code&gt; ä¹ˆï¼Œä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šæœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseViewController&lt;/code&gt;ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;BaseViewController&lt;/code&gt; çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;viewDidAppear:&lt;/code&gt; é‡Œåšç‚¹æ–‡ç« äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// BaseViewController.m
&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewDidAppear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;animated&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewDidAppear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è·å–å·²ç»æ³¨å†Œè¿‡çš„ classes
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registeredClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OurAnalytics&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sharedInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registeredClasses&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;registeredClasses&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;enumerateKeysAndObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;isKindOfClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSClassFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// å¦‚ä½•æ ¹æ® selector æ‰¾åˆ°å®ƒçš„å®¿ä¸»ï¼Ÿ
&lt;/span&gt;        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;æ‰€ä»¥ç°åœ¨é—®é¢˜å°±å‰©ä¸‹ï¼Œå¦‚ä½•æ ¹æ® &lt;code class=&quot;highlighter-rouge&quot;&gt;selector&lt;/code&gt; æ‰¾åˆ°å¯¹åº”çš„ Buttonï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œæœ‰äº› Button å¯èƒ½è¦ç­‰ç½‘ç»œè¯·æ±‚å®Œæˆæ‰ä¼šå‡ºç°ï¼Œæ¯”å¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;TableViewCell&lt;/code&gt; é‡Œçš„ Buttonã€‚&lt;/p&gt;

&lt;p&gt;æ²¡æœ‰æƒ³åˆ°å¤ªæ–¹ä¾¿çš„æ–¹æ³•ï¼Œç®€å•ç²—æš´ç‚¹å°±æ˜¯è®¾ç½®ä¸ª Timer æ¯éš”ä¸€æ®µæ—¶é—´æ‰«ä¸€ä¸‹ subviewsï¼Œå¦‚æœæ˜¯ button æˆ– åŒ…å« tapGesture çš„ï¼Œå°±æ‹¿å®ƒä»¬çš„ action å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœ match å°±å¯ä»¥é«˜äº®é‚£ä¸ª button / view äº†ã€‚&lt;/p&gt;

&lt;p&gt;EventID ä¹Ÿä¸€æ ·ï¼Œä¹‹å‰åœ¨æ³¨å†Œæ—¶ä¹Ÿä¼šä¼ ä¸€ä¸ª EventID è¿‡æ¥ï¼Œè¿™é‡Œç›´æ¥æ˜¾ç¤ºå‡ºæ¥å³å¯ã€‚å¯¹äºé‚£äº›ä¼  &lt;code class=&quot;highlighter-rouge&quot;&gt;eventHandler&lt;/code&gt; çš„å°±ä¸è¡Œäº†ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ç†è®ºä¸Šæ˜¯å¯è¡Œçš„ï¼Œæ€§èƒ½ä¸Šä¼šç¨å¾®æœ‰ç‚¹æŸè€—ï¼Œå°¤å…¶æ˜¯å½“ subViews çš„ç»“æ„æ¯”è¾ƒå¤æ‚æ—¶ï¼Œä¸è¿‡åªæ˜¯å†…éƒ¨ç”¨æ¥åšéªŒè¯ï¼Œæ‰€ä»¥è¿™ä¹Ÿä¸æ˜¯ä»€ä¹ˆé—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;çœ‹èµ·æ¥æ•ˆæœå·²ç»ä¸é”™äº†ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è®©è¿™å¥—ä½“ç³»å†çµæ´»ä¸€äº›ï¼Ÿæ¯”å¦‚å¯ä»¥ä»åç«¯åˆ¶å®šæ‰“ç‚¹è§„åˆ™ï¼Ÿå®¢æˆ·ç«¯åªæ˜¯è¯»å–ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå°±åƒè¿™æ ·&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setupAnalytics&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// analyticsRules æ˜¯ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–å‡ºæ¥çš„
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;analyticsRules&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;enumerateObjectsUsingBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSDictionary&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSUInteger&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;idx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Class&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSClassFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;class&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;SEL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSSelectorFromString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;selector&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;eventID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;eventID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;trackEventWithClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;klass&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;seletor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;seletor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eventID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;é‚£å¦‚æœåœ¨åå°çš„æ—¶å€™å¡«é”™äº† Class æˆ– Selector æ€ä¹ˆåŠï¼Ÿè¿˜å¥½æœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;objc_getClassList&lt;/code&gt; å’Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;class_copyMethodList&lt;/code&gt; è¿™ä¸¤ä¸ªè¿è¡Œæ—¶æ–¹æ³•ï¼Œæœ‰äº†å®ƒä»¬å°±å¯ä»¥åœ¨ App å¯åŠ¨æ—¶æ‰«ä¸€éå·²æ³¨å†Œçš„ç±»ï¼ˆè¿‡æ»¤æ‰ UI / NS å¼€å¤´çš„ï¼‰ï¼Œç„¶åå°†å®ƒä»¬çš„ seletor ä¹Ÿä¸€å¹¶ä¿å­˜ä¸‹æ¥å‘é€ç»™æœåŠ¡ç«¯ï¼Œå½“ç„¶è¿™ç§æ“ä½œåªéœ€åœ¨é€‚å½“çš„æ—¶æœºåšä¸€ä¸‹å°±å¯ä»¥äº†ï¼Œæ¯”å¦‚é›†æˆæ‰“åŒ…æ—¶ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨ï¼Œè¿™å¥—ä½“ç³»å°±æ¯”è¾ƒå®Œæ•´äº†ã€‚å½“ç„¶è¿™åªæ˜¯æˆ‘çš„ä¸€äº›æ„æƒ³ï¼Œå¹¶æ²¡æœ‰åœ¨å®è·µä¸­å°è¯•è¿‡ï¼Œæ‰€ä»¥è‚¯å®šä¼šè¸©åˆ°å„ç§å„æ ·çš„å‘ï¼Œä¸è¿‡è‡³å°‘çœ‹èµ·æ¥æ˜¯ä¸ªå¯è¡Œçš„æ–¹æ¡ˆã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>å­¦ä¹ å¦‚ä½•å­¦ä¹ </title>
   <link href="http://limboy.me/essay/2015/08/14/learning-how-to-learn.html"/>
   <updated>2015-08-14T00:00:00+08:00</updated>
   <id>http://limboy.me/essay/2015/08/14/learning-how-to-learn</id>
   <content type="html">&lt;p&gt;åœ¨ã€Œå¦‚ä½•å­¦ä¹ ã€è¿™ç‚¹ä¸Šï¼Œä¸€ç›´è§‰å¾—è‡ªå·±åšçš„ä¸å¤Ÿå¥½ï¼Œæ›¾ç»æƒ³å­¦å‰ä»–ï¼ŒåšæŒäº†ä¸¤ä¸ªç¤¼æ‹œå°±ä»¥ã€Œæ‰‹æŒ‡å¤ªçŸ­ï¼Œä¸é€‚åˆã€ç»ˆç»“äº†ï¼Œåæ¥æƒ³å­¦æ•°å­¦ï¼Œå´ç»ˆç©¶è¿ç¿»å¼€ä¹¦çš„å‹‡æ°”éƒ½æ²¡æœ‰ï¼Œå·¥ä½œä¸€å¿™æ›´æ˜¯é¡¾ä¸ä¸Šè¿™äº›äº†ã€‚æ‰€ä»¥åœ¨ Youtube ä¸Šçœ‹åˆ° Barbara Oakley çš„ &lt;a href=&quot;https://www.youtube.com/watch?v=vd2dtkMINIw&quot;&gt;Learning How to Learn&lt;/a&gt; æ—¶ï¼Œæ‰å‘ç°è‡ªå·±åœ¨å­¦ä¹ ä¸Šçš„å„ç§é—®é¢˜ï¼Œæ”¶è·é¢‡å¤šã€‚å¦‚æœæœ‰å…´è¶£çš„è¯ï¼Œå»ºè®®ç›´æ¥çœ‹è§†é¢‘ï¼Œè®²è§£åœ°å¾ˆæœ‰æ¡ç†ä¸”ç”ŸåŠ¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.wikiwand.com/en/Barbara_Oakley&quot;&gt;Barbara Oakley&lt;/a&gt; æ˜¯ç³»ç»Ÿå·¥ç¨‹å­¦åšå£«ï¼Œä½†å¯¹äºã€Œå­¦ä¹ ã€æ–¹é¢ä¹Ÿé¢‡æœ‰ç ”ç©¶ï¼Œåœ¨ &lt;a href=&quot;https://class.coursera.org/learning-001/lecture&quot;&gt;Coursera&lt;/a&gt; ä¸Šä¹Ÿæœ‰ç›¸åº”çš„è¯¾ç¨‹ã€‚è¿˜å‡ºäº†å‡ æœ¬ä¹¦ï¼Œæ¯”å¦‚ &lt;a href=&quot;http://www.amazon.com/Mind-For-Numbers-Science-Flunked-ebook/dp/B00G3L19ZU&quot;&gt;A Mind For Numbers: How to Excel at Math and Science&lt;/a&gt;ï¼Œè¿™é‡Œå¯¹äºå¥¹åœ¨ &lt;a href=&quot;https://www.youtube.com/watch?v=vd2dtkMINIw&quot;&gt;Google çš„åˆ†äº«&lt;/a&gt;åšä¸€ä¸ªç®€å•çš„ç¿»è¯‘å’Œæ‘˜è¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ‘˜è¦&quot;&gt;æ‘˜è¦&lt;/h3&gt;

&lt;p&gt;(ä¸»æŒäºº)æˆ‘è®°å¾—æŸ¥ç†èŠ’æ ¼è¯´è¿‡ï¼Œä»–è®¤è¯†çš„äººä¸­æ²¡æœ‰ä¸€ä¸ªä¸æ¯å¤©é˜…è¯»çš„ï¼Œè¿˜æŠŠå·´è²ç‰¹å½¢å®¹ä¸ºä¸€å°å­¦ä¹ æœºå™¨ã€‚é‚£ä¹ˆå¦‚ä½•æ‰èƒ½æˆä¸ºä¸€ä¸ªé«˜æ•ˆå­¦ä¹ è€…å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;æ­£æ–‡&quot;&gt;æ­£æ–‡&lt;/h3&gt;

&lt;p&gt;æˆ‘å°çš„æ—¶å€™ï¼Œæƒ³è¦å­¦ä¹ å…¶ä»–è¯­è¨€ï¼Œä½†å¤§å­¦çš„åŠ©å­¦é‡‘ä¸å¤ªå®¹æ˜“æ‹¿åˆ°ï¼Œè€Œæˆ‘åˆè¿«åˆ‡æƒ³è¦å­¦ä¹ ä¸€é—¨è¯­è¨€ï¼Œç„¶åæˆ‘æƒ³åˆ°äº†ä¸€ä¸ªæ—¢å¯ä»¥å­¦ä¹ è¯­è¨€ï¼Œåˆèƒ½å¾—åˆ°äº›æ”¶å…¥çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯å‚å†›ã€‚ç„¶åæˆ‘ç¡®å®å­¦äº†ä¸€é—¨è¯­è¨€ï¼šä¿„è¯­ã€‚è™½ç„¶ä¿„å›½çš„ç¯å¢ƒä¸æ€ä¹ˆæ ·ï¼Œä½†æˆ‘å–œæ¬¢å†’é™©å’Œæ–°çš„è§†è§’ã€‚æˆ‘å›æƒ³åœ¨è¥¿ç‚¹çš„å·¥ç¨‹å¸ˆä»¬ï¼Œä»–ä»¬è§£å†³é—®é¢˜çš„èƒ½åŠ›éå¸¸å‡ºä¼—ï¼Œå¾€å¾€èƒ½æƒ³åˆ°æˆ‘æƒ³ä¸åˆ°çš„ã€‚ç„¶åæˆ‘å°±æƒ³ï¼Œæˆ‘èƒ½ä¸èƒ½ä¹Ÿè¾¾åˆ°è·Ÿä»–ä»¬ä¸€æ ·çš„ç¨‹åº¦ï¼Ÿæœ‰å­¦ç”Ÿæäº†è¿™ä¹ˆä¸ªé—®é¢˜ï¼šå¦‚ä½•æ”¹å˜ä½ çš„å¤§è„‘ã€‚ç„¶åæˆ‘å°±å»äº†è§£ä¸–ç•Œé¡¶çº§çš„æ•™æˆä»–ä»¬æ˜¯å¦‚ä½•åšåˆ°è®©å­¦ç”Ÿæ›´å¥½åœ°å­¦ä¹ å·¥ç¨‹å­¦ã€æ•°å­¦ã€åŒ–å­¦çš„ï¼Ÿä»–ä»¬è‡ªå·±åˆæ˜¯å¦‚ä½•å­¦ä¹ çš„ï¼Ÿè·Ÿä»–ä»¬æ¥è§¦åå‘ç°ï¼Œä»–ä»¬å¸¸ç”¨çš„æœ‰éšå–»å’Œç±»æ¯”ã€‚æ¥ä¸‹æ¥æˆ‘æƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸‹å­¦ä¹ çš„å…³é”®å› ç´ ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“å¤§è„‘æ˜¯å¾ˆå¤æ‚çš„ï¼Œé‚£ä¹ˆæ¥ç®€åŒ–ä¸€ä¸‹ï¼Œå¯ä»¥æƒ³è±¡æˆå¤§è„‘ä»¥ä¸¤ç§ä¸åŒçš„æ¨¡å¼å·¥ä½œã€‚ç¬¬ä¸€ä¸ªæ˜¯ã€Œä¸“æ³¨ã€ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ã€Œå‘æ•£ã€ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå¼¹çƒæœºæ¥æè¿°è¿™ä¸¤ç§çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/pinball_analogy.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‡è®¾å¤§è„‘é‡Œæœ‰ä¸€ä¸ªå¼¹çƒæœº&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/pinball_brain.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åº•éƒ¨æœ‰ä¸€ä¸ªè§¦å‘å¼€å…³ï¼Œæœ‰å¾ˆå¤šçš„æ§½ç‚¹å¯†é›†æ’å¸ƒã€‚æ¯”å¦‚ï¼Œä½ å·²ç»çŸ¥é“äº†ä¹˜æ³•ï¼Œç„¶åè¦å¤„ç†ä¸€é“ä¹˜æ³•è¿ç®—é¢˜ã€‚å½“ä½ å¤„äºã€Œä¸“æ³¨ã€æ¨¡å¼æ—¶ï¼Œä¼šè¿ç”¨å·²æœ‰çš„æ¨¡å‹ï¼Œåœ¨ã€Œä¹˜æ³•ã€çš„æ§½ç‚¹é™„è¿‘æ‰“è½¬ï¼Œä¹Ÿå°±æ˜¯ç»“åˆä»¥å‰çš„å­¦ä¹ ç»éªŒå»å¯»æ‰¾ç­”æ¡ˆã€‚å¦‚æœä½ è¦è§£å†³çš„é—®é¢˜æ˜¯åŸºäºæ–°çš„æ¨¡å‹ï¼Œæ¯”å¦‚ä½ å·²ç»çŸ¥é“äº†ä¹˜æ³•è¿ç®—ï¼Œä½†ä»æ²¡æœ‰æ¥è§¦è¿‡é™¤æ³•è¿ç®—ï¼Œå¦‚ä½•æŒæ¡è¿™ä¸ªæ–°çš„æ¨¡å‹å‘¢ï¼Œè¿™æ—¶å°±è¦ç”¨åˆ°ã€Œå‘æ•£ã€äº†ã€‚å½“å¤„äºã€Œå‘æ•£ã€çŠ¶æ€æ—¶ï¼Œã€Œæ§½ç‚¹ã€ä¹‹é—´çš„è·ç¦»ä¼šå˜å¤§ï¼Œä½ æ— æ³•é€šè¿‡å±€é™åœ¨æŸä¸€ç‚¹æ¥è§£å†³é—®é¢˜ï¼Œä½†è‡³å°‘èƒ½æ‰¾åˆ°ä¸€ç§æ–°çš„æ€è€ƒäº‹ç‰©çš„è§’åº¦ã€‚å½“ä½ åœ¨è§£å†³ä¸€ä¸ªéå¸¸å›°éš¾çš„é—®é¢˜æ—¶ï¼Œä¸è¦é€¼è‡ªå·±é•¿æ—¶é—´å¤„äºã€Œä¸“æ³¨ã€çŠ¶æ€ï¼Œè¿™æ ·å°±ä¼šå±€é™åœ¨ä¸€ä¸ªç‹­å°çš„èŒƒå›´ã€‚æ‰€ä»¥éœ€è¦è¿›å…¥åˆ°å¦ä¸€ç§æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ã€Œå‘æ•£ã€æ¨¡å¼ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è„±ç¦»å½“å‰çš„å·¥ä½œç¯å¢ƒï¼Œå‡ºå»èµ°èµ°ï¼Œå†²ä¸ªæ¾¡ç­‰ï¼Œæ€»ä¹‹æ˜¯è®©å¤§è„‘è„±ç¦»ã€Œä¸“æ³¨ã€çŠ¶æ€ã€‚æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªä¾‹å­å§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/salvador-dali.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.wikiwand.com/en/Salvador_Dal%C3%AD&quot;&gt;Salvador Dali&lt;/a&gt; æ˜¯20ä¸–çºªè‘—åçš„è¶…ç°å®ä¸»ä¹‰ç”»å®¶ï¼Œä»–æœ€çˆ±å¹²çš„äº‹æƒ…å°±æ˜¯ï¼Œå½“é‡åˆ°ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜æ—¶ï¼Œä¼šèººåœ¨æ¤…å­ä¸Šï¼Œæ”¾æ¾å†æ”¾æ¾ï¼ŒåŒæ—¶æ‰‹é‡Œæ¡ç€ä¸€æŠŠé’¥åŒ™ã€‚å½“è¶³å¤Ÿæ”¾æ¾åˆ°å¿«è¦ç¡ç€æ—¶ï¼Œé’¥åŒ™å°±ä¼šæ‰åœ¨åœ°ä¸Šï¼Œä¸åœ°æ¿ç¢°æ’çš„å£°éŸ³ä¼šæŠŠä»–å«é†’ï¼Œç„¶åå°±å¯ä»¥å¸¦ç€ä»ã€Œå‘æ•£ã€çŠ¶æ€æ”¶è·çš„æƒ³æ³•ç»§ç»­è¿›å…¥åˆ°ã€Œä¸“æ³¨ã€æ¨¡å¼ã€‚&lt;/p&gt;

&lt;p&gt;ä½ å¯èƒ½ä¼šè§‰å¾—è¿™ä¸ªå¯¹è‰ºæœ¯å®¶æœ‰ç”¨ï¼Œé‚£ä¹ˆå¯¹å·¥ç¨‹å¸ˆæ˜¯å¦ä¹ŸåŒæ ·æœ‰æ•ˆå‘¢ï¼Ÿæ®ä¼ ï¼Œçˆ±è¿ªç”Ÿä¹Ÿæœ‰ç±»ä¼¼çš„è¡Œä¸ºçˆ±å¥½ï¼Œåªä¸è¿‡ä¸æ˜¯é’¥åŒ™ï¼Œè€Œæ˜¯æ»šç è½´æ‰¿ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ åœ¨è§£å†³ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œå³ä½¿å·²ç»æœ‰æˆåƒä¸Šä¸‡çš„äººå·²ç»è§£å†³è¿‡äº†ï¼Œä½†å¯¹ä½ æ¥è¯´ç¡®å®ç¬¬ä¸€æ¬¡ï¼Œä½ ä¹Ÿå¯ä»¥è¯•è¯•ç±»ä¼¼çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ å¤„äºã€Œä¸“æ³¨ã€çŠ¶æ€æ—¶ï¼Œå¹¶æ²¡æœ‰åˆ©ç”¨åˆ°å…¶ä»–æ›´å¤šçš„å…³è”ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ä¸¤ç§çŠ¶æ€é—´åˆ‡æ¢æ˜¯å¦‚æ­¤é‡è¦ã€‚å°±åƒä½ ä¸èƒ½ä¸€ä¸‹åƒæˆå¤§èƒ–å­ä¸€æ ·ï¼Œç¥ç»ç³»ç»Ÿä¹Ÿæ˜¯éœ€è¦ä¸€æ®µæ—¶é—´æ¥é€‚åº”æ–°çš„å­¦ä¹ å’Œæ€ç»´æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;ä½ æˆ–è®¸ä¼šè¯´ï¼Œæˆ‘æœ‰æ‹–å»¶ç—‡ï¼Œé‚£æˆ‘ä»¬å°±æ¥è¯´è¯´æ‹–å»¶ç—‡ã€‚æ‹–å»¶ç—‡çš„æˆå› æ˜¯å½“ä½ é¢å¯¹ä¸å–œæ¬¢åšçš„äº‹æƒ…æ—¶ï¼Œå¤§è„‘çš„ã€Œç—›æ„Ÿä¸­å¿ƒã€å°±ä¼šè¢«æ¿€æ´»ã€‚æ‰€ä»¥å½“ä½ çœ‹ä¸€æœ¬ä¸å–œæ¬¢çš„ä¹¦æ—¶ï¼Œä¼šæ„Ÿè§‰åˆ°éšç—›ï¼Œè¿™ç§ç—›å°±åƒæ‰‹æŒ‡è¢«é”¤å­ç ¸äº†ä¸€æ ·ï¼Œé€šå¸¸ä¼šæœ‰ä¸¤ç§åšæ³•ï¼šç¬¬ä¸€ç§æ˜¯èŠ±å¤§æ¦‚ 20 åˆ†é’Ÿå»æå®šå®ƒï¼Œç„¶åç—›æ„Ÿå°±ä¼šæ…¢æ…¢é™ä½è¿›è€Œæ¶ˆå¤±ã€‚ä½†å¦‚æœä½ åƒå¤§å¤šæ•°äººä¸€æ ·ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åˆ°å…¶ä»–åšèµ·æ¥æ›´èˆ’æœçš„äº‹æƒ…ä¸Šï¼Œå°±ä¼šé©¬ä¸Šå°±ä¼šæ„Ÿåˆ°å¥½äº›äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/procrastination.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œæ‹–å»¶ç—‡ä¹Ÿæ˜¯ä¼šä¸Šç˜¾çš„ï¼Œè¿™å¯¹ä½ çš„ç”Ÿæ´»æ˜¯éå¸¸æœ‰å®³çš„ã€‚æœ€æœ‰æ•ˆçš„æ–¹å¼æ˜¯ä½¿ç”¨ã€Œç•ªèŒ„å·¥ä½œæ³•ã€ï¼Œé€šå¸¸æ¥è¯´è®¾ç½® 25 åˆ†é’Ÿä¸ºä¸€ä¸ªã€Œç•ªèŒ„æ—¶é—´ã€ï¼Œç„¶åå…³é—­å…¶ä»–æ‰€æœ‰ä¼šæ‰“æ‰°ä½ çš„ä¸€åˆ‡ã€‚åœ¨è¿™ 25 åˆ†é’Ÿå†…ï¼Œé›†ä¸­ç²¾åŠ›è¿›å…¥åˆ°ã€Œä¸“æ³¨ã€æ¨¡å¼ã€‚ç”±äºä½ ä¸“æ³¨äºå½“å‰çš„ä»»åŠ¡ï¼Œè€Œä¸æ˜¯ã€Œæˆ‘å¿…é¡»å®Œæˆå®ƒã€çš„ç—›è‹¦ï¼Œåšèµ·æ¥å°±ä¼šå®¹æ˜“å¾ˆå¤šã€‚å½“åˆ°æ—¶é—´åï¼Œç»™è‡ªå·±ç‚¹å¥–åŠ±ï¼Œå‡ºå»èµ°èµ°æˆ–ä¸Šä¸Šç½‘ã€èŠèŠå¤©éƒ½è¡Œã€‚æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦ä»¥å®Œæˆä»»åŠ¡ä¸ºç›®æ ‡ï¼Œæ—¶é—´åˆ°äº†ï¼Œå°±ä¼‘æ¯ã€‚å®ƒèƒ½å¸®åŠ©ä½ è·¨è¿‡ç—›è‹¦æœŸï¼Œè¿›å…¥ flow çŠ¶æ€ã€‚è¿˜æœ‰å°±æ˜¯ä¸è¦ä¸€ä¸‹å­åšå¤ªå¤šçš„ã€Œç•ªèŒ„ã€ï¼Œä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæ…¢æ…¢é€‚åº”è¿™å¥—ç³»ç»Ÿã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰è·Ÿå­¦ä¹ å¾ˆç›¸å…³çš„ä¸€ç‚¹æ˜¯ç¡çœ ã€‚å¸¸å¸¸æœ‰äººè¯´è€ƒè¯•å‰è¦ç¡å¥½è§‰ï¼Œäº‹å®ä¸Šï¼Œç¡çœ åœ¨å„ç§å±‚é¢ä¸Šéƒ½å¾ˆé‡è¦ã€‚å½“å¤„äºéç¡çœ çŠ¶æ€æ—¶ï¼Œä»£è°¢ç‰©ä¼šåœ¨ç»†èƒé—´äº§ç”Ÿï¼Œå®ƒä»¬å°±åƒåƒåœ¾ä¸€æ ·åœ¨é‚£ï¼Œè€Œä¸”è¶Šç§¯è¶Šå¤šï¼Œè¿™ä¼šå½±å“ä½ çš„åˆ¤æ–­ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå½“ä½ é•¿æ—¶é—´å·¥ä½œæ—¶ï¼Œé€»è¾‘ä¼šè¶Šæ¥è¶Šä¹±ã€‚å½“ä½ ç¡è§‰æ—¶ï¼Œè¿™äº›ç»†èƒä¼šç¼©å°ï¼Œç„¶ååƒåœ¾å°±è¢«å†²èµ°äº†ï¼Œå°±åƒé‡æ–°æ‰“æ‰«äº†æˆ¿é—´ä¸€æ ·ã€‚&lt;/p&gt;

&lt;p&gt;æ ¹æ®ç¥ç»å­¦ä¸Šçš„å‘ç°ï¼Œå°†å­¦ä¹ åˆ†ä¸ºå¤šä¸ªçŸ­æœŸå­¦ä¹ ã€ç¡è§‰ï¼Œå¤šä¸ªçŸ­æœŸå­¦ä¹ ã€ç¡è§‰ï¼Œè¿™æ ·çš„å¾ªç¯ç³»ç»Ÿï¼Œå¯¹äºæ„å»ºç¥ç»ç½‘ç»œéå¸¸æœ‰å¸®åŠ©ï¼Œè¿™ä¹Ÿæ˜¯é«˜æ•ˆå­¦ä¹ çš„ç§˜è¯€ä¹‹ä¸€ã€‚&lt;/p&gt;

&lt;p&gt;äººæ¯å¤©éƒ½ä¼šé•¿å‡ºæ–°çš„ç¥ç»å…ƒï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è®©è¿™äº›ç¥ç»å…ƒå­˜æ´»å¹¶æˆé•¿ã€‚ä¸€ä¸ªå°±æ˜¯å°†è‡ªå·±æš´éœ²åœ¨æ–°çš„ç¯å¢ƒä¸­ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ—…è¡Œä¼šå¾ˆæœ‰å¸®åŠ©ï¼Œè¿™äº›æ–°å…ƒç´ èƒ½è®©æ–°å‡ºç”Ÿçš„ç¥ç»å…ƒæ´»ä¸‹æ¥ã€‚è¿˜æœ‰ä¸€ä¸ªè®©æ–°é•¿å‡ºæ¥çš„ç¥ç»å…ƒæ´»ä¸‹æ¥çš„æ–¹æ³•ï¼Œå¾ˆç®€å•ï¼Œå°±æ˜¯é”»ç‚¼ã€‚ä¸éœ€è¦åŠ±å¿—æˆä¸ºå¥¥æ—åŒ¹å…‹è¿åŠ¨å‘˜æˆ–è€…æˆä¸ºé©¬æ‹‰æ¾é€‰æ‰‹ï¼Œå³ä½¿åªæ˜¯ç®€å•çš„æ•£æ­¥ä¹Ÿæ˜¯éå¸¸æœ‰æ•ˆçš„ã€‚ä½†å³ä½¿åªæœ‰å‡ å¤©çš„é”»ç‚¼ä¹Ÿä¼šå¸¦æ¥æ›´å¤§çš„æ•ˆæœï¼Œå®ƒä¼šå¢å¼ºæ–°ç¥ç»å…ƒçš„å­˜æ´»å’Œç”Ÿé•¿ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥èŠèŠå·¥ä½œè®°å¿†ï¼ˆWorking Memoryï¼‰ï¼Œå·¥ä½œè®°å¿†å°±æ˜¯ä¸´æ—¶è®°ä½ä¸€äº›ä¿¡æ¯ï¼Œä»¥å‰å¸¸è¯´æœ‰7ä¸ªæ§½å¯ä»¥ç”¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ èƒ½è®°ä½7ä½æ•°çš„ç”µè¯å·ç ï¼Œä½†äº‹å®ä¸Šå¤§æ¦‚åªæœ‰4ä¸ªæ§½å¯ä»¥ç”¨ï¼Œæ‰€ä»¥å½“ä½ ç”¨å·¥ä½œè®°å¿†æ¥è®°ä¸€äº›ä¸œè¥¿æ—¶ï¼Œå¯ä»¥æƒ³è±¡æœ‰ä¸€åªç« é±¼åœ¨æŒæ§ç€è¿™å‡ ä¸ªæ§½ï¼Œå¹¶å»ºç«‹è¿æ¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä¸èƒ½ä¸€æ¬¡è®°ä½å¤ªå¤šçš„æƒ³æ³•ã€‚å½“ä½ å¤šä»»åŠ¡åŒæ—¶å¼€å·¥æ—¶ï¼Œç›¸å½“äºæŠŠç« é±¼çš„è§¦è§’ä»ä»…æœ‰çš„å‡ ä¸ªæ§½ä¸­æ‹¿èµ°ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œè¿™ä¼šè®©ä½ å˜å¾—ç¬¨ä¸€ç‚¹ã€‚è€Œå‘æ•£æ¨¡å¼åˆ™æ˜¯æœ‰æ›´å¤šçš„è¿æ¥ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/octopus.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é‚£å¦‚ä½•æŠŠçŸ­æœŸè®°å¿†å˜æˆé•¿æœŸè®°å¿†å‘¢ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯ç»ƒä¹ ï¼Œç»ƒå¾—è¶Šå¤šï¼Œç¥ç»å…ƒå°±ä¼šé•¿å¾—è¶Šé•¿ï¼Œæ‰å¾—è¶Šæ·±ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/neural-die.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ä¸ç»ƒä¹ ï¼Œé‚£ä¹ˆè¿™äº›ã€Œè™è ã€å°±ä¼šåœ¨æ¨¡å¼å½¢æˆé•¿æœŸè®°å¿†å‰æŠŠå®ƒå¼èµ°ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœ‰æ—¶è§‰å¾—å·²ç»ç†è§£äº†æŸä¸ªæ¦‚å¿µï¼Œç„¶åèµ°å¼€äº†ï¼Œè¿‡äº†ä¸¤å¤©ï¼Œè¿™äº›å†…å®¹éƒ½è¢«ã€Œè™è ã€å¼èµ°äº†ï¼Œç„¶åå°±è®°ä¸èµ·ä»€ä¹ˆäº†ã€‚æ‰€ä»¥æœ€å¥½çš„æ–¹å¼å°±æ˜¯å¸¦ä¸€å®šé—´éš™çš„é‡å¤ç»ƒä¹ (Spaced Repetition)ï¼Œæ¯”å¦‚å‘¨ä¸€ã€å‘¨äºŒã€å‘¨ä¸‰ã€å‘¨äº”ã€å‘¨æ—¥ç»ƒä¹ ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥è¯´è¯´ Chunkã€‚å‡è®¾ä½ è¦æ‹¼ä¸€å‰¯å›¾ï¼Œå¦‚æœä¸æ˜ç™½æ¯ä¸€å—ä»£è¡¨çš„å«ä¹‰ï¼Œå°±ä¼šæœ‰æ— ä»ä¸‹æ‰‹çš„æ„Ÿè§‰ï¼Œå°±åƒä¸­é—´çš„é‚£ä¸ªåœ†ä¸€æ ·ï¼Œä½ èƒ½çœ‹åˆ°å®ƒï¼Œå®ƒä¹Ÿæ˜¯ä¸ª Chunkï¼Œä½†å´æ— æ³•ä¸å…¶ä»–çš„ Chunk äº§ç”Ÿè”ç³»ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ­»è®°ç¡¬èƒŒçš„æ•ˆæœä¼šå¾ˆå·®çš„åŸå› ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/chunk.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å½“ä½ åœ¨ç ”ç©¶æŸä¸ªè¯¾é¢˜æ—¶ï¼Œä½ å…¶å®åœ¨åˆ›å»ºä¸€ä¸ª Chunk ç¾¤ï¼Œè¿™äº› Chunks ä¼šè·Ÿå…¶ä»–çš„ Chunks ç”Ÿå…³è”ï¼Œè¿™ä¹Ÿæ˜¯ä¼Ÿå¤§åˆ›æ„çš„äº§ç”Ÿä¹‹æºã€‚è¿™æ—¶å¾€å¾€ä¼šå¾—åˆ°ä¸€äº›æ”¯ç¦»ç ´ç¢çš„ Chunksï¼Œå¦‚æœéƒ½å­¦ä¼šäº†ï¼Œå°±ä¼šå½¢æˆä¸€å‰¯å®Œæ•´çš„å›¾ç‰‡ï¼Œå³ä½¿å°‘äº†å…¶ä¸­å‡ ç‰‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/chunk.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä½†å¦‚æœä½ ä¸é‡å¤ç»ƒä¹ ï¼Œå¹¶ä¸”æ·±åˆ»æŒæ¡ Chunksï¼Œä¹Ÿèƒ½æŠŠ Chunks æ‹¼èµ·æ¥ï¼Œåªä¸è¿‡æ˜¯æ¨¡ç³Šçš„ï¼Œè€Œä¸”å¾ˆéš¾æ‹¼æˆå…¨å›¾ã€‚&lt;/p&gt;

&lt;p&gt;ä¸åŒé¢†åŸŸçš„ Chunksï¼Œæœ‰å¯èƒ½é•¿å¾—å·®ä¸å¤šï¼Œè¿™æ ·å°±å¯ä»¥å€Ÿé‰´åŸæœ‰çš„ Chunk æ¥å­¦ä¹ æ–°çš„ Chunkã€‚æ¯”å¦‚ä½ æ˜¯ä¸€ä¸ªç‰©ç†å­¦å®¶ï¼Œå†å»å­¦ç»æµå­¦ä¼šæ›´ç®€å•äº›ï¼Œå› ä¸ºå…¶ä¸­çš„ä¸€äº› Chunks éå¸¸ç›¸åƒã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/multi-chunks.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æœ€åç»™å¤§å®¶ä¸€äº›å…³äºå­¦ä¹ çš„å»ºè®®ï¼š&lt;/p&gt;

&lt;p&gt;æµ‹è¯•æ˜¯å¿…è¦ä¸”é‡è¦çš„ã€‚Test yourself on everything, all the timeã€‚åŒæ ·çš„æ—¶é—´ç”¨æ¥åšæµ‹è¯•å’Œå­¦ä¹ ï¼Œå‰è€…ä¼šè®©ä½ æ”¶è·æ›´å¤šã€‚ä½¿ç”¨å¡ç‰‡(Flashcards)ï¼Œå¡ç‰‡ä¸æ˜¯ä¸“é—¨ç”¨æ¥å­¦ä¹ è¯­è¨€çš„ï¼Œå¡ç‰‡æ˜¯ä¸€ä¸ªé€šç”¨çš„å­¦ä¹ æ‰‹æ®µï¼Œè¯—äººä»¬ä¼šç”¨å®ƒè®°å¿†è¯—å¥ï¼Œä»¥æ­¤æ¥æ›´å¼ºçƒˆåœ°æ„Ÿå—è¯—è¯å¸¦æ¥çš„éœ‡æ’¼ã€‚&lt;/p&gt;

&lt;p&gt;è®°å¾—åšã€Œå®¶åº­ä½œä¸šã€ï¼Œä¸è¦åªåšä¸€æ¬¡ï¼ŒæŒ‘å…¶ä¸­çš„é‡ç‚¹å¤šåšå‡ æ¬¡ï¼Œå³ä½¿åªæ˜¯åœ¨å¤§è„‘é‡Œè¿‡ä¸€éï¼Œç¡®ä¿è‡ªå·±çœŸçš„æŒæ¡äº†ï¼Œè¿™æ ·ä½ å°±å¾—åˆ°äº†ä¸€ç»„ Chunksã€‚&lt;/p&gt;

&lt;p&gt;æœ€æœ‰æ•ˆçš„æ–¹æ³•è¿˜æ˜¯ã€Œå›æƒ³ã€ï¼Œå°¤å…¶æ˜¯å½“ä½ åœ¨è§£å†³å›°éš¾çš„é—®é¢˜æ—¶ã€‚å½“ä½ åœ¨é˜…è¯»æ–‡ç« æ—¶ï¼Œè¯•ç€ç¦»å¼€ä¹¦æœ¬ï¼Œå›æƒ³ä¸€ä¸‹èƒ½å¦è®°èµ·å…¶ä¸­çš„è¦ç‚¹ï¼Œè¿™å¯¹äºç†è§£å†…å®¹æœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼Œæ¯”åå¤è¯»å’Œæ€ç»´å¯¼å›¾æ•ˆæœéƒ½è¦å¥½ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ªç®€å•çš„æŠ€å·§æ˜¯å‘å…¶ä»–äººé˜è¿°ä½ æ‰€ç†è§£çš„ä¸œè¥¿ï¼Œå¹¶ä¸”å‡è®¾å¯¹æ–¹åªæ˜¯ä¸€ä¸ª 10 å²çš„å°å­©ï¼ˆè´¹æ›¼å­¦ä¹ æ³•ï¼‰ã€‚å¦‚æœä½ èƒ½æ‰¾åˆ°ä¸€ä¸ªç®€å•æ¸…æ¥šçš„æè¿°ï¼Œå°±èƒ½æ›´åŠ æ·±å…¥åœ°ç†è§£ã€‚ä½ ç”šè‡³å¯ä»¥æŠŠè‡ªå·±æ”¾åˆ°é—®é¢˜å‘ç”Ÿçš„åœºæ™¯ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;å½“ä½ å¤„äºä¸“æ³¨æ¨¡å¼æ—¶ï¼Œä¼šæœ‰ä¸€ç§ã€Œæˆ‘å·²ç»æŒæ¡äº†ã€çš„æ„Ÿè§‰ï¼Œè¿™æ—¶å¯ä»¥è·Ÿå…¶ä»–å¤„äº diffuse æ¨¡å¼çš„äººäº¤æµä¸‹æƒ³æ³•ï¼Œæœ‰æ—¶ä¼šå¸®åŠ©ä½ çº æ­£é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬éƒ½è¯´è¦è¿½éšä½ çš„çƒ­æƒ…ï¼Œä½†çƒ­æƒ…åªæ˜¯è®©ä½ æ“…é•¿çš„ä¸œè¥¿å˜å¾—æ›´æ“…é•¿ï¼Œè€Œæœ‰äº›ä¸œè¥¿è¦èŠ±å¾ˆé•¿çš„æ—¶é—´æ‰èƒ½æ“…é•¿ï¼Œæ‰€ä»¥ä¸ä»…ä»…è¦è¿½éšä½ çš„çƒ­æƒ…ï¼Œè¿˜è¦æ‰©å¤§ä½ çš„çƒ­æƒ…ï¼Œç„¶åç”Ÿæ´»è´¨é‡å°±ä¼šæœ‰å¤§å¹…åº¦çš„æå‡ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Advanced NSOperations</title>
   <link href="http://limboy.me/tech/2015/08/08/advanced-nsoperations.html"/>
   <updated>2015-08-08T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2015/08/08/advanced-nsoperations</id>
   <content type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h3&gt;

&lt;p&gt;è¿™ç¯‡æ–‡ç« æ˜¯å¯¹ &lt;a href=&quot;https://developer.apple.com/videos/wwdc/2015/?id=226&quot;&gt;WWDC 2015 Session 226: Advanced NSOperations&lt;/a&gt; çš„ä¸€ä¸ªå°ç»“ï¼Œåœ¨é‚£ä¸ªè§†é¢‘ä¸­ï¼Œ&lt;a href=&quot;https://twitter.com/davedelong&quot;&gt;Dave DeLong&lt;/a&gt; åˆ†äº«äº† NSOperation çš„é«˜çº§ç©æ³•ï¼ŒWWDC App å°±æ˜¯åŸºäºè¿™å¥—ç©æ³•åšçš„ï¼Œè¿˜æ˜¯æŒºå¼€é˜”æ€è·¯çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;nsoperation-å’Œ-nsoperationqueue-ç®€ä»‹&quot;&gt;NSOperation å’Œ NSOperationQueue ç®€ä»‹&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬çŸ¥é“ NSOperation å¯ä»¥æ‰§è¡Œä¸€äº›åå°æ“ä½œï¼Œå¦‚ HTTP è¯·æ±‚ï¼Œåœ¨ iOS 4.0 ä¹‹å‰æ˜¯åŸºäº NSThread æ¥å®ç°çš„ï¼ŒiOS 4.0 å¸¦äº† GCDï¼ŒNSOperation åº•å±‚ä¹ŸåŸºäº GCD é‡å†™äº†åº•å±‚å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ NSOperation æ˜¯ GCD çš„é«˜å±‚å°è£…ï¼ŒåŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›æ›´åŠ ä¾¿åˆ©çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å–æ¶ˆä»»åŠ¡ï¼Œè®¾ç½®ä¾èµ–ç­‰ã€‚åœ¨è¿›å…¥é«˜çº§ç©æ³•å‰ï¼Œå…ˆç®€å•çš„ä»‹ç»ä¸‹ NSOperation å’Œ NSOperationQueueã€‚&lt;/p&gt;

&lt;h4 id=&quot;nsoperationqueue-maxconcurrentoperationcount&quot;&gt;NSOperationQueue maxConcurrentOperationCount&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªå±æ€§è¡¨ç¤ºçš„æ˜¯ NSOperationQueue æœ€å¤šå¯ä»¥åŒæ—¶å¤„ç†å‡ ä¸ªä»»åŠ¡ï¼Œå‡å¦‚æˆ‘ä»¬å¸Œæœ›å®ƒä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯çº¿æ€§ Queueï¼Œå¯ä»¥è®¾ç½® &lt;code class=&quot;highlighter-rouge&quot;&gt;maxConcurrentOperationCount = 1&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/nsoperation-1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸­é—´çš„ç‚¹è¡¨ç¤ºä»»åŠ¡çš„çŠ¶æ€ï¼Œåœ¨ä¸Šä¸€ä¸ªä»»åŠ¡å®Œæˆå‰ï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡ä¸ä¼šè¢«æ‰§è¡Œï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ª workerã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœå¸Œæœ›ä¸€æ¬¡èƒ½å¤„ç†å¤šä¸ªï¼Œå°†è¿™ä¸ªå€¼è®¾ç½®ä¸ºå¤§äº 1 å³å¯ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¾ç½®ä¸€ä¸ªåˆç†çš„æœ€å¤§å€¼ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/nsoperation-2.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h4 id=&quot;nsoperation-cancel&quot;&gt;NSOperation cancel&lt;/h4&gt;

&lt;p&gt;ä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹åˆ°ï¼Œæ­£åœ¨è¢«æ‰§è¡Œçš„ä»»åŠ¡çš„çŠ¶æ€è·Ÿåœ¨åé¢æ’é˜Ÿçš„çŠ¶æ€æ˜¯ä¸ä¸€æ ·çš„ï¼Œæœ‰è¿™ä¹ˆå‡ ç§çŠ¶æ€ï¼špending, ready, executing, finished, cancelledã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/nsoperation-3.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¹‹å‰æåˆ°è¿‡ NSOperation ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§æ˜¯å¯ä»¥è¢«å–æ¶ˆï¼Œä½†ä¸åŒçŠ¶æ€çš„å–æ¶ˆå¤„ç†ä¹Ÿä¸ä¸€æ ·ã€‚æ¯”å¦‚å½“ Operation å¤„äº pending, ready çŠ¶æ€æ—¶ï¼Œç³»ç»Ÿå¯ä»¥å»çœ‹ä¸€ä¸‹è¿™ä¸ª Operation æ˜¯å¦å·²ç»è¢«å–æ¶ˆäº†(åˆ¤æ–­ self.cancelled)ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±ä¸æ‰§è¡Œä»»åŠ¡äº†ã€‚ä½†æ˜¯å½“ Operation å¤„äº executing çŠ¶æ€æ—¶ï¼Œå–æ¶ˆçš„æ“ä½œå°±åªèƒ½è‡ªå·±å¤„ç†äº†ï¼Œæ¯”å¦‚&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSOperation&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancelled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// executing
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;h4 id=&quot;nsoperation-dependency&quot;&gt;NSOperation dependency&lt;/h4&gt;

&lt;p&gt;NSOperation è¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹æ€§æ˜¯å¯ä»¥è®¾ç½®ä¾èµ–&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/nsoperation-4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»»åŠ¡ A éœ€è¦ç­‰å¾… ä»»åŠ¡ B å’Œ ä»»åŠ¡ C å®Œæˆï¼Œæ‰èƒ½è¢«æ‰§è¡Œï¼Œè€Œä»»åŠ¡ B éœ€è¦ç­‰åˆ° ä»»åŠ¡ D å®Œæˆæ‰èƒ½è¢«æ‰§è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶å‰ææ˜¯è¿™äº› Operation éƒ½éœ€è¦è¢«æ”¾åˆ°æŸä¸ª Queue é‡Œï¼Œè¿™æ ·å®ƒä»¬çš„çŠ¶æ€æ‰ä¼šå‘ç”Ÿæ”¹å˜ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é«˜çº§ç©æ³•&quot;&gt;é«˜çº§ç©æ³•&lt;/h3&gt;

&lt;p&gt;å¼€å‘ App çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›é€»è¾‘æ˜¯å¯ä»¥å…±ç”¨çš„ï¼Œæ¯”å¦‚ç™»å½•ã€ç½‘ç»œçŠ¶å†µç­‰ï¼Œæœ€å¥½å¯ä»¥ç»„è£…èµ·æ¥ï¼Œå°±åƒè¶…èƒ½é™†æˆ˜é˜Ÿé‡Œçš„ megabot ä¸€æ ·&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/megabot.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åŸºäºå‰é¢æåˆ°çš„ NSOperation / NSOperationQueue çš„ä¸€äº›ç‰¹ç‚¹ï¼Œè‹¹æœçš„å·¥ç¨‹å¸ˆä»¬æƒ³åˆ°äº†ä»–ä»¬çš„è§£å†³æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&quot;condition&quot;&gt;Condition&lt;/h4&gt;

&lt;p&gt;Conditionï¼Œä¹Ÿå°±æ˜¯æ¡ä»¶ï¼Œå®ƒå¯ä»¥è¢«é™„åŠ åˆ° Operation ä¸Šï¼Œåªæœ‰å½“ Condition è¢«æ»¡è¶³æ—¶ï¼ŒOperation æ‰èƒ½è¢«æ‰§è¡Œã€‚æ¯”å¦‚åªæœ‰åœ¨æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹æ‰èƒ½è¿›è¡Œäº¤æ˜“ï¼Œè¿™æ—¶ã€Œç½‘ç»œçŠ¶å†µã€å°±æ˜¯é™„åŠ ç»™ã€Œäº¤æ˜“ã€çš„ Conditionã€‚&lt;/p&gt;

&lt;p&gt;ä¸€ä¸ª Condition ä¸»è¦åŒ…å«äº† 3 ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;isMutuallyExclusive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dependencyForOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 3&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evaluateForOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;OperationConditionResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;è¿™ä¸ªå±æ€§ç”¨æ¥è¡¨æ˜è¿™ä¸ª Condtion æ˜¯å¦æ˜¯æ’ä»–çš„ï¼Œå¦‚æœæ˜¯çš„è¯ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å‡ºç°ä¸€ä¸ªè¯¥ç±»å‹çš„å®ä¾‹ï¼Œç±»å‹çš„æŒ‡å®šæ˜¯é€šè¿‡è®¾ç½® &lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt; æ¥å®ç°çš„ã€‚&lt;/li&gt;
  &lt;li&gt;ä¸ºä¼ å…¥çš„ operation è¿”å›ä¸€ä¸ªä¾èµ–çš„ operationï¼Œæ¯”å¦‚ã€Œå–œæ¬¢ã€è¿™ä¸ª Operation éœ€è¦ç”¨æˆ·å·²å¤„äºç™»å½•çŠ¶æ€ï¼Œé‚£ä¹ˆã€Œç™»å½•ã€è¿™ä¸ª Condition çš„è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥è¿”å›ä¸€ä¸ªã€Œç™»å½•ã€çš„ Operationã€‚&lt;/li&gt;
  &lt;li&gt;è¿™ä¸ªæ–¹æ³•æ˜¯æŸ¥çœ‹è¿™ä¸ª Condition çš„æ‰§è¡Œç»“æœï¼Œæ¯”å¦‚å‰é¢çš„ã€Œç™»å½•ã€Operation ç»“æŸåï¼Œç³»ç»Ÿå°†è¦æ‰§è¡Œã€Œå–œæ¬¢ã€è¿™ä¸ª Operationï¼Œç„¶åè¿™ä¸ªæ–¹æ³•å°±ä¼šè¢«è§¦å‘ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿçš„è¯ï¼Œå°±æ‰§è¡Œã€Œå–œæ¬¢ã€ï¼Œå¦‚æœæœ‰é”™è¯¯å‘ç”Ÿã€Œå–œæ¬¢ã€å°±ä¼šè‡ªåŠ¨ç»“æŸã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æ‰€ä»¥æ€»ç»“èµ·æ¥ Condition ä¸»è¦å¹²äº†è¿™ä¹ˆä¸‰ä»¶äº‹&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/nsoperation-condition.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¥çœ‹ä¸€ä¸ªç®€å•çš„ Condition (æ¥è‡ª WWDC Sample)&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ReachabilityCondition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;OperationCondition&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;hostKey&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Host&quot;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Reachability&quot;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;isMutuallyExclusive&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSURL&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dependencyForOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evaluateForOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;OperationConditionResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;ReachabilityController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;requestReachability&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reachable&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reachable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// 3&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Satisfied&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;ConditionFailed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;userInfo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                    &lt;span class=&quot;kt&quot;&gt;OperationConditionKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;dynamicType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;dynamicType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;hostKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;host&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// 4&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Failed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;Condtion åˆå§‹åŒ–æ—¶å¯ä»¥ä¼ å‚æ•°è¿›æ¥ã€‚&lt;/li&gt;
  &lt;li&gt;è¿™ä¸ª Condition æ²¡æœ‰ç”Ÿæˆä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;dependencyForOperation&lt;/code&gt;ï¼Œå› ä¸ºç”Ÿæˆä¾èµ– Operation çš„ç›®çš„æ˜¯å½“è¿™ä¸ª Operation è¿è¡Œå®Œåï¼Œå¯ä»¥åœ¨ evaluateForOperation æ—¶è·å–ä¹‹å‰çš„è¿è¡Œç»“æœï¼Œè€Œè¿™é‡Œç›´æ¥è°ƒç”¨ ReachabilityController çš„ requestReachability æ–¹æ³•å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥å°±å…å»äº†è¿™ä¸€æ­¥ã€‚&lt;/li&gt;
  &lt;li&gt;å½“ç»“æœç¬¦åˆé¢„æœŸæ—¶ï¼Œè°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;completion(.Satisfied)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å½“å‡ºç°å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;completion(.Failed(error))&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;operation&quot;&gt;Operation&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Operation&lt;/code&gt; ç»§æ‰¿è‡ª &lt;code class=&quot;highlighter-rouge&quot;&gt;NSOperation&lt;/code&gt;ï¼ŒåŒæ—¶æ·»åŠ äº†ä¸€äº›æ–¹æ³•ï¼Œä¸»è¦å¯ä»¥åˆ†ä¸º 4 éƒ¨åˆ†&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è®¾ç½®çŠ¶æ€å˜é‡ï¼ŒåŒæ—¶æ‰‹åŠ¨è®¾ç½® KVO&lt;/li&gt;
  &lt;li&gt;æ‰§è¡Œ conditions çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;evaluateForOperation&lt;/code&gt; æ–¹æ³•&lt;/li&gt;
  &lt;li&gt;æ·»åŠ  Observer&lt;/li&gt;
  &lt;li&gt;æ·»åŠ  Condtion&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;è®¾ç½®çŠ¶æ€å˜é‡åŒæ—¶æ‰‹åŠ¨è®¾ç½®-kvo&quot;&gt;è®¾ç½®çŠ¶æ€å˜é‡ï¼ŒåŒæ—¶æ‰‹åŠ¨è®¾ç½® KVO&lt;/h5&gt;

&lt;p&gt;åœ¨ç³»ç»Ÿæä¾›çš„çŠ¶æ€çš„åŸºç¡€ä¸Šï¼Œåˆæ·»åŠ äº†ä¸€äº›æ–°çš„çŠ¶æ€ï¼Œå¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;EvaluatingConditions&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;Pending&lt;/code&gt; ç­‰ï¼Œè¿™äº›çŠ¶æ€çš„æ”¹å˜éƒ½éœ€è¦è§¦å‘å†…ç½®çŠ¶æ€çš„ KVOï¼Œå¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;isExecuting&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;isFinished&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;isReady&lt;/code&gt; ç­‰ã€‚é€šå¸¸çš„åšæ³•ä¼šæ˜¯è¿™æ ·ï¼š&lt;/p&gt;

&lt;div class=&quot;language-objc highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;willChangeValueForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;isExecuting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Executing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;didChangeValueForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;isExecuting&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;å½“åªæœ‰å°‘é‡çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œåœ¨å‰ååŒ…ä¸€å±‚è¿˜å¯ä»¥æ¥å—ï¼Œä½†å¦‚æœå¤šäº†çš„è¯ï¼Œå°±ä¸ç¾è§‚äº†ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ KVO çš„ä¸€ä¸ªæ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;+ keyPathsForValuesAffectingValueForKey:&lt;/code&gt;ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œå“ªäº› keyPaths çš„æ”¹å˜ä¼šå¯¼è‡´ &lt;code class=&quot;highlighter-rouge&quot;&gt;Key&lt;/code&gt; å‘ç”Ÿå˜åŒ–ã€‚æ‰€ä»¥å¯ä»¥å®šä¹‰è¿™å‡ ä¸ªæ–¹æ³•ï¼Œç„¶åæ­£å¸¸è®¾ç½® &lt;code class=&quot;highlighter-rouge&quot;&gt;state&lt;/code&gt; å°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPathsForValuesAffectingIsReady&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPathsForValuesAffectingIsExecuting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keyPathsForValuesAffectingIsFinished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;å½“ç„¶ï¼Œè¿™åªæ˜¯å®Œæˆäº†ä¸€åŠï¼Œç³»ç»ŸçŸ¥é“ state å˜äº†åï¼Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;isReady&lt;/code&gt; ä¼šå˜ï¼Œç„¶åå°±ä¼šè°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;ready&lt;/code&gt; æ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸‰ä¸ªæ–¹æ³•æˆ‘ä»¬ä¹Ÿè¦ä¸€å¹¶è¦†ç›–æ‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;executing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Executing&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;finished&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Finished&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Pending&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// çœå»ä¸ç›¸å…³çš„ä»£ç &lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ready&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
                &lt;span class=&quot;nf&quot;&gt;evaluateConditions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;c1&quot;&gt;// Until conditions have been evaluated, &quot;isReady&quot; returns false&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ready&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cancelled&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;å¯ä»¥çœ‹åˆ°ï¼Œå½“ç³»ç»Ÿåœ¨é—®æŸä¸ª Operation æ˜¯å¦ ready æ—¶ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;evaluateConditions&lt;/code&gt; æ–¹æ³•ä¼šè¢«è§¦å‘ï¼Œè¿™é‡ŒåŒ…å«äº†è¯¥ Operation çš„æ‰€æœ‰ Conditions çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;evaluateForOperation&lt;/code&gt; çš„æ‰§è¡Œç»“æœã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;æ‰§è¡Œ-conditions-çš„-evaluateforoperation-æ–¹æ³•&quot;&gt;æ‰§è¡Œ conditions çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;evaluateForOperation&lt;/code&gt; æ–¹æ³•&lt;/h5&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evaluateConditions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Pending&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancelled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;evaluateConditions() was called out-of-order&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;EvaluatingConditions&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;OperationConditionEvaluator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;evaluate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conditions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;failures&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_internalErrors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;failures&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Ready&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;éå†å½“å‰ Operation çš„ conditionsï¼Œæ‰§è¡Œå®ƒä»¬çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;evaluateForOperation&lt;/code&gt; æ–¹æ³•ï¼Œç„¶åå°†é”™è¯¯ä¿å­˜åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;_internalErrors&lt;/code&gt; é‡Œï¼ŒåŒæ—¶å°†å½“å‰çš„çŠ¶æ€è®¾ç½®ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;.Ready&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;æˆ–è®¸ä½ ä¼šé—®ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œæ˜¯ä¸æ˜¯è¡¨ç¤ºæ¡ä»¶ä¸æ»¡è¶³ï¼Œå¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å°†çŠ¶æ€è®¾ç½®ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;.Ready&lt;/code&gt;ï¼Ÿ è¿™æ˜¯å› ä¸ºå½“çŠ¶æ€è®¾ç½®ä¸º &lt;code class=&quot;highlighter-rouge&quot;&gt;.Ready&lt;/code&gt; åï¼Œå°±ä¼šæ‰§è¡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt; æ–¹æ³•ï¼Œåœ¨é‚£é‡Œä¼šå¯¹ &lt;code class=&quot;highlighter-rouge&quot;&gt;_internalErrors&lt;/code&gt; åšç»Ÿä¸€åˆ¤æ–­ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Ready&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;This operation must be performed on an operation queue.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_internalErrors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isEmpty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cancelled&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Executing&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observers&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;operationDidStart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;nf&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;è¿™é‡Œå‡ºç°äº† observerï¼Œå½“ Operation å¤„äºä¸åŒçŠ¶æ€æ—¶ï¼Œä¼šè°ƒç”¨ observers çš„ä¸åŒæ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;æ·»åŠ -observers&quot;&gt;æ·»åŠ  Observers&lt;/h5&gt;

&lt;p&gt;observer çš„å®ç°è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ª Protocolï¼Œæ‰€æœ‰çš„ observer éƒ½éœ€è¦å®ç°è¿™ä¸ª Protocol é‡Œçš„æ–¹æ³•ï¼Œç„¶å Operation å†…ç½®ä¸€ä¸ªæ•°ç»„ä½œä¸ºå®¹å™¨ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;addObserver&lt;/code&gt; æ—¶ï¼Œå°† observer æ·»åŠ åˆ°å®¹å™¨ï¼Œå½“å¤„äºä¸åŒçŠ¶æ€æ—¶ï¼Œéå†å®¹å™¨é‡Œçš„ observerï¼Œè°ƒç”¨ç›¸åº”çš„æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸å…è®©æˆ‘ä»¬æƒ³èµ·äº† delegateï¼Œè·Ÿ delegate ç›¸æ¯”ï¼Œobserver çš„å¥½å¤„å°±åœ¨äºå¯ä»¥æŒ‡å®šå¤šä¸ªè§‚å¯Ÿè€…ï¼Œè€Œ delegate åªèƒ½æŒ‡å®šä¸€ä¸ªã€‚&lt;/p&gt;

&lt;h5 id=&quot;æ·»åŠ -condtions&quot;&gt;æ·»åŠ  Condtions&lt;/h5&gt;

&lt;p&gt;è·Ÿ observer çš„å®ç°æ€è·¯åŸºæœ¬ä¸€è‡´ã€‚ä½ æˆ–è®¸ä¼šé—®ï¼Œæ·»åŠ çš„è¿™äº› Conditions ä»€ä¹ˆæ—¶å€™ä¼šè¢«è§¦å‘å‘¢ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯åœ¨å°† Operation æ·»åŠ åˆ° OperationQueue æ—¶ã€‚&lt;/p&gt;

&lt;h4 id=&quot;operationqueue&quot;&gt;OperationQueue&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;OperationQueue&lt;/code&gt; ä¹Ÿæ˜¯ç»§æ‰¿è‡ªç³»ç»Ÿçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSOperationQueue&lt;/code&gt;ï¼ŒåŒæ—¶é‡å†™äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;addOperation&lt;/code&gt; æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸»è¦åšäº† 3 ä»¶äº‹&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ç»™ Operation æ·»åŠ  observer&lt;/li&gt;
  &lt;li&gt;å¤„ç† Operation çš„ dependencies çš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;dependencyForOperation&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;å¤„ç† Operation çš„ dependencies çš„æ’ä»–æ€§&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;ç»™-operation-æ·»åŠ -observer&quot;&gt;ç»™ Operation æ·»åŠ  observer&lt;/h5&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BlockObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;startHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;produceHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;finishHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;operationQueue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;operationDidFinish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;withErrors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;æˆ‘ä»¬å‰é¢è¯´è¿‡ï¼Œä¸€ä¸ª Operation å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„ Operationï¼Œè¿™ä¸ª Operation ç”Ÿæˆåä¹Ÿéœ€è¦è¢«æ”¾åˆ° Queue é‡Œï¼Œè¿™ä¸ªæ”¾ç½®çš„è¿‡ç¨‹å°±æ˜¯åœ¨è¿™ä¸ª delegate é‡Œå®ç°çš„ã€‚&lt;/li&gt;
  &lt;li&gt;operationQueue è‡ªå·±æœ‰ä¸€ä¸ª delegateï¼Œå½“ queue é‡Œçš„ä¸€ä¸ª operation æ‰§è¡Œå®Œæ—¶ï¼Œä¼šå‘ delegate æŠ¥å‘Šã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;å¤„ç†-operation-çš„-dependencies-çš„-dependencyforoperation&quot;&gt;å¤„ç† Operation çš„ dependencies çš„ dependencyForOperation&lt;/h5&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;c1&quot;&gt;// Extract any dependencies needed by this operation.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conditions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flatMap&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dependencyForOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependency&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dependencies&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addDependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªå°±å¾ˆç®€å•äº†ï¼Œè°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;dependencyForOperation&lt;/code&gt; æ–¹æ³•ï¼Œæ‹¿åˆ° operationï¼Œç„¶åå°†å½“å‰çš„ op ä¾èµ–è¯¥ operationï¼ŒåŒæ—¶å°†è¿™ä¸ª operation æ”¾åˆ° queue é‡Œï¼Œæ‰€ä»¥åœ¨ conditions çš„ operations æ‰§è¡Œå®Œä¹‹å‰ï¼Œop æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚&lt;/p&gt;

&lt;h5 id=&quot;å¤„ç†-operation-çš„-dependencies-çš„æ’ä»–æ€§&quot;&gt;å¤„ç† Operation çš„ dependencies çš„æ’ä»–æ€§&lt;/h5&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;concurrencyCategories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;conditions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;flatMap&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;dynamicType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isMutuallyExclusive&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;condition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;dynamicType&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;concurrencyCategories&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isEmpty&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// Set up the mutual exclusivity dependencies.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;exclusivityController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;ExclusivityController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sharedExclusivityController&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;exclusivityController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;concurrencyCategories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;op&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;BlockObserver&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;exclusivityController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;removeOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;categories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;concurrencyCategories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;åœ¨è¿™é‡Œå¯èƒ½çœ‹ä¸å‡ºã€Œæ’ä»–ã€çš„å®ç°ï¼Œå› ä¸ºæ˜¯åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;exclusivityController&lt;/code&gt; é‡Œé¢å®ç°çš„ï¼Œè°ƒç”¨äº†å®ƒçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;addOperation&lt;/code&gt; æ–¹æ³•åï¼Œå®ƒä¼šå»æŸ¥çœ‹è¿™ä¸ªç±»å‹çš„æ•°ç»„æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå°±è®©è¿™ä¸ª operation ä¾èµ–æ•°ç»„çš„æœ€åä¸€ä¸ªã€‚è¿™æ ·åœ¨ä¹‹å‰çš„ operation æ‰§è¡Œå®Œä¹‹å‰ï¼Œè¿™ä¸ª operation æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ä½¿ç”¨&quot;&gt;ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;æœ‰äº† Operation å’Œ OperationQueue ä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹ç”Ÿäº§ megabot äº†ï¼Œæ¥çœ‹ä¸€ä¸ªã€ŒæŸ¥çœ‹åŸç½‘é¡µã€çš„ Operationï¼Œè¿™ä¸ª Operation çš„ä½œç”¨å°±æ˜¯å±•ç¤ºä¼ å…¥çš„ URLã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;kd&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Foundation&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;SafariServices&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;/// An `Operation` to display an `NSURL` in an app-modal `SFSafariViewController`.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;MoreInformationOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Operation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSURL&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;URL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;URL&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;addCondition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;MutuallyExclusive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;UIViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;showSafariViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;showSafariViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;context&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UIApplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;sharedApplication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;keyWindow&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rootViewController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;safari&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;SFSafariViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;entersReaderIfAvailable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;safari&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;presentViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;safari&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;completion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;MoreInformationOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;SFSafariViewControllerDelegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;safariViewControllerDidFinish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;SFSafariViewController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;controller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dismissViewControllerAnimated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;å› ä¸ºè¿™æ˜¯ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;ViewController&lt;/code&gt; ç›¸å…³çš„ Operationï¼Œæ‰€ä»¥å…¶ä»–åŒç±»å‹çš„ Operationï¼Œéœ€è¦ç­‰æˆ‘å®Œæˆåæ‰èƒ½è¢«æ‰§è¡Œã€‚&lt;/li&gt;
  &lt;li&gt;å½“è¿™ä¸ª controller è¢«å…³é—­æ—¶ï¼Œè¡¨ç¤ºè¿™ä¸ª Operation ç»“æŸï¼Œè°ƒç”¨ä¸€ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;finish&lt;/code&gt; æ–¹æ³•ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥ç»™è¿™ä¸ª Operation å†åŠ ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;ReachabilityCondition&lt;/code&gt;ï¼Œå½“æ²¡æœ‰ç½‘ç»œæ—¶å°±ä¸æ‰“å¼€äº†ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥çœ‹çœ‹åœ¨ VC å±‚é¢çš„ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;div class=&quot;language-swift highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table style=&quot;border-spacing: 0&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;gutter gl&quot; style=&quot;text-align: right&quot;&gt;&lt;pre class=&quot;lineno&quot;&gt;1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;UITableView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;didSelectRowAtIndexPath&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;indexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;NSIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 1&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;operation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BlockOperation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;performSegueWithIdentifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;showEarthquake&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;sender&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addCondition&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;MutuallyExclusive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;UIViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 2&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;blockObserver&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;BlockObserver&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;errors&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/*
            If the operation errored (ex: a condition failed) then the segue
            isn't going to happen. We shouldn't leave the row selected.
        */&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isEmpty&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;deselectRowAtIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;indexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;animated&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;blockObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// 3&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;operationQueue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;addOperation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;operation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;ol&gt;
  &lt;li&gt;ç±»ä¼¼ &lt;code class=&quot;highlighter-rouge&quot;&gt;NSBlockOperation&lt;/code&gt;ï¼Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;BlockOperation&lt;/code&gt; ä¹Ÿå¯ä»¥å¿«é€Ÿç”Ÿæˆä¸€ä¸ª Operationã€‚&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;BlockObserver&lt;/code&gt; ä¹Ÿæ˜¯ä¸€ä¸ªå¿«é€Ÿç”Ÿæˆ observer çš„æ–¹æ³•ï¼Œè¿™é‡Œæè¿°äº†å½“ Operation å®Œæˆåçš„å¤„ç†ã€‚&lt;/li&gt;
  &lt;li&gt;è°ƒç”¨æ–¹éœ€è¦æ–°å»ºä¸€ä¸ª queueï¼Œç„¶åæŠŠ Operation æ”¾åˆ°è¿™ä¸ª queue é‡Œã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;ç›¸æ¯”èµ·æ­£å¸¸çš„è°ƒç”¨ï¼Œè¿˜æ˜¯ä¼šå¤šäº†äº›æ­¥éª¤ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;

&lt;p&gt;åŸºäº Operation æ¥æ¶æ„çš„æ€æƒ³è¿˜æ˜¯è›®æ–°é¢–çš„ï¼Œå¯ä»¥å°†å¤æ‚çš„ä»»åŠ¡æ‹†åˆ†æˆç²’åº¦æ›´ç»†çš„ Operationï¼Œç„¶åå†ç»„è£…ã€‚ä½†å®é™…ä½¿ç”¨èµ·æ¥ä¹Ÿä¼šæœ‰ä¸å°‘é—®é¢˜ï¼Œæ¯”å¦‚ä¹‹å‰æåˆ°çš„å†™èµ·æ¥ä¼šå¤æ‚äº›ï¼Œè°ƒè¯•æ—¶çœ‹ backtrace ä¼šå¾ˆç´¯ï¼Œä¸ç¡®å®šæ˜¯å¦ä¼šå¸¦æ¥æ›´å¥½çš„å¯ç»´æŠ¤æ€§ç­‰ç­‰ã€‚ä¸è¿‡æ—¢ç„¶è‹¹æœéƒ½å·²ç»æŠŠå®ƒç”¨åˆ°äº†çº¿ä¸Šçš„ Appï¼Œè‡³å°‘è¯´æ˜æ˜¯å¯è¡Œçš„ï¼Œè‡³äºä¸å·²æœ‰çš„æ¶æ„ç›¸æ¯”ä¼šå¸¦æ¥æ€æ ·çš„æå‡ï¼Œå¯èƒ½éœ€è¦å®é™…å†™èµ·æ¥æ‰çŸ¥é“ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Builder Pattern åœ¨ Objective-C ä¸­çš„ä½¿ç”¨</title>
   <link href="http://limboy.me/tech/2015/02/07/builder-pattern.html"/>
   <updated>2015-02-07T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2015/02/07/builder-pattern</id>
   <content type="html">&lt;p&gt;åœ¨è¯´ Builder Pattern ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¸€ä¸ªåœºæ™¯ã€‚å‡è®¾æˆ‘ä»¬è¦é¢„å®šä¸€ä¸ª iPhone 6ï¼Œè¦ 64G çš„ï¼Œé‡‘è‰²çš„ï¼Œç”¨ä»£ç è¡¨è¿°å¤§æ¦‚æ˜¯è¿™æ ·&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// PFX æ˜¯ä¸€ä¸ªå‰ç¼€ï¼Œå› ä¸ºç›´æ¥å†™ iPhone6 ä¸ç¬¦åˆç±»åå¤§å†™çš„ä¹ æƒ¯ï¼Œå†™æˆ IPhone6 æ›´æ˜¯æ€ªå¼‚ â•®(â•¯â–½â•°)â•­
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iphone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iphone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;iphone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;goldenColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ç§æ–¹å¼&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iPhone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithStorage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;goldenColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ç¬¬ä¸€ç§æ–¹å¼å¯æ‰©å±•æ€§å¥½äº›ï¼Œä½†æ— æ³•çº¦æŸå¿…é¡»è®¾ç½®æŸäº› propertyã€‚ç¬¬äºŒç§æ–¹å¼ä¿®æ­£äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ‰©å±•æ€§ä¹Ÿå·®äº†ã€‚&lt;/p&gt;

&lt;p&gt;å‡å¦‚åˆæœ‰äº†æ–°éœ€æ±‚ï¼Œè¦è®©å®¢æˆ·å¯ä»¥é€‰æ‹©å‘å”®åŒºåŸŸï¼Œæ¯”å¦‚æ¸¯è¡Œï¼Œå›½è¡Œï¼Œç¾ç‰ˆç­‰ç­‰ã€‚å¯¹äºç¬¬ä¸€ç§ï¼Œè‡ªç„¶å¯ä»¥æ–°å¢ä¸€ä¸ªå±æ€§ï¼Œä½†ä½¿ç”¨è€…å¾ˆå¯èƒ½å®Œå…¨ä¸çŸ¥é“æ–°å¢äº†è¿™ä¹ˆä¸ªå±æ€§ã€‚å¯¹äºç¬¬äºŒç§ï¼Œåˆ™åªèƒ½å†æ–°å»ºä¸€ä¸ªåˆå§‹åŒ–æ–¹å¼ï¼Œå¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;-[initWithStorage:color:place]&lt;/code&gt;ã€‚é‚£å¦‚æœåˆæœ‰æ–°çš„éœ€æ±‚ï¼Œæ¯”å¦‚é€‰æ‹©æ˜¯å¦åˆ»å­—ï¼Œä»¥åŠåˆ»å“ªäº›å­—å‘¢ï¼Ÿæˆ–è€…å¯ä»¥é€‰æ‹©å¤–å£³çš„ç§ç±»ç­‰ç­‰ã€‚è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸èƒ½å¾ˆå¥½åœ°å¤„ç†éœ€æ±‚çš„å˜æ›´ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬æ¥è¯´è¯´ Builder Patternï¼Œè¿™ä¸ªæ¨¡å¼å¯ä»¥åœ¨å„ç§è¯­è¨€é‡Œè¢«å¾ˆæ–¹ä¾¿åœ°å®ç°ï¼Œæ¯”å¦‚ javascript&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PFXiPhone6Builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setStorage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'golden'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setPlace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'HK'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å½“æœ‰æ–°çš„å±æ€§æ—¶ï¼Œå†åŠ ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;setProperty&lt;/code&gt; å³å¯ã€‚å¦‚æœæ¼å†™äº†æŸä¸ªå±æ€§ï¼Œå¯ä»¥åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt; é‡Œæ£€æŸ¥ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Objective-C é‡Œï¼Œè¿™æ ·çš„é“¾å¼å†™æ³•ä¸æ˜¯å¾ˆæµè¡Œï¼ˆ&lt;a href=&quot;https://github.com/Masonry/Masonry&quot;&gt;Masonry&lt;/a&gt;é‡Œè¿™ç§å†™æ³•ç”¨çš„æ¯”è¾ƒå¤šï¼‰ï¼Œæ‰€ä»¥ï¼Œåœ¨ OC é‡Œå†™èµ·æ¥å¤§æ¦‚ä¼šæ˜¯è¿™æ ·&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;goldenColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;HK&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iphone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦‚æœå°‘äº†ä»€ä¹ˆå±æ€§ï¼Œåœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt; æ—¶æ£€æŸ¥ä¸‹å³å¯ã€‚è¿™æ ·æ—¢è§£å†³äº†ä¸æ–¹ä¾¿æ‰©å±•çš„é—®é¢˜ï¼Œå½“æœ‰æ–°çš„å±æ€§æ—¶ä¹Ÿå¯ä»¥çŸ¥é“ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡çœ‹èµ·æ¥è¿˜æ˜¯ä¸å¤Ÿä¼˜é›…ï¼Œè¿™ä¸ª builder åªæ˜¯ä¸€ä¸ªä¸´æ—¶å·¥å…·ï¼Œç”¨å®Œäº†å°±æ‰”æ‰äº†ï¼Œæ—¢ç„¶è¿™æ ·ï¼Œé‚£æœ‰æ²¡æœ‰å¯èƒ½å†™æ³•ä¸Šç¬¦åˆ OC çš„ä¼ ç»Ÿï¼Œåˆè®©è¿™ä¸ª builder ã€Œä¸´æ—¶å‡ºç°ã€ä¸€ä¸‹ï¼Ÿä¸”çœ‹ä¸‹é¢è¿™æ®µä»£ç &lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createWithBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;goldenColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;HK&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ˜¯ä¸æ˜¯çœ‹èµ·æ¥èˆ’æœå¤šäº†ã€‚builder åªæ˜¯åœ¨ block èŒƒå›´å†…èµ·ä½œç”¨ï¼Œä¸ä¼šå½±å“å½“å‰ context çš„å˜é‡ã€‚è¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;+[createWithBuilder:]&lt;/code&gt; çš„ä»£ç å¦‚ä¸‹&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;createWithBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BuilderBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;NSParameterAssert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™é‡Œ &lt;code class=&quot;highlighter-rouge&quot;&gt;build&lt;/code&gt; æ–¹æ³•ï¼Œä¹Ÿæœ‰ä¸¤ç§å®ç°ï¼Œç¬¬ä¸€ç§&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// PFXiPhone6Builder
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initwithBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// PFXiPhone6
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initwithBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6Builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_storage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦å¤–ä¸€ç§æ˜¯æŠŠä¸¤ä¸ªè¿‡ç¨‹åˆå¹¶ä¸ºä¸€ä¸ªè¿‡ç¨‹&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;c1&quot;&gt;// PFXiPhone6Builder
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;// å¯ä»¥åœ¨è¿™é‡Œå¯¹ property åšæ£€æŸ¥
&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;NSAssert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;å‘è¡ŒåŒºåˆ«å¿˜äº†å¡«å“¦&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;iphone6&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;PFXiPhone6&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;iPhone6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;storage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;iPhone6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;iPhone6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iPhone6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™ä¸¤ç§æ–¹å¼çš„åŒºåˆ«åœ¨äºå¯¹å‚æ•°çš„å¤„ç†ï¼Œå‰ä¸€ä¸ªæ˜¯åœ¨ç›®æ ‡ Class ä¸­å¤„ç†ï¼Œåä¸€ç§æ˜¯åœ¨ Builder ä¸­å¤„ç†ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ Facebook çš„ &lt;a href=&quot;https://github.com/facebook/pop&quot;&gt;pop&lt;/a&gt; ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ä½¿ç”¨ï¼Œå¦‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;n&quot;&gt;POPAnimatableProperty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;animatableProperty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;POPAnimatableProperty&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;propertyWithName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;property&quot;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initializer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;POPMutableAnimatableProperty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;writeBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readBlock&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGFloat&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™é‡Œçš„ &lt;code class=&quot;highlighter-rouge&quot;&gt;initializer&lt;/code&gt; å…¶å®å°±æ˜¯ &lt;code class=&quot;highlighter-rouge&quot;&gt;builder&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘åœ¨å†™è˜‘è‡è¡—çš„åŸºç¡€æ¡†æ¶æ—¶ï¼Œä¹Ÿæœ‰ç”¨åˆ°è¿‡å‡ å¤„ï¼Œè§‰å¾—è¿˜æ˜¯è›®æ–¹ä¾¿çš„ï¼Œå°¤å…¶å¯¹ä½¿ç”¨è€…æ¥è¯´ã€‚æ¯”å¦‚è¿™ä¸ªå¯ä»¥æ¨ªå‘æˆ–çºµå‘æ»šåŠ¨çš„åŒ…å«å¯ç‚¹å‡» Items çš„ collectionViewã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;collectionView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJFlowCollectionView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;collectionViewWithBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MGJFlowCollectionViewBuilder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scrollDirection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UICollectionViewScrollDirectionHorizontal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minimumInteritemSpacing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;minimumLineSpacing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sectionInset&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;UIEdgeInsetsMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;CGSize&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CGSizeMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;81&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;itemSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;@8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@9&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;@10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cellBuilder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNumber&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;UIView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initWithFrame&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CGRectMake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)];&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;backgroundColor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;mgj_random&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™æ ·å°±èƒ½é€šè¿‡ç®€å•çš„é…ç½®æ¥ç”Ÿæˆä¸€ä¸ªæ°´å¹³çš„æˆ–å‚ç›´çš„ collectionView äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ Builder Pattern è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥å°†é›¶æ•£çš„é…ç½®ç»Ÿä¸€èµ·æ¥ã€‚æ¯”å¦‚è¦åˆ›å»ºä¸€ä¸ª CollectionViewï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½® layoutï¼Œè¿˜è¦è®¾ç½® layout çš„ä¸€äº›å±æ€§ï¼Œè¿˜è¦è®¾ç½® DataSource / Delegate ç­‰ï¼Œç°åœ¨å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹ç»Ÿä¸€è®¾ç½®ï¼Œå¯è¯»æ€§ä¸Šä¹Ÿä¼šå¥½ä¸€äº›ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å¦‚æœé‡åˆ°éœ€è¦å¤šä¸ªå‚æ•°ï¼Œç”šè‡³æŸä¸ªå‚æ•°è‡ªå·±è¿˜åŒ…å«äº†å„ç§å‚æ•°æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä¸‹ Builder Patternã€‚&lt;/p&gt;

&lt;p&gt;å‚è€ƒï¼š&lt;a href=&quot;http://www.annema.me/the-builder-pattern-in-objective-c&quot;&gt;http://www.annema.me/the-builder-pattern-in-objective-c&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>è‡ªå­¦ iOS å¼€å‘çš„ä¸€äº›ç»éªŒ</title>
   <link href="http://limboy.me/tech/2014/12/31/learning-ios.html"/>
   <updated>2014-12-31T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2014/12/31/learning-ios</id>
   <content type="html">&lt;p&gt;ä¸çŸ¥ä¸è§‰ä½œä¸º iOS å¼€å‘ä¹Ÿæœ‰ä¸¤å¹´å¤šçš„æ—¶é—´äº†ï¼Œè®°å¾—å½“åˆçœ‹åˆ° OC çš„è¯­æ³•æ—¶ï¼Œæ„£æ˜¯è¢«å“äº†å›å»ï¼Œéš”äº†å¥½ä¹…æ‰é‡æ–°è€ä¸‹å¿ƒå»å•ƒä¸€å•ƒã€‚å•ƒäº†ä¸€é˜µï¼Œè§‰å¾—å¤§æ¦‚æœ‰äº†ç‚¹æ¦‚å¿µï¼Œçœ‹åˆ° Cocoa é‚£ä¹ˆå¤šçš„ Classï¼Œåˆæ‡µäº†ï¼Œæ€ä¹ˆæ‰èƒ½è°ƒç”¨ç³»ç»Ÿçš„ç›¸æœºï¼Ÿæ€ä¹ˆä¿å­˜ä¿¡æ¯ï¼Ÿæ€ä¹ˆåšä¸€ä¸ªåƒ Twitter ä¸ªäººé¡µé‚£æ ·çš„é¡µé¢ï¼Ÿæ€»ä¹‹å°±æ˜¯ä¸çŸ¥é“è¯¥ä»å“ªåˆ‡å…¥ã€‚&lt;/p&gt;

&lt;p&gt;ç°åœ¨å›æƒ³èµ·æ¥ï¼Œå…¶å®è·¯ä¸€ç›´éƒ½åœ¨ï¼Œè€Œä¸”æœ‰å¾ˆå¤šæ¡ï¼Œå½“åˆå¦‚æœæœ‰äººèƒ½å¤ŸæŒ‡å‡ºä¸€æ¡è¿˜ä¸é”™çš„é“ï¼Œæˆ–è®¸å°±èƒ½èµ°å¾—ä¸é‚£ä¹ˆè‰°éš¾ã€‚äºæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¯¹åäººèƒ½æœ‰æ‰€å¸®åŠ©å§ã€‚&lt;/p&gt;

&lt;h3 id=&quot;åŸºç¡€&quot;&gt;åŸºç¡€&lt;/h3&gt;

&lt;h4 id=&quot;ä¸€å®šçš„ç¼–ç¨‹ç»éªŒ&quot;&gt;ä¸€å®šçš„ç¼–ç¨‹ç»éªŒ&lt;/h4&gt;

&lt;p&gt;è¿™é‡Œè¯´çš„ç¼–ç¨‹ç»éªŒæ˜¯è‡³å°‘ç†Ÿç»ƒä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå¯¹ OOP æœ‰ä¸€å®šçš„äº†è§£ï¼Œæœ€å¥½ç†Ÿæ‚‰ä¸€äº›åŸºæœ¬çš„è®¾è®¡æ¨¡å¼ã€‚é‡åˆ°è¿‡çš„å¥½å¤š iOS å¼€å‘ï¼Œå¤§å¤šæ˜¯ä»åˆ«çš„è¯­è¨€è½¬è¿‡æ¥çš„ï¼Œæ‰€ä»¥æœ‰ä¸€å®šçš„ç¼–ç¨‹åŸºç¡€ï¼Œå­¦èµ·æ¥ä¼šæ›´å®¹æ˜“ get the point.&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦ç¼–ç¨‹ï¼Œå½“ç„¶ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œåªæ˜¯è¦åšå¥½å¿ƒç†å‡†å¤‡ï¼Œå¯èƒ½ä¼šæ¯”æƒ³è±¡çš„éš¾ã€‚&lt;/p&gt;

&lt;h4 id=&quot;è‹±è¯­&quot;&gt;è‹±è¯­&lt;/h4&gt;

&lt;p&gt;å‘ç°ä¸å°‘å¼€å‘å¯¹äºè‹±è¯­ä¼¼ä¹æœ‰ç‚¹æ¥å—ä¸èƒ½ï¼Œé€šå¸¸éƒ½æ˜¯ä¸­æ–‡ä¼˜å…ˆï¼Œé™¤éè¿«ä¸å¾—å·²ï¼Œæ‰ç¡¬ç€å¤´çš®çœ‹çœ‹ StackOverflowï¼Œè‹±æ–‡æ–‡ç« ï¼Œæ–‡æ¡£ç­‰ã€‚å¿˜äº†æ˜¯è°è¯´è¿‡ã€Œéš¾èµ°çš„è·¯è¶Šèµ°è¶Šå¥½èµ°ã€ï¼Œé€šå¸¸å¦‚æ­¤ã€‚å…¶å®åªè¦ç¨å¾® push ä¸€ä¸‹è‡ªå·±ï¼Œé‚£äº›æŠ€æœ¯æ–‡ç« å•ƒä¸‹æ¥åº”è¯¥ä¸ä¼šæœ‰å¤ªå¤§çš„é—®é¢˜ï¼Œæœ‰è¿‡å‡ æ¬¡æˆåŠŸçš„ä½“éªŒåï¼Œè¿™ç§ææƒ§æ„Ÿå°±ä¼šå‡å°‘å¾ˆå¤šã€‚ä¼˜è´¨çš„æ–‡ç« ã€è§†é¢‘ã€ä¹¦ç±ï¼Œå¤šæ˜¯è‹±æ–‡çš„ï¼Œä¸è¿ˆè¿‡è¿™ä¸ªåï¼Œå°†æ¥è¦ä¹ˆæˆä¸ºç“¶é¢ˆï¼Œè¦ä¹ˆèŠ±æ›´å¤§çš„æˆæœ¬å»å¡«è¡¥ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¥é—¨&quot;&gt;å…¥é—¨&lt;/h3&gt;

&lt;h4 id=&quot;ä¹¦ç±&quot;&gt;ä¹¦ç±&lt;/h4&gt;

&lt;p&gt;è¦å­¦ä¹  iOS å¼€å‘ï¼Œè‡ªç„¶è¦å…ˆå­¦ Objective-C ï¼ˆå½“ç„¶ç°åœ¨ä¹Ÿå¯ä»¥ç›´æ¥ä¸Š Swiftï¼Œä¸è¿‡å¦‚æœå¤šäººåä½œçš„è¯ï¼ŒOCç›®å‰è¿˜æ˜¯ä¸»æµï¼‰ï¼Œå› ä¸º OC æ˜¯ C è¯­è¨€çš„è¶…é›†ï¼Œæ‰€ä»¥äº†è§£ C è¯­è¨€å¯¹äºå­¦ä¹  OC è‚¯å®šä¼šæœ‰å¸®åŠ©ï¼Œä¸è¿‡å°±ç®—ä¸äº†è§£ï¼Œç›´æ¥å­¦ OC ä¹Ÿæ²¡å¤ªå¤§é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæ¨è BNR (Big Nerd Ranch) çš„è¿™æœ¬ &lt;a href=&quot;http://www.amazon.com/Objective-C-Programming-Ranch-Guide-Guides/dp/032194206X&quot;&gt;Objective-C Programming The Big Nerd Ranch Guide&lt;/a&gt;ï¼Œè®²è§£åœ°æ¯”è¾ƒç»†è‡´ï¼Œèƒ½å¸®åŠ©ä½ æ›´å¥½çš„ç†è§£ OCï¼Œæ›´é‡è¦çš„æ˜¯æ•™ä½ é‡åˆ°é—®é¢˜æ—¶ï¼Œå¦‚ä½•å»è§£å†³é—®é¢˜ï¼Œä»¥åŠè¿™ä¸ªé—®é¢˜å¯¹åº”çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œå¦‚ä½•ä½¿ç”¨æ–‡æ¡£ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;æ¥åˆ°ä¸€ä¸ªæ–°çš„ä¸–ç•Œï¼Œè‚¯å®šä¼šå¯¹è¿™ä¸ªä¸–ç•Œå……æ»¡å¥½å¥‡ï¼Œæƒ³è®¢é˜…ä¸€å¤§å †åšå®¢ï¼Œä¹°ä¸€å †ä¹¦ï¼Œçœ‹å„ç§æ•™ç¨‹å’Œè§†é¢‘ï¼Œç„¶åå°±å˜å¾—æµ®èºï¼Œä¸çŸ¥è¯¥ä»å“ªä¸‹æ‰‹ï¼Œè¿™ä¼šå¯¼è‡´æ‹–å»¶ç—‡ã€‚æˆ‘æ¸´äº†ï¼Œç»™æˆ‘å€’ä¸€æ¯æ°´ï¼Œè¿™ä¸ªå¾ˆç›´æ¥ï¼Œé©¬ä¸Šå°±å¯ä»¥åšï¼Œä½†å¦‚æœæ˜¯ç»™æˆ‘ä¹°ä¸€ç“¶é¥®æ–™ï¼Œè€Œè‡ªå·±å¯¹é‚£äº›é¥®æ–™åˆä¸æ€ä¹ˆç†Ÿæ‚‰æ—¶ï¼Œå°±çº ç»“äº†ï¼Œä¸å¦‚åˆ·ä¼šå¾®åšï¼Œçœ‹çœ‹æœ‹å‹åœˆï¼Œç©ä¸ªå°æ¸¸æˆå…ˆã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä¸€æœ¬å¥½çš„å…¥é—¨æ•™æå¾ˆé‡è¦ï¼Œè¦å¥‘åˆè‡ªå·±å½“å‰çš„æ°´å¹³ï¼Œä¸”å¸¸å¸¸ä¼šæœ‰æ”¶è·ï¼Œè¿™ç§æˆå°±æ„Ÿä¼šæ¿€åŠ±ç€ä½ ç»§ç»­å­¦ä¸‹å»ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ä¼šæœ‰è¿™æ ·çš„ç»å†ï¼šä¹¦ä¸­æåˆ°æŸä¸ªäººã€è§‚ç‚¹ã€çŸ¥è¯†ç‚¹ã€ä¹¦ã€æ–‡ç« ï¼Œç„¶åå°±é¡ºç€å®ƒæåˆ°çš„è¿™äº›ä¸œè¥¿å‡ºå»äº†ï¼Œå¯èƒ½æŸä¸ªçŸ¥è¯†ç‚¹åˆç‰µæ‰¯åˆ°å¦ä¸€äº›å†…å®¹ï¼Œç„¶åå°±è¿™æ ·è¶Šèµ°è¶Šè¿œã€‚æƒ³èµ·äº†ä¸€ä¸ªæ•…äº‹&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸‰åªçŒç‹—è¿½ä¸€åªåœŸæ‹”é¼ ,åœŸæ‹”é¼ é€ƒè·‘æ—¶é’»è¿›äº†ä¸€ä¸ªæ ‘æ´ã€‚è¿™ä¸ªæ ‘æ´åªæœ‰ä¸€ä¸ªå‡ºå£,ä¸ä¸€ä¼šå„¿,å¿½ç„¶ä»æ ‘æ´é‡Œè·‘å‡ºä¸€åªå…”å­ã€‚å…”å­é£å¿«åœ°å‘å‰è·‘,å¹¶çˆ¬ä¸Šå¦ä¸€æ£µå¤§æ ‘ã€‚å…”å­å› ä¸ºæ…Œä¹±åœ¨æ ‘ä¸Šæ²¡ç«™ç¨³,æ‰äº†ä¸‹æ¥,ç ¸æ™•äº†æ­£ä»°å¤´çœ‹çš„ä¸‰åªçŒç‹—,æœ€å,å…”å­ç»ˆäºé€ƒè„±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯¹äºè¿™ä¸ªæ•…äº‹å¯ä»¥ä»ä¸åŒçš„è§’åº¦å»è§£è¯»ï¼Œæˆ‘æ›´æ„¿æ„ä»¥åˆå¿ƒå»è§£è¯»ã€‚å…”å­ä¸ºä»€ä¹ˆä¼šçˆ¬æ ‘ï¼Ÿä¸ºä»€ä¹ˆèƒ½ç ¸æ™•ä¸‰åªçŒç‹—ï¼Ÿè¿™ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯ï¼Œä¹‹å‰è¿½èµ¶çš„åœŸæ‹¨é¼ å“ªå»äº†ï¼Ÿçœ‹ä¹¦æ—¶éš¾å…ä¼šæœ‰å»¶ä¼¸é˜…è¯»ï¼Œè¿™ä¸ªæ·±åº¦æˆ‘è§‰å¾—ä¸å®œè¶…è¿‡ 2 å±‚ï¼Œä¸ç„¶å¾ˆå®¹æ˜“å°±å›ä¸æ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰å°±æ˜¯å¦‚æœæœ‰å¯èƒ½ï¼Œæœ€å¥½æ¯å¤©éƒ½çœ‹ç‚¹ï¼Œè¿™å…¶å®æ˜¯å¾ˆéš¾çš„ï¼Œå› ä¸ºæ€»æ˜¯ä¼šæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„äº‹ï¼Œæˆ–è€…ä¹‹å‰çš„æŸäº›ä¹ æƒ¯åœ¨å¹²æ‰°ã€‚ä¸€æ—¦æ–­äº†å‡ å¤©ï¼Œå°±ä¸æƒ³å†æ‹¿èµ·æ¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿˜æœ‰ï¼Œè‹¹æœå®˜æ–¹çš„ &lt;a href=&quot;https://developer.apple.com/library/ios/referencelibrary/GettingStarted/RoadMapiOS/&quot;&gt;Start Developing iOS Apps Today&lt;/a&gt; ä¹Ÿæ˜¯å¾ˆä¸é”™çš„å…¥é—¨ææ–™ã€‚&lt;/p&gt;

&lt;h4 id=&quot;è§†é¢‘&quot;&gt;è§†é¢‘&lt;/h4&gt;

&lt;p&gt;æ¨èæ–¯å¦ç¦è€å¤´å­(Paul Hegarty)çš„ &lt;a href=&quot;https://itunes.apple.com/us/course/developing-ios-7-apps-for/id733644550&quot;&gt;Developing iOS 7 Apps for iPhone and iPad&lt;/a&gt; ï¼Œå½“åˆä¹Ÿæ˜¯çœ‹çš„è¿™ä¸ªï¼ˆé‚£æ—¶è¿˜æ˜¯æ›´è€çš„ç‰ˆæœ¬ï¼‰ï¼ŒPaul æ˜¯èµ„æ·±çš„ Mac/iOS å¼€å‘ï¼ˆå‰è‹¹æœå‘˜å·¥ï¼Ÿï¼‰ï¼Œå¾ˆå¤šçŸ¥è¯†ç‚¹è®²å¾—å¾ˆåˆ°ä½ï¼Œå­¦ç”Ÿä»¬çš„æé—®ä¹Ÿå¤§éƒ½åœ¨ç‚¹ä¸Šï¼ŒåŒæ—¶é…æœ‰Demoï¼Œæ€»ä¹‹å¬ä¸‹æ¥ä¼šå¯¹ iOS å¼€å‘æœ‰æ¯”è¾ƒå…¨é¢çš„äº†è§£ã€‚&lt;/p&gt;

&lt;p&gt;åŒæ—¶æ¨èä¸€æœ¬å°å†Œå­ï¼š&lt;a href=&quot;https://github.com/objc-zen/objc-zen-book&quot;&gt;objc-zen-book&lt;/a&gt;ï¼ŒèŠ±ä¸é•¿æ—¶é—´å°±èƒ½çœ‹å®Œï¼Œé‡Œé¢æ˜¯ä¸€äº› Best Practicesï¼Œå¯¹äºç¼–å†™ä¼˜è´¨ä»£ç ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç¬”è®°&quot;&gt;ç¬”è®°&lt;/h4&gt;

&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæŒä¹…çš„è¿‡ç¨‹ï¼Œä»»ä½•é˜¶æ®µéƒ½é€‚ç”¨ã€‚ä»¥å‰ä¹Ÿæ²¡å¤ªåœ¨æ„è¿™ä¸ªï¼Œè§‰å¾—æ¦‚å¿µæ€§çš„ä¸œè¥¿ï¼Œè„‘å­è¿‡ä¸€éï¼Œå°±å¤§æ¦‚çŸ¥é“äº†ï¼Œç„¶åå°±å»å•ƒå…¶ä»–çš„ä¸œè¥¿äº†ï¼Œç°åœ¨çœ‹æ¥ï¼Œå¦‚æœæœ‰è®°ç¬”è®°çš„è¯ï¼Œä¼šæ›´æœ‰åŠ©äºæ¶ˆåŒ–æ¦‚å¿µã€çŸ¥è¯†ç‚¹ï¼Œä¹Ÿå¯ä»¥è®°å½•è‡ªå·±çš„æ€è€ƒè¿‡ç¨‹ã€‚è¾¾èŠ¬å¥‡å°±è®°å½•äº†10000å¤šé¡µçš„ç¬”è®°ã€‚&lt;/p&gt;

&lt;p&gt;è®°ç¬”è®°å¯ä»¥åŠ æ·±å¯¹çŸ¥è¯†ç‚¹çš„ç†è§£ï¼Œè€Œæˆä¸ºç¼–ç¨‹å·¨æ˜Ÿçš„å”¯ä¸€ç§˜è¯€å°±æ˜¯ï¼š&lt;a href=&quot;http://www.codesimplicity.com/post/the-singular-secret-of-the-rockstar-programmer/&quot;&gt;å¯¹æ‰€åšçš„äº‹æƒ…ç†è§£åœ°è¶Šæ·±ï¼Œå°±ä¼šåšå¾—è¶Šå¥½&lt;/a&gt;ã€‚åŒæ—¶å¦‚æœéµå¾ª&lt;a href=&quot;http://zh.wikipedia.org/wiki/%E9%81%97%E5%BF%98%E6%9B%B2%E7%BA%BF&quot;&gt;é—å¿˜æ›²çº¿&lt;/a&gt;å»å¤ä¹ çš„è¯ï¼Œæ•ˆæœæ›´ä½³ã€‚å¯¹çŸ¥è¯†ç‚¹äº†è§£åœ°è¶³å¤Ÿé€å½»åï¼ŒDebug æ—¶æ‰æ›´æœ‰å¯èƒ½çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªï¼Œè§£å†³é—®é¢˜ä¹Ÿæ›´å®¹æ˜“æœ‰æ€è·¯ã€‚&lt;/p&gt;

&lt;p&gt;ç¬”è®°ä¸ä»…å¯ä»¥è®°çŸ¥è¯†ç‚¹ï¼Œä¹Ÿå¯ä»¥è®°å½•è°ƒè¯•è¿‡ç¨‹ï¼Œæ¯”å¦‚&lt;a href=&quot;http://borkware.com/bnr/CampWhereIOS6.html&quot;&gt;è¿™ç¯‡ç¬”è®°&lt;/a&gt;ï¼Œæœ‰ä¸€ç§è°ƒè¯•æ–¹æ³•ï¼š&lt;a href=&quot;http://zh.wikipedia.org/wiki/%E5%B0%8F%E9%BB%84%E9%B8%AD%E8%B0%83%E8%AF%95%E6%B3%95&quot;&gt;å°é»„é¸­è°ƒè¯•æ³•&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;è®¸å¤šç¨‹åºå‘˜éƒ½æœ‰è¿‡å‘åˆ«äººï¼ˆç”šè‡³å¯èƒ½å‘å®Œå…¨ä¸ä¼šç¼–ç¨‹çš„äººï¼‰æé—®åŠè§£é‡Šç¼–ç¨‹é—®é¢˜ï¼Œå°±åœ¨è§£é‡Šçš„è¿‡ç¨‹ä¸­å‡»ä¸­äº†é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ä¸€è¾¹é˜è¿°ä»£ç çš„æ„å›¾ä¸€è¾¹è§‚å¯Ÿå®ƒå®é™…ä¸Šçš„æ„å›¾å¹¶åšè°ƒè¯•ï¼Œè¿™ä¸¤è€…ä¹‹é—´çš„ä»»ä½•ä¸åè°ƒä¼šå˜å¾—å¾ˆæ˜æ˜¾ï¼Œå¹¶ä¸”æ›´å®¹æ˜“å‘ç°è‡ªå·±çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç”Ÿæ´»ä¸­æˆ‘ä»¬å¯èƒ½ä¸ä¼šçœŸçš„è¿™ä¹ˆå»åšï¼Œè¿™æ—¶æŠ½ç¦»å‡ºå¦ä¸€ä¸ªè‡ªå·±ï¼Œè®°å½•ä¸‹è·Ÿtaçš„å¯¹è¯ï¼Œä¹Ÿæ˜¯ä¸ªå‘ç°é—®é¢˜çš„å¥½æ–¹æ³•ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç»ƒä¹ &quot;&gt;ç»ƒä¹ &lt;/h4&gt;

&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼ŒçŸ¥é“äº†äº›æ¦‚å¿µæˆ–åŸç†åï¼Œæ€»æ˜¯ä¼šæƒ³ç€å»éªŒè¯ä¸‹æ˜¯ä¸æ˜¯è¿™æ ·ï¼Œæ— è®ºç»“æœæ˜¯å¦å¦‚è‡ªå·±é¢„æœŸï¼Œå®è·µçš„è¿‡ç¨‹ä¼šé™ä½å¯¹è¯­è¨€çš„é™Œç”Ÿæ„Ÿï¼Œæ…¢æ…¢åœ°åŸ¹å…»ä¸€ç§é©¾é©­è¿™é—¨è¯­è¨€çš„è‡ªä¿¡ï¼Œå¦‚æœå‡ºäº†é”™ï¼Œæ­£å¥½å¯ä»¥é‡æ–°æ¢³ç†ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç›®æ ‡&quot;&gt;ç›®æ ‡&lt;/h4&gt;

&lt;p&gt;å¦‚æœé™ä¸‹å¿ƒæ¥çœ‹å®Œäº† BNR çš„è¿™æœ¬ä¹¦ï¼Œä»¥åŠæ–¯å¦ç¦çš„ iOS å¼€å‘è§†é¢‘ï¼Œé‚£ä¹ˆå¯¹ OC åº”è¯¥æ¯”è¾ƒäº†è§£äº†ï¼Œä¸€äº›å¸¸ç”¨çš„ UIKit ç”¨èµ·æ¥ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œæ¯”å¦‚ UIViewController / UIView / UIScrollView / UIImageView / UITableViewã€‚ä¹Ÿç†Ÿæ‚‰ä¸€äº›æ¦‚å¿µï¼Œå¦‚ KVO / MVC / Delegate / DataSourceã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µä¸‹æ¥ï¼Œåº”è¯¥ä¼šæœ‰ï¼šå“¦ï¼ŒiOS å¼€å‘ä¹Ÿå°±è¿™æ ·å˜›ï¼Œå¤šç¿»ç¿»æ–‡æ¡£ï¼Œç†Ÿæ‚‰ Cocoa Touch çš„ä¸€äº› Classï¼Œå·®ä¸å¤šä¹Ÿèƒ½åšå‡ºä¸€ä¸ªç®€å•çš„ App äº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è¿›é˜¶&quot;&gt;è¿›é˜¶&lt;/h3&gt;

&lt;p&gt;å…¥é—¨ä¹‹åï¼Œæ¥ä¸‹æ¥å¯ä»¥æŠ˜è…¾çš„ä¸œè¥¿è¿˜ä¼šæœ‰ä¸å°‘ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ä¹¦ç±-1&quot;&gt;ä¹¦ç±&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://www.amazon.com/Effective-Objective-C-2-0-Specific-Development/dp/0321917014&quot;&gt;Effective Objective-C 2.0&lt;/a&gt;ï¼Œé‡Œé¢æåˆ°äº† 52 ç§æé«˜ iOS App è´¨é‡çš„é€”å¾„ã€‚æ¶‰åŠäº† API è®¾è®¡ã€protocols / category çš„ä½¿ç”¨ã€å†™å‡ºæ›´æ¨¡å—åŒ–çš„ä»£ç ç­‰ï¼Œè¯»ä¸‹æ¥åº”è¯¥ä¼šæœ‰ä¸å°‘æ”¶è·ã€‚&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.amazon.com/iOS-Programming-Ranch-Guide-Guides/dp/0321942051&quot;&gt;iOS Programming: The Big Nerd Ranch Guide (4th Edition)&lt;/a&gt;ï¼Œåˆæ˜¯ä¸€æœ¬ BNR çš„ä¹¦ï¼Œè¿™æœ¬ä¹¦çš„ç‰¹ç‚¹æ˜¯é€šè¿‡ Demo æ¥å¼•å‡ºçŸ¥è¯†ç‚¹ï¼Œç„¶åæä¸€äº›é—®é¢˜ï¼Œå¹¶ä¸”ä¼šç»†è¯´è§£é¢˜æ€è·¯ã€‚çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œå¯¹äºå…ƒå­¦ä¹ èƒ½åŠ›çš„æå‡ä¹Ÿä¼šæœ‰ä¸€å®šå¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;â€” update â€”&lt;/p&gt;

&lt;p&gt;å‘ç°å·§å“¥çš„ &lt;a href=&quot;http://item.jd.com/11598468.html&quot;&gt;iOSå¼€å‘è¿›é˜¶&lt;/a&gt; å·²ç»å¯ä»¥åœ¨äº¬ä¸œä¹°åˆ°äº†ï¼Œè™½ç„¶æ²¡æœ‰ç»†çœ‹ï¼Œä½†å·§å“¥å‡ºå“è´¨é‡è‚¯å®šæœ‰ä¿éšœã€‚&lt;/p&gt;

&lt;h4 id=&quot;å…¶ä»–èµ„æº&quot;&gt;å…¶ä»–èµ„æº&lt;/h4&gt;

&lt;p&gt;è¿›å…¥è¿™ä¸ªé˜¶æ®µåï¼Œå¯ä»¥å»æ¢ç´¢æ›´å¤§çš„ä¸–ç•Œäº†ï¼Œç°åœ¨çš„èµ„æºå·²ç»å¾ˆä¸°å¯Œäº†ï¼Œä½†è¿˜æ˜¯è¦éµå¾ªã€Œå°‘è€Œç²¾ã€çš„åŸåˆ™ã€‚ä»¥ä¸‹æ˜¯æˆ‘è§‰å¾—æŒºä¸é”™çš„æº&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://iosdevweekly.com/&quot;&gt;iOS Dev Weekly&lt;/a&gt; æ¯å‘¨ä¸€æœŸï¼Œå†…å®¹å¤šä¸ºè¿™ä¸€æ˜ŸæœŸé‡Œå€¼å¾—å…³æ³¨çš„Githubé¡¹ç›®ã€æ–‡ç« ã€å·¥å…·ç­‰ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://blog.devtang.com/&quot;&gt;iOS ç§»åŠ¨å¼€å‘å‘¨æŠ¥&lt;/a&gt; è¿™æ˜¯å”å·§å¤§å¤§æ•´ç†çš„æ¯å‘¨ä¸é”™çš„ iOS å¼€å‘ç›¸å…³çš„å†…å®¹ï¼Œå¤šä¸ºä¸­æ–‡ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.raywenderlich.com/tutorials&quot;&gt;RayWenderlich&lt;/a&gt; å¾ˆå¤šè¯¦ç»†åˆå…¨é¢çš„æ•™ç¨‹ï¼Œä¸å®¹é”™è¿‡ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://iosdev.slack.com/home&quot;&gt;iOS Dev Slack&lt;/a&gt; å›½å†…ä¸å°‘ iOS å¼€å‘ï¼ˆåŒ…æ‹¬å¤§å¤§ä»¬ï¼‰éƒ½åœ¨è¿™é‡Œï¼Œä¸è¿‡ç°åœ¨å¥½åƒä¸æ€ä¹ˆèƒ½æ‹¿åˆ°é‚€è¯·äº†ã€‚&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/tangqiaoboy/iOSBlogCN&quot;&gt;ä¸­æ–‡ iOS/Mac å¼€å‘åšå®¢åˆ—è¡¨&lt;/a&gt;ï¼Œæ‰“å¼€å·¥å…·è®¢é˜…å§ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿˜æœ‰ï¼Œå¦‚æœå¯èƒ½çš„è¯ï¼Œå¤šå»åˆ†äº«è‡ªå·±å­¦åˆ°çš„ä¸œè¥¿ï¼Œæ•™æ˜¯æœ€å¥½çš„å­¦ï¼Œæˆ‘è¯•è¿‡å‡ æ¬¡ï¼Œæ•ˆæœçœŸçš„å¾ˆä¸é”™ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç›®æ ‡-1&quot;&gt;ç›®æ ‡&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µä¸‹æ¥ï¼Œå¯¹äºå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€å†…å­˜ç®¡ç†ã€Blocks çš„ä½¿ç”¨ã€å›¾åƒæ“ä½œã€ç½‘ç»œè¯·æ±‚å’Œç®¡ç†ã€å¤šçº¿ç¨‹åº”è¯¥æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚å¯¹äº CALayerã€Animationã€UIScrollViewã€UITableViewã€UICollectionViewã€ViewController Container åˆ™éå¸¸ç†Ÿæ‚‰ï¼Œå¯¹ã€Œéå¸¸ç†Ÿæ‚‰ã€çš„å®šä¹‰æ˜¯ï¼šä¸æ‰“å¼€ Xcodeï¼Œè„‘å­é‡Œå°±èƒ½æŠŠç›¸åº”çš„çŸ¥è¯†ç‚¹å¤è¿°å‡ºæ¥ 80% ï¼Œæ¯”å¦‚è¿™ä¸ªç±»æœ‰å“ªäº›æ–¹æ³•ï¼ŒDelegate / DataSource æœ‰å“ªäº›æ–¹æ³•ï¼Œæ€ä¹ˆä½¿ç”¨ï¼Œå¦‚æœè¦å®ç°æŸä¸ªæ•ˆæœï¼Œåº”è¯¥æ€ä¹ˆåšï¼ˆå¥½å§ï¼Œ UICollectionView é™¤å¤–ï¼‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é«˜çº§&quot;&gt;é«˜çº§&lt;/h3&gt;

&lt;p&gt;å…¶å®é«˜çº§ã€è¿›é˜¶ã€å…¥é—¨å¹¶æ²¡æœ‰ä¸¥æ ¼çš„ç•Œé™ï¼Œåœ¨å…¥é—¨é˜¶æ®µä¹Ÿå¯ä»¥æ¢ç©¶é«˜çº§é˜¶æ®µçš„ä¸€äº›ä¸œè¥¿ã€‚æˆ‘è§‰å¾—æ”¯æ’‘æˆ‘ä»¬ä¸æ–­æ¢ç´¢å’Œå‰è¿›çš„åŠ¨åŠ›ä¸æ˜¯å…´è¶£ï¼Œè€Œæ˜¯æ°¸ä¸æ»¡è¶³çš„å¥½å¥‡å¿ƒï¼Œå’Œå¯¹ä¼˜é›…ä»£ç çš„è¿½æ±‚ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;If your standards are low, youâ€™re going to stop pretty early on in the process.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;BNR çš„è¿™ç¯‡ &lt;a href=&quot;http://www.bignerdranch.com/blog/leveling-up/&quot;&gt;Leveling Up&lt;/a&gt; å·²ç»è®²å¾—å¾ˆå¥½äº†ï¼Œä¹Ÿæ›´åŠ ç»†è‡´ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ä¹¦ç±-2&quot;&gt;ä¹¦ç±&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://www.amazon.com/iOS-Programming-Pushing-Limits-Applications/dp/1118818342&quot;&gt;iOS 7 Programming Pushing the Limits&lt;/a&gt; è¿™æœ¬ä¹¦å¯¹ iOS 7 çš„ä¸€äº›ç‰¹æ€§ä¼šè®²è§£åœ°æ¯”è¾ƒæ·±å…¥ï¼Œå½“ç„¶ä¹Ÿä¸ä»…ä»…æ˜¯ iOS 7ã€‚åªå¹ iOS æ›´æ–°å®åœ¨å¤ªå¿«ï¼Œä¹¦ç±å¾€å¾€è·Ÿä¸ä¸Šï¼Œä¸€æœ¬å¥½ä¹¦å¾€å¾€éœ€è¦å¾ˆé•¿æ—¶é—´æ¥æ’°å†™ï¼Œç­‰ä¹¦å¯ä»¥å‡ºç‰ˆäº†ï¼ŒiOS åˆå‡ºæ–°ç‰ˆæœ¬äº†ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æºç &quot;&gt;æºç &lt;/h4&gt;

&lt;p&gt;çœ‹ä¼˜ç§€çš„æºç ï¼Œå¯ä»¥å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ä¹Ÿæ›´å®¹æ˜“è§£å†³ã€‚è¿™äº›æ˜¯æˆ‘è§‰å¾—å€¼å¾—ç»†çœ‹çš„æºç ï¼š&lt;a href=&quot;https://github.com/AFNetworking/AFNetworking&quot;&gt;AFNetworking&lt;/a&gt;(NSOperation, HTTP, Block), &lt;a href=&quot;https://github.com/rs/SDWebImage&quot;&gt;SDWebImage&lt;/a&gt;(Image Handle, Cache, NSOperation, Block), &lt;a href=&quot;https://github.com/samvermette/SVPullToRefresh&quot;&gt;SVPullToRefresh&lt;/a&gt;(UIScrollView, State Handle), &lt;a href=&quot;https://github.com/icanzilb/JSONModel&quot;&gt;JSONModel&lt;/a&gt;(runtime)&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰å…´è¶£ï¼Œä¹Ÿå¯ä»¥ç¿»ç¿» &lt;a href=&quot;http://www.opensource.apple.com/source/CF/CF-855.17/&quot;&gt;CoreFoundation&lt;/a&gt; / &lt;a href=&quot;http://www.opensource.apple.com/source/objc4/objc4-646/&quot;&gt;OC runtime&lt;/a&gt; çš„æºç ã€‚&lt;/p&gt;

&lt;h4 id=&quot;èµ„æº&quot;&gt;èµ„æº&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://oleb.net/blog/&quot;&gt;oleb&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://nshipster.com/&quot;&gt;NSHipster&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;&lt;a href=&quot;http://objc.io&quot;&gt;objc.io&lt;/a&gt;&lt;/td&gt;
          &lt;td&gt;Â &lt;/td&gt;
          &lt;td&gt;&lt;a href=&quot;http://objcio.cn&quot;&gt;objcio.cn&lt;/a&gt;&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.apple.com/videos/wwdc/2014/&quot;&gt;WWDC è§†é¢‘&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;å·¥å…·&quot;&gt;å·¥å…·&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/facebook/chisel&quot;&gt;chisel&lt;/a&gt; Facebook å‡ºå“çš„ LLDB åŠ©æ‰‹ï¼Œç”¨äºè°ƒè¯•å¾ˆæ–¹ä¾¿&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://revealapp.com/&quot;&gt;Reveal&lt;/a&gt; æ¯å½“å¥½å¥‡æŸä¸ª App çš„å®ç°æ—¶ï¼Œéƒ½ä¼šæ‰“å¼€å®ƒä¸€çª¥ç©¶ç«Ÿï¼Œç”¨äºè°ƒè¯•è‡ªå·±çš„ App ä¹Ÿå¾ˆæ–¹ä¾¿&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/steipete/Aspects&quot;&gt;Aspects&lt;/a&gt; steipete å¤§å¤§å‡ºå“çš„ä¸€æ¬¾æ–¹ä¾¿ä½¿ç”¨ method swizzling çš„å·¥å…·ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ ä»£ç åˆ°æŸä¸ªæ–¹æ³•&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/nygard/class-dump&quot;&gt;class-dump&lt;/a&gt; ä» Mach-O æ–‡ä»¶ç”Ÿæˆ OC å¤´æ–‡ä»¶ï¼Œæœ‰æ—¶æƒ³çœ‹çœ‹æŸä¸ª App å¤§æ¦‚æ˜¯å¦‚ä½•ç»„ç»‡çš„ä¼šæ¯”è¾ƒæ–¹ä¾¿&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.hopperapp.com/&quot;&gt;Hopper&lt;/a&gt; å¯ä»¥å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼Œç”šè‡³å¯ä»¥ç”Ÿæˆä¼ªä»£ç ï¼æœ‰æ—¶æƒ³çœ‹çœ‹ UIViewController é‡ŒæŸä¸ªæ–¹æ³•å¤§æ¦‚æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œå°±å¯ä»¥ç”¨å®ƒã€‚&lt;/li&gt;
  &lt;li&gt;Instruments è¿™ä¸ªå†…ç½®çš„å·¥å…·å¯¹äºå‘ç° App çš„å„ç§é—®é¢˜å¾ˆæœ‰å¸®åŠ©ï¼Œå¦‚å†…å­˜å ç”¨ã€æ³„éœ²ï¼Œæ¸²æŸ“é—®é¢˜ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ç›®æ ‡-2&quot;&gt;ç›®æ ‡&lt;/h4&gt;

&lt;p&gt;è¿™ä¸ªé˜¶æ®µï¼Œå¯¹äºåº•å±‚çš„å®ç°ä¼šæœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œå„ç§ Core å¼€å¤´çš„ Framework è‡³å°‘å¯ä»¥è¯´å‡ºä¸ªå¤§æ¦‚ï¼Œå·¥å…·ä¹Ÿèƒ½ç†Ÿç»ƒä½¿ç”¨ï¼Œã€Œæ­£ç»çš„ä»£ç ã€å†™è¿‡æ•°ä¸‡è¡Œï¼Œå¯èƒ½å¤©å¤©åœ¨ç¿» &lt;a href=&quot;http://kapeli.com/dash&quot;&gt;Dash&lt;/a&gt;ã€‚å¦‚æœåˆ«äººè®©ä½ å®ç°æŸä¸ªåŠŸèƒ½ï¼Œèƒ½åœ¨è¾ƒçŸ­çš„æ—¶é—´å†…ç»™å‡ºä¸é”™çš„å®ç°æ–¹æ¡ˆï¼Œå¹¶ä¸”è¶³å¤Ÿç»†è‡´ï¼Œç”šè‡³ç²¾ç»†åˆ°å¦‚ä½•ä½¿ç”¨ Core Graphic å»ç”»æŸä¸ªå›¾åƒã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h3&gt;

&lt;p&gt;æˆ‘è§‰å¾—æ— è®ºå­¦ä¹ ä»€ä¹ˆï¼Œã€Œé€Ÿæˆã€çš„å¿ƒæ€æ˜¯æœ€è¦ä¸å¾—çš„ï¼Œè¿™åªä¼šè®©è‡ªå·±å˜å¾—æµ®èºï¼Œä¸€çŸ¥åŠè§£ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¹Ÿå¾ˆéš¾è®©è‡ªå·±çš„å…ƒå­¦ä¹ èƒ½åŠ›å¾—åˆ°æå‡ã€‚æ…¢æ…¢æ¥ï¼Œæ”»å ä¸€ä¸ªåŸåï¼Œå†å»æ‰“ä¸‹ä¸€ä¸ªï¼Œè¿™æ—¶å¿ƒæ€ä¹Ÿä¼šå¹³å’Œè®¸å¤šã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>é˜…è¯»æºç çš„ä¹è¶£</title>
   <link href="http://limboy.me/tech/2014/12/17/the-pleasure-of-reading-source.html"/>
   <updated>2014-12-17T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2014/12/17/the-pleasure-of-reading-source</id>
   <content type="html">&lt;p&gt;é˜…è¯»æºç å°¤å…¶æ˜¯ä¼˜ç§€çš„æºç æ˜¯ä¸€ä»¶å¾ˆæœ‰ä¹è¶£çš„äº‹æƒ…ï¼Œå¯ä»¥æ‹“å®½è§†é‡ï¼Œæé«˜å“ä½ï¼Œé”»ç‚¼æ€ç»´ï¼Œå°±åƒé—´æ¥åœ°åœ¨è·Ÿä½œè€…æ²Ÿé€šä¸€æ ·ã€‚Quora ä¸Šæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š&lt;a href=&quot;http://www.quora.com/How-did-TJ-Holowaychuk-learn-to-program&quot;&gt;TJ-Holowaychunkæ˜¯å¦‚ä½•å­¦ä¹ ç¼–ç¨‹çš„&lt;/a&gt;ï¼Œä»–çš„å›ç­”æ˜¯&lt;/p&gt;

&lt;blockquote&gt;
  &lt;blockquote&gt;
    &lt;blockquote&gt;
      &lt;p&gt;I donâ€™t read books, never went to school, I just read other peopleâ€™s code and always wonder how things work&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/blockquote&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¦‚æœæœ‰è¶³å¤Ÿçš„å¥½å¥‡å¿ƒï¼Œå¹¶ä¸”æ€»æƒ³çŸ¥é“ã€ŒHow Things Workã€ï¼Œé‚£ä¹ˆé˜…è¯»æºç å°±æ˜¯ä¸ªä¸é”™çš„é€”å¾„ã€‚&lt;/p&gt;

&lt;p&gt;æºç çš„å¤æ‚åº¦ä¸åŒï¼Œéœ€è¦æŠ•å…¥çš„æ—¶é—´ã€ä½¿ç”¨çš„æ–¹æ³•ä¹Ÿä¸åŒï¼Œä»¥ä¸€ä¸ªä¸­ç­‰å¤æ‚åº¦çš„é¡¹ç›®ä¸ºä¾‹ï¼Œç®€å•åˆ†äº«ä¸‹æˆ‘é˜…è¯»æºç çš„ä¸€äº›ç»éªŒã€‚&lt;/p&gt;

&lt;p&gt;WWDC 2014ï¼Œæœ‰ä¸€ä¸ª Session æ˜¯è®²&lt;a href=&quot;https://developer.apple.com/videos/wwdc/2014/#232&quot;&gt;ã€ŒAdvanced User Interfaces with Collection Viewsã€&lt;/a&gt;ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©è¿™ä¸ªï¼Œæ˜¯å› ä¸ºå®ƒæ˜¯æˆ‘ä»¬è¿˜ç®—ç†Ÿæ‚‰çš„å¯¹è±¡ï¼ˆCollection Viewï¼‰ï¼Œä½†è‹¹æœç”¨äº†ä¸€äº›ã€Œç‰¹æ®Šã€çš„æ¶æ„æ¥åšåˆ°ä»£ç å¤ç”¨ï¼Œå¹¶ä¸”å‡å°‘ VC çš„ä½“ç§¯ï¼Œè€Œä¸”ä½¿ç”¨äº†éƒ¨åˆ† iTunes Connect çš„æºç ï¼Œè€Œä¸æ˜¯ç®€å•çš„æ¼”ç¤ºä»£ç ã€‚æ‰€ä»¥å†³å®šä¸€çª¥ç©¶ç«Ÿã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†æœ‰ä¸€ä¸ªå¤§æ¦‚çš„æ„Ÿå—ï¼Œå…ˆçœ‹ä¸€éè§†é¢‘ï¼Œä¸éœ€è¦é¢†ä¼šæ¯ä¸ªè¦ç‚¹ï¼Œå…ˆè®°å½•ä¸€äº›å…³é”®ä¿¡æ¯ï¼Œæ–¹ä¾¿åˆ°æ—¶ç¿»æºç ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;è¿™å¥—ç»“æ„å¯ä»¥å¤„ç†å¤æ‚çš„ DataSource&lt;/li&gt;
  &lt;li&gt;å¯ä»¥åŒæ—¶é€‚é… iPhone / iPad&lt;/li&gt;
  &lt;li&gt;æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ loading indicator&lt;/li&gt;
  &lt;li&gt;å¯ä»¥è®¾ç½®æŸä¸ª Header æ˜¯å¦ç½®é¡¶&lt;/li&gt;
  &lt;li&gt;å¯ä»¥æœ‰ä¸€ä¸ªå…¨å±€çš„ Header&lt;/li&gt;
  &lt;li&gt;é€šè¿‡èšåˆ DataSource çš„æ–¹æ³•æ¥è¾¾åˆ°ä»£ç å¤ç”¨ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ª VC&lt;/li&gt;
  &lt;li&gt;å¯ä»¥è®¾ç½®èšåˆå½¢å¼ä¸º Segmented / Composed&lt;/li&gt;
  &lt;li&gt;layoutä¿¡æ¯å¯ä»¥é…ç½®ï¼Œä¸”å¯ä»¥è¦†ç›–&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨äº†æœ‰é™çŠ¶æ€æœº&lt;/li&gt;
  &lt;li&gt;å­ DataSource åœ¨æ•°æ®è½½å…¥å®Œæˆåä¼šæœ‰ä¸€ä¸ª blockï¼Œæ‰€éœ€çš„ DataSource éƒ½è½½å…¥å®Œæˆæ—¶ï¼Œè¿™äº› block ä¼šè¢«ç»Ÿä¸€æ‰§è¡Œ&lt;/li&gt;
  &lt;li&gt;Section Metrics å¯ä»¥è®¾ç½® Section çš„å…·ä½“è¡¨ç°&lt;/li&gt;
  &lt;li&gt;layout çš„ä¿¡æ¯ä¼šåœ¨å†…éƒ¨è¢«ä¿å­˜ï¼Œé¿å…é‡å¤è®¡ç®— (Snapshot Metrics)&lt;/li&gt;
  &lt;li&gt;Optional Layout Methods ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„å¥½æ•ˆæœ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;äº§ç”Ÿäº†ä¸€äº›ç–‘é—®ï¼Œæ¯”å¦‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¤šä¸ªå­ DataSource è¢«ç»„åˆæˆä¸€ä¸ª Composed DataSource æ—¶ï¼Œå¦‚ä½•é€šè¿‡ IndexPath æ‰¾åˆ°å¯¹åº”çš„ DataSourceï¼Ÿ&lt;/li&gt;
  &lt;li&gt;æ‰¾åˆ°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;æ˜¯å¦ç½®é¡¶æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•é€šè¿‡æœ‰é™çŠ¶æ€æœºæ¥ç®¡ç† Loading çŠ¶æ€ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;å¦‚æœæœ‰æŒ‰é’®ï¼Œé‚£ä¹ˆæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;Collection View æ²¡æœ‰ headerViewï¼Œè¿™åˆæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;æ•°æ®æ˜¯æ€ä¹ˆè½½å…¥çš„ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å¤§æ¦‚æœ‰äº†äº›æ¦‚å¿µå’Œç–‘é—®ä¹‹åï¼Œå°±å¯ä»¥æ‰“å¼€æºç ç—›å¿«çœ‹äº†ï¼Œå…ˆæ¥çœ‹çœ‹ç›®å½•ç»“æ„ (å¯ä»¥åœ¨è¿™é‡Œ&lt;a href=&quot;https://github.com/zwaldowski/AAPLAdvancedCollectionView&quot;&gt;åœ¨çº¿æµè§ˆ&lt;/a&gt;)&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Framework&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Categories&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DataSources&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Layouts&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ViewControllers&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Views&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;|-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Application&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;çœ‹æ¥å…³é”®çš„ä¿¡æ¯éƒ½åœ¨ Framework é‡Œäº†ï¼Œé‚£å¦‚ä½•åˆ‡å…¥å‘¢ï¼Ÿåå…¶é“è€Œè¡Œä¹‹ï¼Œå…ˆæ¥çœ‹çœ‹è¿™äº› Framework æ˜¯æ€ä¹ˆç”¨çš„ï¼Œæœ€ç›´æ¥çš„å°±ä» ViewController å…¥æ‰‹ã€‚é‚£å°±å…ˆæ¥çœ‹çœ‹ AAPLCatListViewController è¿™ä¸ªç±»å§ï¼Œå¦‚æœæ²¡çŒœé”™çš„è¯ï¼Œåº”è¯¥æ˜¯å±•ç¤ºå–µå’ªåˆ—è¡¨ï¼ˆç›´è§‚çš„åå­—å¾ˆé‡è¦ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æœç„¶å¾ˆå°ï¼Œå±…ç„¶åªæœ‰ 140 è¡Œï¼Œå¦‚æœä¸åˆ†ç¦»çš„è¯ï¼Œ1400 è¡Œä¹Ÿæ˜¯å¯ä»¥è½»æ¾è¾¾åˆ°çš„ã€‚çœ‹åˆ°å®šä¹‰äº†ä¸€ä¸ª AAPLSegmentedDataSourceï¼Œè„‘æµ·é‡Œå¤§æ¦‚å¯ä»¥æƒ³è±¡å‡ºæ˜¯ä¸€ä¸ªå¯ä»¥åˆ‡æ¢ Tag çš„é¡µé¢ï¼Œæ¥ç€åˆçœ‹åˆ°äº†ä¸¤ä¸ª DataSourceï¼Œé‚£è¿™ä¸¤ä¸ªé¡µé¢çš„æ•°æ®æºåº”è¯¥å°±æ˜¯å®ƒä»¬äº†ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;APPLCatListViewController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLSegmentedDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segmentedDataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;catsDataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;favoriteCatsDataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSIndexPath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectedIndexPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;selectedDataSourceObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ç„¶ååˆçœ‹åˆ°è¿™ä¹ˆä¸€è¡Œ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dealloc&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;segmentedDataSource&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;aapl_removeObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selectedDataSourceObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;çœ‹èµ·æ¥æ˜¯è‹¹æœè‡ªå·±å®ç°äº†ä¸€ä¸ª KVO Wrapperï¼Œæœç„¶ä»–ä»¬è‡ªå·±ä¹Ÿæ— æ³•å¿å—åŸç”Ÿçš„KVOï¼Œå“ˆå“ˆã€‚æ¥ç€åˆ°äº† ViewDidLoadï¼Œæ–°å»ºäº†ä¸¤ä¸ª DataSourceï¼Œé‚£æ–°å»ºçš„æ—¶å€™éƒ½å¹²äº†äº›ä»€ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newAllCatsDataSource&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;All&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;Title for available cats list&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;noContentMessage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;All the big ...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;The message to show when no cats are available&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;noContentTitle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;No Cats&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;The title to show when no cats are available&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errorMessage&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;A problem with the network ....&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;Message to show when unable to load cats&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;errorTitle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSLocalizedString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;@&quot;Unable To Load Cats&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;Title of message to show when unable to load cats&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ‰€ä»¥åªæ˜¯åˆå§‹åŒ–ï¼Œç„¶åè®¾ç½®ä¸€äº›ä¿¡æ¯ï¼ŒNothing Specialã€‚ç„¶åçœ‹åˆ°äº† AAPLLayoutSectionMetrics ï¼Œçœ‹èµ·æ¥æ˜¯è®¾ç½® Layout çš„ä¸€äº›æ˜¾ç¤ºä¿¡æ¯ï¼Œå¦‚ height / backgroundColor ä¹‹ç±»çš„ã€‚&lt;/p&gt;

&lt;p&gt;æœ€ååˆ›å»ºäº†ä¸€ä¸ª KVO æ¥ç›‘æµ‹ selectedDataSource çš„å˜åŒ–ï¼Œç•Œé¢ä¸Šåšç›¸åº”çš„è°ƒæ•´ã€‚&lt;/p&gt;

&lt;p&gt;æ¥ä¸‹æ¥çœ‹çœ‹ AAPLCatListDataSource çš„å®ç°ï¼Œä¸€è¿›å»å‘ç°&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AAPLBasicDataSource&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;/// Is this list showing the favorites or all available cats?
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;çœ‹æ¥ AAPLBasicDataSource ä¸€å®šåšäº†å¾ˆå¤šäº‹ï¼Œè¿›å…¥åˆ° AAPLBasicDataSource.m æ–‡ä»¶ï¼Œçœ‹åˆ°è¿™ä¸ªæ–¹æ³•&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setShowingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;showingFavorites&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_showingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;_showingFavorites&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;resetContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setNeedsLoadContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSNotificationCenter&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;defaultCenter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;addObserver&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;observeFavoriteToggledNotification&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCatFavoriteToggledNotificationName&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ³¨æ„åˆ°æœ‰ä¸€ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;setNeedsLoadContent&lt;/code&gt; æ–¹æ³•ï¼Œçœ‹èµ·æ¥æ•°æ®çš„è½½å…¥åº”è¯¥æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥è§¦å‘çš„ï¼Œè¿›å»çœ‹çœ‹&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setNeedsLoadContent&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;cancelPreviousPerformRequestsWithTarget&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;performSelector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@selector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withObject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;afterDelay&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ç¬¬ä¸€ä¸ªæ–¹æ³•æ²¡æ€ä¹ˆæ¥è§¦è¿‡ï¼ŒæŸ¥ä¸€ä¸‹æ–‡æ¡£å…ˆï¼ŒåŸæ¥æ˜¯å¯ä»¥å–æ¶ˆä¹‹å‰é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;performSelector:withObject:afterDelay:&lt;/code&gt; è§¦å‘çš„æ–¹æ³•ï¼Œä¸ºäº†åŠ æ·±å°è±¡ï¼Œé¡ºä¾¿ Google ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼ŒåŸæ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;performSelector:withObject:afterDelay&lt;/code&gt; åœ¨æ–¹æ³•è¢«æ‰§è¡Œå‰ï¼Œä¼šæŒæœ‰ Objectï¼Œæ–¹æ³•æ‰§è¡Œååœ¨è§£é™¤å¯¹ Object çš„æŒæœ‰ï¼Œå¦‚æœä¸å°å¿ƒå¤šæ¬¡è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±æœ‰å¯èƒ½å¯¼è‡´å†…å­˜æ³„éœ²ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨æ­¤æ–¹æ³•å‰å…ˆ cancel ä¸€ä¸‹æ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥çœ‹çœ‹è¿™ä¸ª &lt;code class=&quot;highlighter-rouge&quot;&gt;loadContent&lt;/code&gt; éƒ½åšäº†ä»€ä¹ˆ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadContent&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// To be implemented by subclassesâ€¦
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;çœ‹æ¥éœ€è¦åœ¨å­ç±»å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œé‚£å°±åˆ° AAPLCatListDataSource é‡Œçœ‹çœ‹è¿™ä¸ªæ–¹æ³•éƒ½åšäº†ä»€ä¹ˆ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadContent&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadContentWithBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLLoading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Check to make certain a more recent call to load content hasn't superceded this oneâ€¦
&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ignore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doneWithError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWithContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;updateWithNoContent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCatListDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;@[];&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;showingFavorites&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLDataAccessManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;manager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fetchFavoriteCatListWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLDataAccessManager&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;manager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;fetchCatListWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ä½¿ç”¨äº† &lt;code class=&quot;highlighter-rouge&quot;&gt;loadContentWithBlock:&lt;/code&gt; æ–¹æ³•ï¼Œè¿›å»çœ‹çœ‹ï¼Œè¿™ä¸ªæ–¹æ³•åšäº†ä»€ä¹ˆ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;loadContentWithBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLLoadingBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;beginLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;__weak&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weakself&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;AAPLLoading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLLoading&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadingWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLLoadingUpdateBlock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;endLoadingWithState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newState&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;AAPLDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weakself&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;// Tell previous loading instance it's no longer current and remember this loading instance
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadingInstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadingInstance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;c1&quot;&gt;// Call the provided block to actually do the load
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;ç®€å•è¯´æ¥å°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ª loadingï¼Œç„¶åæŠŠ loading ä¼ ç»™ blockï¼Œé‚£ &lt;code class=&quot;highlighter-rouge&quot;&gt;loadingWithCompletionHandler:&lt;/code&gt; è¿™ä¸ªæ–¹æ³•åˆåšäº†ä»€ä¹ˆ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instancetype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;loadingWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLLoadingUpdateBlock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NSParameterAssert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;AAPLLoading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ‰€ä»¥å°±æ˜¯ç”Ÿæˆä¸€ä¸ª loading å®ä¾‹ï¼Œç„¶åæŠŠ handler å­˜åˆ° block å±æ€§é‡Œã€‚æ—¢ç„¶å­˜äº†ï¼Œé‚£å°†æ¥æŸä¸ªæ—¶å€™ä¸€å®šä¼šç”¨åˆ°ï¼Œä»åå­—ä¸Šæ¥çœ‹ï¼Œåº”è¯¥æ˜¯ loading å®Œæˆæ—¶ä¼šè¢«è°ƒç”¨ï¼Œæœç´¢ block å…³é”®å­—ï¼Œå‘ç°åªæœ‰åœ¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸­ block æ‰ä¼šè¢«è°ƒç”¨&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;_doneWithNewState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;newState&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLLoadingUpdateBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;update&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#if DEBUG
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OSAtomicCompareAndSwap32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_complete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;NSAssert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;@&quot;completion method called more than once&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif
&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AAPLLoadingUpdateBlock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;dispatch_async&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_get_main_queue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;_block&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ—¢ç„¶æ˜¯ _ å¼€å¤´ï¼Œé‚£åº”è¯¥æ˜¯å†…éƒ¨æ–¹æ³•ï¼Œå¯¹å¤–å°è£…äº†å‡ ç§çŠ¶æ€ï¼Œå¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;ignore&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;done&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;updateWithContent:&lt;/code&gt; ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å’¦ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦å…ˆæŠŠ _block èµ‹ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ blockï¼Œç„¶åå†æŠŠ _block è®¾ä¸º nilå‘¢ï¼Ÿçœ‹èµ·æ¥åƒæ˜¯ä¸ºäº†è§£å†³æŸç§å†…å­˜é—®é¢˜ã€‚å¦‚æœç›´æ¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;_block(newState, error, update)&lt;/code&gt; ä¼šæ€æ ·ï¼Ÿå“¦ï¼Œè™½ç„¶è¿™é‡Œæ²¡æœ‰å‡ºç° selfï¼Œä½† _block æ˜¯ä¸€ä¸ª instance å˜é‡ï¼Œæ‰€ä»¥åœ¨ ^{} é‡Œä¼šå¯¹ self è¿›è¡Œå¼ºå¼•ç”¨ã€‚è€Œå¦‚æœèµ‹ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œé‚£ä¹ˆåªä¼šå¯¹è¿™ä¸ªä¸´æ—¶å˜é‡å¼ºå¼•ç”¨ï¼Œå°±ä¸ä¼šå‡ºç°å¾ªç¯å¼•ç”¨çš„æƒ…å†µã€‚&lt;/p&gt;

&lt;p&gt;AAPLLoading çœ‹çš„å·®ä¸å¤šäº†ï¼Œå†å‡ºæ¥çœ‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;loadContentWithBlock:&lt;/code&gt; ï¼Œæ³¨æ„åˆ°åœ¨ CompletionHandler é‡Œï¼Œæœ‰è¿™ä¹ˆä¸€æ®µ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;endLoadingWithState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newState&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;AAPLDataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weakself&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;me&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™é‡Œçš„ self æ˜¯ AAPLDataSource ï¼ˆBlockåµŒå¥—å¤šäº†ï¼Œè¿˜çœŸæ˜¯å®¹æ˜“æ™•å•Šï¼‰ï¼Œæ¥çœ‹çœ‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;endLoadingWithState:error:update&lt;/code&gt; è¿™ä¸ªæ–¹æ³•éƒ½åšäº†ä»€ä¹ˆ&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;endLoadingWithState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dispatch_block_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;update&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadingError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadingState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;shouldDisplayPlaceholder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;enqueuePendingUpdateBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;notifyBatchUpdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;// Run pending updates
&lt;/span&gt;            &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;executePendingUpdates&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}];&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadingComplete&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;YES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;notifyContentLoadedWithError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è®¾ç½®ä¸€äº›çŠ¶æ€ï¼Œç„¶ååœ¨æ°å½“çš„æ—¶æœºè°ƒç”¨ update blockï¼Œå’¦ï¼Œè¿™é‡Œæœ‰ä¸ª dispatch_block_t æ²¡æ€ä¹ˆè§è¿‡ï¼ŒæŸ¥äº†ä¸€ä¸‹åŸæ¥æ˜¯ä¸€ä¸ªå†…ç½®çš„ç©ºä¼ å€¼å’Œç©ºè¿”å›çš„blockã€‚&lt;/p&gt;

&lt;p&gt;çœ‹äº†ä¸‹ &lt;code class=&quot;highlighter-rouge&quot;&gt;enqueuePendingUpdateBlock&lt;/code&gt;ï¼Œä¼šæŠŠç°åœ¨çš„è¿™ä¸ª update ç»“åˆä¹‹å‰çš„ updateBlockï¼Œå½¢æˆä¸€ä¸ªæ–°çš„ updateBlockï¼Œåº”è¯¥å°±æ˜¯è§†é¢‘é‡Œæåˆ°çš„å½“æ‰€æœ‰çš„ DataSource éƒ½è½½å…¥å®Œæ—¶ï¼Œç»Ÿä¸€æ‰§è¡Œä¹‹å‰çš„ update block&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;notifyBatchUpdate:&lt;/code&gt; æ‰€åšçš„æ˜¯çœ‹ä¸€ä¸‹ Delegate æ˜¯å¦å“åº” &lt;code class=&quot;highlighter-rouge&quot;&gt;dataSource:performBatchUpdate:complete:&lt;/code&gt; å¦‚æœå“åº”åˆ™èµ°ä½ ï¼Œä¸ç„¶æŒ¨ä¸ªæ‰§è¡Œ update / completeã€‚&lt;/p&gt;

&lt;p&gt;çœ‹å®Œäº† &lt;code class=&quot;highlighter-rouge&quot;&gt;loadContentWithBlock&lt;/code&gt; å†æ¥çœ‹çœ‹è¿™ä¸ª Block é‡Œé¢éƒ½åšäº†ä»€ä¹ˆï¼Œå¤§æ„æ˜¯æ ¹æ® self.showingFavorites æ¥åˆ‡æ¢ä¸åŒçš„æ•°æ®æºï¼Œè¿™é‡Œçœ‹åˆ°äº†ä¸€ä¸ªæ–°çš„ç±» AAPLDataAccessManagerï¼Œçœ‹èµ·æ¥åƒæ˜¯ç»Ÿä¸€çš„æ•°æ®å±‚ï¼Œç„ä¸€çœ¼&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AAPLCat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AAPLDataAccessManager&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLDataAccessManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;manager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetchCatListWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetchFavoriteCatListWithCompletionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cats&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetchDetailForCat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fetchSightingsForCat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;AAPLCat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;cat&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;completionHandler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sightings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æœç„¶å¦‚æ­¤ï¼Œå°†æ¥æ•°æ®çš„è½½å…¥å½¢å¼æœ‰å˜åŒ–ï¼Œæˆ–éœ€è¦åšç¼“å­˜å•¥çš„ï¼Œéƒ½å¯ä»¥åœ¨è¿™ä¸€å±‚å¤„ç†ï¼Œå…¶ä»–éƒ¨åˆ†ä¸ä¼šæ„Ÿè§‰åˆ°å˜åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸€è½®çœ‹ä¸‹æ¥å·²ç»æœ‰ä¸å°‘ä¿¡æ¯é‡äº†ï¼Œæ¥ç®€å•æ‹ä¸€ä¸‹ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;SegmentedDataSource setNeedsLoadContent]
                â†“
	&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;CatListDataSource loadContent]
                â†“
   &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;DataSource loadContentWithBlock:]
                â†“
åˆ›å»º loadingï¼Œè®¾ç½® loading å®Œæˆåè¦åšçš„äº‹ â†’ æ‹¿åˆ°æ•°æ®åæ”¾åˆ° updateQueue é‡Œï¼Œç­‰å…¨éƒ¨æ‹¿åˆ°å†æ‰§è¡Œ batchUpdate
                â†“
æ‰§è¡Œ loadContentBlock â†’ ä½¿ç”¨ DataAccessManager å»è·å–æ•°æ®ï¼Œæ‹¿åˆ°åäº¤ç»™ loading&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è¿è¡Œ Project çœ‹æ•ˆæœï¼Œå› ä¸ºæˆ‘è§‰å¾—ä»£ç åŒ…å«çš„ä¿¡æ¯ä¼šæ›´ä¸°å¯Œï¼Œè€Œä¸”è¿™ä¹ˆçœ‹ä¸‹æ¥åï¼Œå¯¹äºç•Œé¢ä¼šé•¿å•¥æ ·ä¹Ÿæœ‰ä¸ªå¤§æ¦‚çš„äº†è§£ã€‚&lt;/p&gt;

&lt;p&gt;è¿™åªæ˜¯å¼€å§‹ï¼Œç»§ç»­æŒ–æ˜ä¸‹å»è¿˜ä¼šæœ‰ä¸å°‘å¥½ä¸œè¥¿ï¼Œæ¯”å¦‚ Favorite æŒ‰é’®çš„å¤„ç†ï¼Œå®ƒæ˜¯é€šè¿‡ Responder Chain è€Œä¸æ˜¯ Delegate æ¥å®ç°çš„ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ€è·¯ã€‚é€šè¿‡æœ‰é™çŠ¶æ€æœºæ¥ç®¡ç† loading çŠ¶æ€ä¹Ÿæ˜¯å¾ˆæœ‰æ„æ€çš„å®ç°ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰å…´è¶£ï¼Œå¯ä»¥çœ‹ä¸‹ ComposedDataSourceï¼Œå…ˆä¸çœ‹å®ç°ï¼Œå¦‚æœè¦è‡ªå·±å†™å¤§æ¦‚ä¼šæ˜¯ä»€ä¹ˆæ€è·¯ï¼Œæ¯”å¦‚å½“è°ƒç”¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;[UICollectionView 
cellForItemAtIndexPath:]&lt;/code&gt; æ—¶ï¼Œå¦‚ä½•æ‰¾åˆ°å¯¹åº”çš„ DataSourceï¼Œæ‰¾åˆ°ä¹‹åå¦‚ä½•æ¸²æŸ“å¯¹åº”çš„ Cell ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥çœ‹æºç çœŸçš„æ˜¯ä¸€ä»¶å¾ˆæœ‰æ„æ€çš„äº‹æƒ…ï¼Œåƒä¸€åœºå†’é™©ï¼Œæ€»æ˜¯ä¼šæœ‰æ„å¤–æ”¶è·ï¼Œå¯èƒ½åœ¨ä¸çŸ¥ä¸è§‰ä¸­ï¼Œèƒ½åŠ›å°±å¾—åˆ°äº†æå‡ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>è¯» Facebook App å¤´æ–‡ä»¶çš„ä¸€äº›æ”¶è·</title>
   <link href="http://limboy.me/tech/2014/11/28/facebook-app-headers.html"/>
   <updated>2014-11-28T00:00:00+08:00</updated>
   <id>http://limboy.me/tech/2014/11/28/facebook-app-headers</id>
   <content type="html">&lt;p&gt;æœ€è¿‘åœ¨çœ‹ä¸€äº› App æ¶æ„ç›¸å…³çš„æ–‡ç« ï¼Œä¹Ÿçœ‹äº† Facebook åˆ†äº«çš„ä¸¤ä¸ªä¸åŒæ—¶æœŸçš„æ¶æ„ï¼ˆ2013 å’Œ 2014ï¼‰ï¼Œäºæ˜¯å°±æƒ³ä¸€çª¥ Facebook App çš„å¤´æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šä¸ä¼šæœ‰æ›´å¤šçš„æ”¶è·ï¼Œç¡®å®æœ‰ï¼Œè¿˜ä¸å°‘ã€‚ç”±äºåœ¨é€‰æ‹© ipa ä¸Šçš„å¤±è¯¯ï¼Œä¸‹äº†ä¸ª 7.0 ç‰ˆçš„ Facebookï¼ˆæœ€æ–°çš„æ˜¯ 18.1ï¼‰ï¼Œä¼šç¨æœ‰è¿‡æ—¶ï¼Œä¸è¿‡åæ¥åˆä¸‹äº†ä¸ª 18.1 çš„çœ‹äº†ä¸‹ï¼Œå‘ç°å˜åŠ¨å…¶å®ä¸å¤§ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»å¤´æ–‡ä»¶ä¸­è·å–åˆ°çš„ä¸€äº›ä¿¡æ¯ï¼ˆ20å¤šä¸‡è¡Œï¼Œæµè§ˆèµ·æ¥è¿˜æ˜¯æŒºç´¯çš„ï¼‰&lt;/p&gt;

&lt;h3 id=&quot;è®©è§†å›¾ç»„ä»¶å¯ä»¥æ–¹ä¾¿åœ°é…ç½®&quot;&gt;è®©è§†å›¾ç»„ä»¶å¯ä»¥æ–¹ä¾¿åœ°é…ç½®&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªåœ¨ Facebook çš„æ¼”è®²ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œè‡ªå®šä¹‰çš„ UI ç»„ä»¶åœ¨åˆå§‹åŒ–æ—¶å¯ä»¥ä¼ ä¸€äº›æ•°å€¼æ¥è¡¨ç¤ºæƒ³è¦å‘ˆç°çš„æ•ˆæœï¼Œå°±åƒ HTML å’Œ CSS ä¸€æ ·ï¼ŒDom ç»“æ„è¡¨ç¤ºè¿™æ˜¯ä»€ä¹ˆï¼ŒCSS å¯¹è¯¥ç»“æ„è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ã€‚ Facebook æ˜¯é€šè¿‡ Struct æ¥åšè¿™ä»¶äº‹çš„ï¼Œæ¯”å¦‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBActionSheetButtonMetrics&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;CDUnknownFunctionPointerType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_vptr&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBMetrics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;_Bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_initialized&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;leftMargin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;textLeftMargin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomSeperatorSideMargin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bottomSeperatorHeight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detailMaxNumLines&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;UIColor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;titleColor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;c1&quot;&gt;//...
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¥½å¤„æ˜¯å‡å°‘äº†ä»£ç é‡ï¼Œè€Œä¸”ç›´è§‚ï¼Œæ–¹ä¾¿å¤ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å°½é‡ä½¿ç”¨ç»„åˆé€‚åº¦ä½¿ç”¨ç»§æ‰¿&quot;&gt;å°½é‡ä½¿ç”¨ç»„åˆï¼Œé€‚åº¦ä½¿ç”¨ç»§æ‰¿&lt;/h3&gt;

&lt;p&gt;å¦‚æœè¿‡åº¦ä½¿ç”¨ç»§æ‰¿ï¼Œå°¤å…¶æ˜¯ç»§æ‰¿å±‚æ¬¡è¿‡æ·±ï¼Œå¾€å¾€ä¼šå¸¦æ¥æ›´å¤§çš„ç»´æŠ¤æˆæœ¬ã€‚æœ‰æ–°éœ€æ±‚æˆ–éœ€æ±‚å˜æ›´æ—¶ï¼Œä¼šèŠ±å¾ˆå¤šæ—¶é—´åœ¨ã€Œæ˜¯å¦éœ€è¦åœ¨åŸºç±»/å­ç±»å¢åŠ ä¸€ä¸ªæ–¹æ³•ã€ï¼Œã€Œæ˜¯å¦éœ€è¦æ–°å»ºä¸€ä¸ªå­ç±»ã€ç­‰è®¾è®¡ç›¸å…³çš„é—®é¢˜ä¸Šã€‚è€Œç»„åˆåˆ™æ²¡æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¤§ä¸äº†æ¢ä¸€ä¸ªç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;ä¸è¿‡ Objective-C å¯¹äºç»„åˆå¹¶æ²¡æœ‰ç‰¹åˆ«çš„æ”¯æŒï¼Œæ‰€ä»¥å®ç°èµ·æ¥ä¼šç•¥éº»çƒ¦&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;People&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Vehicle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vehicle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;move&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;People&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithVehicle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Vehicle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;vehicle&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vehicle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vehicle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;move&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vehicle&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;move&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¦‚æœæœ‰å¾ˆå¤šç±»ä¼¼ move è¿™æ ·éœ€è¦äº¤ç»™å¤–éƒ¨çš„ object æ¥åšçš„æ–¹æ³•ï¼Œå°±ä¼šæ˜¾å¾—å†—ä½™ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œæ¯”èµ·ç»§æ‰¿æ¥è¿˜æ˜¯æ›´æ–¹ä¾¿ç»´æŠ¤çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨ç»„åˆçš„è¯ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ã€Œä¾èµ–æ³¨å…¥ã€ï¼Œæ¯”å¦‚è¿™é‡Œçš„ Vehicleï¼Œå¹¶ä¸éœ€è¦ç‰¹åˆ«æŒ‡å‡ºæ˜¯ Bike è¿˜æ˜¯ Carï¼Œåªè¦æœ‰ move æ–¹æ³•å°±å¯ä»¥ï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢ï¼Œå¯¹äº People æ¥è¯´ä¸éœ€è¦åšä»»ä½•æ”¹åŠ¨ã€‚åœ¨ Objective-C é‡Œæ˜¯é€šè¿‡ protocol æ¥å®ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ Facebook å®šä¹‰äº†ä¸€å¤§å †çš„æ¥å£ï¼ŒåŒ…æ‹¬ Delegate, DataSource å’Œ Protocolï¼ŒViewController æœ‰ Protocolï¼Œä¹Ÿæœ‰ Delegate(å¦‚ FBMediaGalleryViewControllerDelegate)ï¼ŒView / Cell ä¹Ÿæœ‰ Delegate(å¦‚ FBMediaGalleryViewDelegate)ï¼Œè¿˜æœ‰å„ç§é›¶é›¶ç¢ç¢çš„ Protocolï¼Œå¦‚ FBDiscoveryCardProtocol, FBEventProtocolç­‰ã€‚&lt;/p&gt;

&lt;p&gt;å®šä¹‰æ¥å£çš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¢³ç†æ¶æ„çš„è¿‡ç¨‹ï¼Œå¦‚æœå¯¹æ¶æ„ç†è§£ä¸å¤Ÿæ·±åˆ»ï¼Œæ˜¯å¾ˆéš¾å°†æ¥å£æ°å½“åœ°æŠ½è±¡å‡ºæ¥çš„ã€‚å¾ˆå¤šäººæ”¾å¼ƒä½¿ç”¨ç»„åˆï¼Œæœ‰ä¸€éƒ¨åˆ†åŸå› ä¹Ÿæ˜¯æ¶æ„ä¸Šçš„ä¸åˆç†ã€‚&lt;/p&gt;

&lt;p&gt;ç»„ä»¶çš„ç²’åº¦ä¹Ÿæ˜¯ä¸ªé—®é¢˜ï¼Œè¿‡ç»†ä¼šå¯¼è‡´ç»„ä»¶è¿‡å¤šï¼Œç»„åˆçš„è¿‡ç¨‹å°±ä¼šèŠ±å»å¾ˆå¤šæ—¶é—´ï¼›è¿‡ç²—åˆå¯¼è‡´ç»„ä»¶è‡ƒè‚¿ï¼Œéš¾ä»¥å¤ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç»„ä»¶çš„æ¥å£å®šä¹‰å®Œä¹‹åï¼Œä½¿ç”¨èµ·æ¥å¤§æ¦‚ä¼šæ˜¯è¿™æ ·ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBResponseHandler&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBTestable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBReceivedDataBufferDelegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBResponseHandlerProtocol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBPhotoViewController&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBPagingViewDelegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBPagingViewDataSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBPresentableViewController&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™æ ·ä¸€çœ¼å°±å¤§æ¦‚èƒ½çœ‹å‡ºæ¥è¿™ä¸ª Class å¤§æ¦‚ä¼šæœ‰å“ªäº›åŠŸèƒ½ï¼Œå¦‚æœæŸä¸ªç»„ä»¶è¦ä½œè°ƒæ•´ï¼Œåªéœ€ä¿®æ”¹ä¸€å¤„ï¼Œå°±å¯ä»¥å…¨å±€é€šç”¨ã€‚&lt;/p&gt;

&lt;p&gt;é€‚åº¦ä½¿ç”¨ç»§æ‰¿ï¼Œå¯ä»¥åœ¨æ˜“ç»´æŠ¤å’Œä¾¿åˆ©ä¸Šè¾¾åˆ°å¹³è¡¡ï¼Œæ¯”å¦‚ FBTableViewController, FBDialog ç­‰ï¼Œè‡ªå®šä¹‰çš„ç»„ä»¶å¯ä»¥åœ¨å®ƒä»¬çš„åŸºç¡€ä¸Šè¿›è¡Œå¼€å‘ã€‚ç»§æ‰¿çš„å±‚æ¬¡ä¸€èˆ¬ä¸è¶…è¿‡2å±‚ï¼Œæ¯”å¦‚ UITableViewController &amp;lt;- FBTableViewController &amp;lt;- FBFriendsNearbyTableViewController&lt;/p&gt;

&lt;h3 id=&quot;ä¾èµ–æ³¨å…¥&quot;&gt;ä¾èµ–æ³¨å…¥&lt;/h3&gt;

&lt;p&gt;å‰é¢è®²è¿‡ï¼Œç»„åˆå¾€å¾€å’Œä¾èµ–æ³¨å…¥æ­é…ä½¿ç”¨ï¼ŒFacebook ä¸»è¦æ˜¯é€šè¿‡ FBProvider, FBProviderMapData, FBProviderMap æ¥å®ç°ä¾èµ–æ³¨å…¥çš„ã€‚&lt;/p&gt;

&lt;p&gt;Provider ä¼šäº§ç”Ÿä¸€ä¸ª Objectï¼Œæ¯”å¦‚ CameraControllerProvider è°ƒç”¨ get æ–¹æ³•åï¼Œä¼šç”Ÿæˆä¸€ä¸ª MNCameraController çš„å®ä¾‹ã€‚åŒæ—¶ Provider è¿˜æœ‰ä¸¤ä¸ªå­ç±» SingletonProvider å’Œ BlockProviderï¼Œå‰è€…ç”¨æ¥ç”Ÿæˆä¸€ä¸ªå•ä¾‹ï¼Œåè€…ç”¨åœ¨éœ€è¦åˆå§‹åŒ–å‚æ•°çš„æƒ…æ™¯ã€‚&lt;/p&gt;

&lt;p&gt;ProviderMap è·Ÿ ProviderMapData æœ‰äº›é‡å¤ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»æˆ‘ä¹Ÿæ²¡æœ‰æ‹æ¸…ï¼Œæ„Ÿè§‰ ProviderMap åƒæ˜¯ä¸€ä¸ª Managerï¼Œæ³¨å†Œäº†ä¸€å † Providerï¼Œç„¶åå¯ä»¥é€šè¿‡ Provider çš„ ID æ¥æ‰¾åˆ°ä¹‹å‰æ³¨å†Œçš„ Providerã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ¨¡å—åŒ–&quot;&gt;æ¨¡å—åŒ–&lt;/h3&gt;

&lt;p&gt;ä¸å…‰æ˜¯åœ¨ Cocoa å¼€å‘é¢†åŸŸï¼Œå…¶ä»–çš„ç¼–ç¨‹é¢†åŸŸä¹Ÿä¸€æ ·ï¼Œæ¨¡å—åŒ–æ˜¯ä¸€ä¸ªç†æƒ³çš„çŠ¶æ€ï¼Œé«˜å†…èšï¼Œä½è€¦åˆã€‚åƒ shell å‘½ä»¤ä¸€æ ·ï¼Œæ¥å—å‚æ•°æˆ–æ ‡å‡†è¾“å…¥ï¼Œç”Ÿæˆæ ¼å¼åŒ–çš„æ ‡å‡†è¾“å‡ºï¼Œé€šè¿‡ç®¡é“ä¼ é€’ç»™å…¶ä»–æ”¯æŒæ ‡å‡†è¾“å…¥çš„å‘½ä»¤è¡Œå·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;ä½†ç°å®åœºæ™¯è¦å¤æ‚çš„å¤šï¼Œæ¨¡å—åŒ–çš„å®ç°ä¹Ÿæ›´åŠ å›°éš¾ã€‚Facebook æœ‰ä¸€ä¸ª FBAppModule åè®®&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBAppModule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBAppModule&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instanceForSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBSession&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;providerMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBProviderMap&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;supportedURLSchemes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;supportedKeys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBMenuItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;activeMenuItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;defaultIcon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;                                                                                                                                                         
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UIViewController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;viewControllerForMenuItem&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBMenuItem&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;åˆå§‹åŒ–æ—¶ä¼ å…¥ä¸€ä¸ª FBSession (åé¢ä¼šè®²åˆ°) å’Œ ProviderMapï¼Œç„¶åè®¾ç½®æ”¯æŒçš„ url schemesï¼Œkeys(å…·ä½“ä½œç”¨æœªçŸ¥)ï¼Œå¯¹åº”çš„ menuItemï¼Œicon(ç”¨äºåœ¨ menuItem æ˜¾ç¤º) å’Œ ID&lt;/p&gt;

&lt;p&gt;æœ‰äº† Module ï¼Œè‡ªç„¶è¿˜æœ‰ ModuleManagerï¼Œå®ƒçš„ä½œç”¨æ˜¯æ³¨å†Œ Moduleï¼Œå½“ä¸€ä¸ª url è¿‡æ¥æ—¶ï¼Œå¯ä»¥éå† Moduleï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰æ¨¡å—å¯ä»¥å¤„ç†è¿™ä¸ª urlï¼Œæœ‰çš„è¯ï¼Œå°±è°ƒç”¨è¯¥ Module çš„ openURL: æ–¹æ³•ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ® ModuleID æ¥è·å– Moduleã€‚&lt;/p&gt;

&lt;p&gt;FBAppModule æ˜¯ä¸€ä¸ª Protocolï¼ŒFBNativeAppModule æ˜¯å¯¹è¯¥åè®®çš„å®ç°ï¼Œæ‰€ä»¥å…·ä½“çš„æ¨¡å—éƒ½ç»§æ‰¿è¯¥ç±»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å¯¼èˆªç®¡ç†&quot;&gt;å¯¼èˆªç®¡ç†&lt;/h3&gt;

&lt;p&gt;ä¸€èˆ¬æ¥è¯´ç³»ç»Ÿçš„ UINavigationController å·²ç»å¤Ÿä½¿ç”¨äº†ï¼Œå¦‚æœéœ€è¦æ›´å¤§çš„è‡ªç”±åº¦å’Œæ›´é«˜çš„å¯å®šåˆ¶æ€§ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå¯¼èˆªç®¡ç†å™¨ï¼ŒFacebook ä½¿ç”¨äº† FBUINavigationController (Protocol) æ¥å®ç°è‡ªå®šä¹‰å¯¼èˆªçš„ç®¡ç†ï¼Œå±æ€§å’Œæ–¹æ³•è·Ÿç³»ç»Ÿçš„å·®ä¸å¤šã€‚ å®ƒæœ‰å¤šä¸ªå®ç°ï¼šFBTariffedNavigationController, FBSwipeNavigationController, FBCustomNavigationController, FBNavigationControllerã€‚å‰é¢è®²è¿‡ç»§æ‰¿ä¸€èˆ¬ä¸è¶…è¿‡2å±‚ï¼Œè¿™é‡Œæ˜¯ä¸€èˆ¬ä¹‹å¤–çš„æƒ…å†µï¼Œæœ‰3å±‚ã€‚&lt;/p&gt;

&lt;h3 id=&quot;mvvm&quot;&gt;MVVM&lt;/h3&gt;

&lt;p&gt;MVVM æ˜¯è§£å†³ Massive View Controller çš„ä¸€ä¸ªæœ‰æ•ˆæ–¹æ³•ï¼Œç‹¬ç«‹å‡ºä¸€ä¸ª ViewModel ä½œä¸º View çš„æ•°æ®æºï¼Œä»¥åŠå¤„ç† View çš„ä¸€äº›äº¤äº’æ“ä½œï¼Œè€Œ VC åªéœ€è¦å°† ViewModel å’Œ View å…³è”èµ·æ¥å³å¯ã€‚ä¸€èˆ¬ä¼šæ­é…æŸç§ç»‘å®šçš„å®ç°ï¼ŒKVO æˆ– ReactiveCocoa éƒ½å¯ä»¥ï¼Œè¿™æ · ViewModel çš„æ•°æ®æœ‰å˜åŒ–å°±å¯ä»¥è‡ªåŠ¨æ˜ å°„åˆ° View ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;Facebook ä¹Ÿé‡‡ç”¨äº†è¿™ç§æ–¹å¼ï¼Œæœ‰ä¸€ä¸ª FBViewModel åŸºç±»&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBViewModel&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// çœç•¥äº†ä¸€äº›ç›¸å…³æ€§ä¸å¤§çš„å±æ€§å’Œæ–¹æ³•
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__weak&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBViewModelManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModelManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize viewModelManager=_viewModelManager;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;viewModelSource&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize viewModelSource=_viewModelSource;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBViewModelConfiguration&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModelConfiguration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize viewModelConfiguration=_viewModelConfiguration;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;viewModelVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize viewModelVersion=_viewModelVersion;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewModelUUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize viewModelUUID=_viewModelUUID;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBMemModelObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memModel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize memModel=_memModel;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setNilValueForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithViewModelUUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;viewModelVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setViewModelVersion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;humanDescription&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;loadPermanentDataModelObjectIDFromDataModelObjectID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CDUnknownBlockType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;didUpdateWithChangedProperties&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__weak&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBViewModelController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modelController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;loadState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Facebook è‡ªå·±å®ç°äº†ä¸€å¥— ViewModel çš„æ›´æ–°é€šçŸ¥æœºåˆ¶ï¼Œå› ä¸º ViewModel éƒ½æ˜¯ Immutable çš„ï¼Œæ‰€ä»¥æ— æ³•æ”¹å˜ï¼Œé‚£ä¹ˆå°±éœ€è¦æœ‰ä¸€ä¸ªåœ°æ–¹å»é›†ä¸­ç®¡ç†è¿™äº› ViewModelï¼Œæœ‰æ›´æ–°æ—¶å¯ä»¥åŠæ—¶é€šçŸ¥åˆ°ï¼Œ FBViewModelController åº”è¯¥å°±æ˜¯å¹²è¿™äº‹çš„ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;- (void)_notifyViewModel:(id)arg1 didUpdateWithChanges:(id)arg2;&lt;/code&gt; ã€‚ä½† FBViewModelManager çœ‹èµ·æ¥æ›´åˆé€‚ï¼ŒäºŒè€…çš„åŠŸèƒ½æ²¡æœ‰å¤ªç†æ¸…æ¥šã€‚&lt;/p&gt;

&lt;p&gt;FBViewModelController è¿˜æœ‰ä¸€ä¸ª Delegateï¼Œä¸»è¦æœ‰3ä¸ªæ–¹æ³• &lt;code class=&quot;highlighter-rouge&quot;&gt;didUpdate[Delegate][Insert]ViewModel:&lt;/code&gt;ï¼Œå¯ä»¥åšä¸€äº›äº‹åçš„æ“ä½œã€‚&lt;/p&gt;

&lt;h3 id=&quot;builder-pattern&quot;&gt;Builder Pattern&lt;/h3&gt;

&lt;p&gt;åœ¨å®šä¹‰ä¸€ä¸ª ViewController æ—¶ï¼Œå¾€å¾€éœ€è¦æ¥æ”¶å¾ˆå¤šä¸ªå‚æ•°ï¼Œä»¥ &lt;code class=&quot;highlighter-rouge&quot;&gt;initWith:&lt;/code&gt; è¿™ç§å½¢å¼å‡ºç°ä¸å¤ªåˆé€‚ï¼Œé™¤éä½ èƒ½å®¹å¿ä¸€ä¸ª10è¡Œçš„æ–¹æ³•å£°æ˜ã€‚é€šå¸¸çš„åšæ³•æ˜¯æŠŠè¿™äº›å‚æ•°å£°æ˜ä¸º propertyï¼Œç„¶ååœ¨åˆå§‹åŒ– VC åï¼Œå¯¹è¿™äº› property èµ‹å€¼ï¼Œç„¶ååœ¨ ViewDidLoad é‡Œä½¿ç”¨è¿™äº› propertyã€‚è¿™æ ·åšæœ‰å‡ ä¸ªé—®é¢˜ï¼š1) ä¸çŸ¥é“å“ªäº›æ˜¯éœ€è¦åœ¨ ViewDidLoad å‰è®¾ç½®çš„ï¼Œä¼šå‡ºç°å¿˜äº†è®¾ç½®çš„ç°è±¡ã€‚2) è¿™äº›å±æ€§å¯ä»¥åœ¨å¤–éƒ¨è¢«æ”¹åŠ¨ã€‚ 3) ä»£ç ä¸å¤Ÿä¼˜é›…ã€‚&lt;/p&gt;

&lt;p&gt;Builder Pattern å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒè·Ÿå·¥å‚æ¨¡å¼æœ‰ç‚¹åƒã€‚Facebook ä¹Ÿç”¨åˆ°äº†è¿™ä¸ªæ¨¡å¼ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ª FBMUserFetchStatus ç±»ï¼Œè¯¥ç±»åˆå§‹åŒ–æ—¶éœ€è¦ä¸€äº›å‚æ•°ï¼Œäºæ˜¯å°±æœ‰äº† FBMUserFetchStatusBuilder ç±»&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBMUserFetchStatusBuilder&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;aMUserFetchStatusFromExistingMUserFetchStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aMUserFetchStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withIdentifiers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withImageUrls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withHasVerifiedPhone&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withCanInstallMessenger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withHasMessenger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withIsFriend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withNickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withPhoneticName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withUserId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æœ€åçš„ build æ–¹æ³•ä¼šç”Ÿæˆä¸€ä¸ª FBMUserFetchStatus å®ä¾‹ï¼Œæœ‰äº†è¿™ä¸ª Builder å°±çŸ¥é“æœ‰å“ªäº›å‚æ•°æ˜¯å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶è¿›è¡Œè®¾ç½®çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;data-manager&quot;&gt;Data Manager&lt;/h3&gt;

&lt;p&gt;è¿™æ˜¯é‡å¤´æˆï¼Œæ‰€ä»¥çœ‹èµ·æ¥ç•¥ç´¯ï¼Œä¸œè¥¿å¾ˆå¤šï¼Œå¾ˆå¯èƒ½æ¨æ–­é”™è¯¯ã€‚&lt;/p&gt;

&lt;p&gt;å…ˆæ¥çœ‹çœ‹å®ä½“ç±»ï¼Œé¦–å…ˆæ˜¯ FBEntityRequest&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBEntityRequestParse&lt;/span&gt;                                                                                                                                                                       
&lt;span class=&quot;k&quot;&gt;@optional&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;canParse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSError&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;syncError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isSyncing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;syncing&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ‰€ä»¥å®ä½“éƒ½æ˜¯å¯ä»¥è¢«è§£æå’ŒåŒæ­¥çš„ï¼Œè¿˜è‡ªå¸¦äº†ä¸€ä¸ª Requestã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥çœ‹çœ‹ FBEntity&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBEntityRequestParse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;                                                                                                                                                  
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entityURLForFBID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entityURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isDataStale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataStale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSDate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastSyncTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fbid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@optional&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;collection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBEntityCollection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg2&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg3&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBRequest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collectionRequest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBEntityCollection&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBEntityDownloader&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;entityDownloader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parentEdges&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSSet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parentCollections&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;entityInitializeWithFBID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;æ¯ä¸ª Entity éƒ½æœ‰ä¸€ä¸ª entityURLï¼Œæˆ–è®¸å¯ä»¥ç”¨æ¥åŒæ­¥ï¼Ÿ dataStale åº”è¯¥æ˜¯ç”¨æ¥è¡¨ç¤ºæ•°æ®æ˜¯å¦ dirtyï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå¯èƒ½éœ€è¦åŒæ­¥ã€‚ è¿˜å¯ä»¥è¯·æ±‚ Collectionã€‚&lt;/p&gt;

&lt;p&gt;FBEntityCollection è·Ÿ FBEntity ç±»ä¼¼ï¼Œä¸è¿‡å¤šäº† syncAll / memberClass / allObjects è¿™äº›å±æ€§/æ–¹æ³•ã€‚&lt;/p&gt;

&lt;p&gt;å†æ¥çœ‹çœ‹æ•°æ®è¯·æ±‚ï¼Œé¦–å…ˆæ˜¯ FBRequestï¼Œä¸å¤ªæ˜ç™½è¿™ä¸ª Class çš„å…·ä½“åŠŸèƒ½ï¼Œå› ä¸ºæ²¡æœ‰ URLï¼Œä¸€ä¸ªæ²¡æœ‰ URL çš„ Request èƒ½åšä»€ä¹ˆï¼Ÿ ç„¶åçœ‹åˆ°äº† FBRequesterï¼Œè¿™ä¸ªçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ•°æ®è¯·æ±‚ç±»ï¼Œæœ‰ URL, responseHandler,  connectionçŠ¶æ€, delegateç­‰ã€‚ä½†è¿™åªæ˜¯å•ä¸ªçš„è¯·æ±‚ï¼Œå¦‚ä½•å¯¹å¤šä¸ªè¯·æ±‚è¿›è¡Œç®¡ç†å‘¢ï¼Œè¿™æ—¶çœ‹åˆ°äº† FBNetworkerï¼Œå®ƒæœ‰ +sharedNetworker, requestQueue, cancelRequests:, addRequest: æ‰€ä»¥å°±æ˜¯å®ƒäº†ã€‚ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆä¸‹é¢è¿˜æœ‰ä¸€ä¸ª FBNetworkerRequest ï¼Ÿçœ‹èµ·æ¥åƒæ˜¯ FBNetworker çš„ Delegateï¼Œä½†ä¸ç¡®å®šã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†é¿å… URI æ•£è½åœ¨å„å¤„ï¼ŒFacebook è¿˜ä¸“é—¨ä¸º NSURL å†™äº†ä¸ª Category æ¥ç»Ÿä¸€ç®¡ç† URIã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSURL&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;FBFoundation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;friendsNearbyURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;codeGeneratorURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;tagApprovalURLWithTagId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tagApprovalURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pokesURL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;personExpandedAboutURLWithFBID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿˜æœ‰ä¸€ä¸ª URL ç”Ÿæˆç±»ï¼ŒFBURLRequestGeneratorï¼Œè¯¥ç±»ä¿å­˜äº† appSecret å’Œ appVersionï¼Œç”Ÿæˆçš„ URL ä¼šè‡ªåŠ¨å¸¦ä¸Šè¿™äº›å±æ€§ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®è¿˜æœ‰å¾ˆå¤šï¼Œå®åœ¨çœ‹ä¸ä¸‹æ¥äº†Â·Â·Â·&lt;/p&gt;

&lt;h3 id=&quot;smarter-views&quot;&gt;Smarter Views&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬éƒ½çŸ¥é“ ViewController è‡ªå¸¦äº†ä¸€ä¸ª viewï¼Œå¯ä»¥ç›´æ¥åœ¨è¿™ä¸ª view ä¸Š addSubviewï¼Œæ­£æ˜¯ç”±äºè¿™ä¸ªä¾¿åˆ©æ€§ï¼Œå¾ˆå¤šåˆ›å»º View çš„ä»£ç ä¹ŸæŒ¤åœ¨äº† VC é‡Œï¼Œå®åœ¨æ˜¯ä¸é›…è§‚ã€‚&lt;/p&gt;

&lt;p&gt;æ›´å¥½çš„æ–¹æ³•æ˜¯æ›¿æ¢ VC çš„ view ä¸ºè‡ªå®šä¹‰çš„ Viewï¼Œç„¶åæŠŠè¿™ä¸ªè‡ªå®šä¹‰ View ç‹¬ç«‹å‡ºå»ã€‚æ¯”å¦‚åœ¨ &lt;code class=&quot;highlighter-rouge&quot;&gt;-loadView&lt;/code&gt; æ—¶è¦†ç›– view&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyProfileViewController&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loadView&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyProfileView&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;å¯ä»¥åŒæ—¶é‡å®šä¹‰ view çš„ç±»å‹ï¼Œå¦‚ &lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyProfileView&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;/code&gt;ï¼Œè®©ç¼–è¯‘å™¨æ˜ç™½ view çš„ç±»å‹å·²ç»å˜äº†ã€‚&lt;/p&gt;

&lt;p&gt;å› ä¸ºçœ‹åˆ°äº†ä¸å°‘ VC ä¸­éƒ½æœ‰ &lt;code class=&quot;highlighter-rouge&quot;&gt;-loadView&lt;/code&gt; æ–¹æ³•ï¼Œæ‰€ä»¥æ¨æ–­å¯èƒ½ä½¿ç”¨äº†è¿™é¡¹æŠ€æœ¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;fbsession&quot;&gt;FBSession&lt;/h3&gt;

&lt;p&gt;åœ¨ Web å¼€å‘é¢†åŸŸï¼ŒSession æ˜¯ç”¨æ¥ä¿å­˜ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯çš„ï¼ŒFBSession è‡ªç„¶ä¹Ÿä¸ä¾‹å¤–ï¼Œä¸è¿‡å®ƒä¿å­˜çš„å†…å®¹è¿˜çœŸæ˜¯å¤šå‘¢ã€‚&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FBSession&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NSObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FBInvalidating&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setCurrentSession&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_globalSessionForDebugging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DO_NOT_USE_OR_YOU_WILL_BE_FIREDcurrentSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBAPISessionStore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;apiSessionStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize apiSessionStore=_apiSessionStore;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBSessionDiskStore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sessionDiskStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize sessionDiskStore=_sessionDiskStore;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBStore&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize store=_store;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appSecret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// @synthesize appSecret=_appSecret;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isValid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;valid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BOOL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hasUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userFBID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBViewerContext&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;viewerContext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBUserPreferences&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;userPreferences&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;retain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBPreferences&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sessionPreferences&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateAccessToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;updateActingViewer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clearPreferences&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;invalidate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;DO_NOT_USE_OR_YOU_WILL_BE_FIREDvalueForKeyRequiresUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withInitializer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CDUnknownBlockType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;valueForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;withInitializer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CDUnknownBlockType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;valueForKey&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;initWithAppSecret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;apiSessionStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBReactionController&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reactionController&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBLocationPingback&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locationPingback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBAppSectionManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;appSectionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FBBookmarkManager&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bookmarkManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;many&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;more&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;Session æ˜¯å¯ä»¥ä¿å­˜åˆ°æœ¬åœ°çš„ï¼Œæœ‰ä¸€ä¸ªçŠ¶æ€å˜é‡ç”¨æ¥æ ‡è¯†æ˜¯å¦æœ‰æ•ˆ(valid)ï¼Œæ˜¯å¦å·²ç™»å½•(hasUser)ï¼Œç”¨æˆ·çš„ä¸€äº›è®¾ç½®(è¿™äº›è®¾ç½®ä¼šä¿å­˜åˆ°æœ¬åœ°)ï¼Œå¯ä»¥æ›´æ–° AccessTokenï¼Œè¿˜å¸¦äº†å„ç§ Controller å’Œ Managerï¼Œæ‰€ä»¥ä¸œè¥¿è¿˜æ˜¯æŒºå¤šçš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸¤ä¸ªç‰¹æ®Šæ–¹æ³•ï¼Œä½¿ç”¨åä¼šè¢«FireÂ·Â·Â·&lt;/p&gt;

&lt;h3 id=&quot;services&quot;&gt;Services&lt;/h3&gt;

&lt;p&gt;Service é¡¾åæ€ä¹‰ï¼Œæä¾›æŸç§æœåŠ¡ï¼Œå¾€å¾€è·Ÿç•Œé¢æ— å…³ã€‚ä»ç›®å½•å±‚çº§ä¸Šçœ‹ï¼ŒServiceå¹¶ä¸åœ¨Moduleé‡Œé¢ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äºŒè€…æ˜¯ç‹¬ç«‹çš„ï¼Œæ¯”å¦‚ FBTimelineModule å¹¶ä¸åŒ…å« FBTimelineServiceã€‚&lt;/p&gt;

&lt;p&gt;Service ä¹‹é—´å¯ä»¥æœ‰ä¾èµ–ï¼Œè¿™é‡Œæ˜¯é€šè¿‡ &lt;code class=&quot;highlighter-rouge&quot;&gt;startAppServiceWithDependencies:&lt;/code&gt; æ¥å®ç°çš„ï¼Œä¸è¿‡ä¸æ¸…æ¥š Service è‡ªèº«å¦‚ä½•å£°æ˜ä¾èµ–å“ªäº›å…¶ä»–çš„ Servicesã€‚&lt;/p&gt;

&lt;h3 id=&quot;style&quot;&gt;Style&lt;/h3&gt;

&lt;p&gt;App çš„ Style æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†çš„åœ°æ–¹ï¼Œå¼€å‘å¾€å¾€çœ‹ç€è®¾è®¡å›¾å°±å¼€å§‹å†™äº†ï¼Œè¿™æ ·å¾ˆå®¹æ˜“é€ æˆæ ·å¼ä¸ç»Ÿä¸€ï¼Œä¸”å°†æ¥è°ƒæ•´èµ·æ¥ä¹Ÿä¸æ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;Facebook æ˜¯é€šè¿‡ Category æ¥è‡ªå®šä¹‰æ ·å¼çš„ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;figure class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-objc&quot; data-lang=&quot;objc&quot;&gt;&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;FBMediaKit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fb_buttonTypeSystemWithTitle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fb_buttonWithNormalImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;highlightedImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;selectedImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fb_buttonWithTemplateImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fb_buttonWithStyle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt; 

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;FBUIKit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fb_moreOptionsNavBarButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fb_backArrowButtonWithText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;fb_backArrowButtonWithRightPadding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;arg1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fb_backArrowButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UIButton&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;MNLoginFormAppearanceHelpers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;phoneFormHeaderButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;singleSignOnButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;skipButton&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;formFieldButtonInvertedColors&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@end&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/figure&gt;

&lt;p&gt;è¿™æ ·ä¹Ÿä¸ç”¨å…³å¿ƒfontColorï¼Œmarginï¼ŒbackgroundColorç­‰ï¼Œç›´æ¥æ‹¿æ¥ç”¨å³å¯ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h3&gt;

&lt;p&gt;ä»ç›®å½•ç»“æ„ä¸Šæ¥çœ‹ï¼ŒFacebook æœ‰ FBUIKit, FBFoundation, FBAppKit, Moduleã€‚å…¶ä¸­ FBUIKit å’Œ FBFoundation æ˜¯ä¸šåŠ¡æ— å…³çš„ï¼Œå¯ä»¥ç”¨åœ¨å…¶ä»– App ä¸Šï¼ŒFBAppKit å’Œ Module æ˜¯ä¸šåŠ¡ç›¸å…³çš„ã€‚&lt;/p&gt;

&lt;p&gt;Module è‡ªå¸¦èµ„æºï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª mini appã€‚&lt;/p&gt;

&lt;p&gt;ä½¿ç”¨äº† EGODatabase, SDWebImage, SSZipArchive, CocoaLumberjack è¿™å‡ ä¸ªå¼€æºç±»åº“ï¼ˆå¯èƒ½è¿˜æœ‰æ›´å¤šï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;æ—¶é—´å’Œèƒ½åŠ›æœ‰é™ï¼Œåªèƒ½æŒ–æ˜å‡ºè¿™äº›ä¿¡æ¯ï¼Œå¸Œæœ›èƒ½å¸¦æ¥äº›å¸®åŠ©ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>æŠŠæ‰‹æœºæ‹¿åœ¨æ‰‹é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šé”™è¿‡ç»†å¾®çš„é£æ™¯äº†</title>
   <link href="http://limboy.me/essay/2014/09/22/phone-in-my-hand.html"/>
   <updated>2014-09-22T00:00:00+08:00</updated>
   <id>http://limboy.me/essay/2014/09/22/phone-in-my-hand</id>
   <content type="html">&lt;p&gt;ã€Œæ‹ç…§ã€å¯¹äºä¸€ä¸ªæ‰‹æœºçš„æ„ä¹‰å·²ç»è¶Šæ¥è¶Šé‡è¦äº†ï¼Œæ¯æ¬¡æ–°å‡ºä¸€æ¬¾æ‰‹æœºï¼Œéƒ½ä¼šå…ˆçœ‹ä¸‹æ‹ç…§æ•ˆæœæ€ä¹ˆæ ·ï¼šå¤œæ™¯ã€å¼ºå…‰ã€äººåƒã€é˜´å¤©ã€è‰²å½©ç­‰ç­‰ã€‚ä½†çœŸæ­£åˆ°æ‰‹åï¼Œå®ƒçš„ä½œç”¨çœŸçš„å‘æŒ¥å‡ºæ¥äº†ä¹ˆï¼Ÿè¿˜æ˜¯åªæ˜¯ç”¨æ¥è®°å½•ç”Ÿæ´»ï¼šç¾é£Ÿã€è‡ªæ‹ã€é£æ™¯ã€æŸåœ°çš„æ ‡å¿—ç‰©ç­‰ç­‰ã€‚è¿™äº›å½“ç„¶æ˜¯ç›¸æœºå¯ä»¥åšä¹Ÿåº”è¯¥åšçš„äº‹ï¼Œä½†ç›¸ä¿¡æˆ‘ä»¬åœ¨ä¹°å®ƒçš„æ—¶å€™è¿˜ä¼šæœ‰åˆ«çš„æ‰“ç®—å§ï¼Œæ¯”å¦‚æŠ“æ‹å®¹æ˜“è¢«å¿½ç•¥ï¼Œä½†åœ¨ä½ çœ‹æ¥åˆå€¼å¾—è®°å½•çš„åœºæ™¯ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œèµ°åœ¨è·¯ä¸Šçš„æ—¶å€™ï¼Œå®ƒåªæ˜¯é™é™åœ°èººåœ¨è£¤å…œäº†ï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨æ¥å¬å¬éŸ³ä¹æˆ–podcastã€‚å› ä¸ºæ¯å¤©èµ°çš„æ˜¯åŒä¸€æ¡è·¯ï¼Œè·¯ä¸Šçš„é£æ™¯æ—©å·²äº†ç„¶äºèƒ¸ï¼Œé—­ä¸Šçœ¼ç›éƒ½çŸ¥é“å‰é¢ä¸€ä¸ªè·¯å£å·¦è½¬ä¼šæœ‰ä»€ä¹ˆï¼Œè¿‡äº†å¤©æ¡¥åˆä¼šæœ‰ä»€ä¹ˆï¼Œè¿›äº†å°åŒºä¼šçœ‹è§ä»€ä¹ˆã€‚å¯¹äºè¿™äº›ä¹ æƒ¯äº†çš„äº‹ç‰©ä¼šè‡ªåŠ¨å…³é—­ã€Œæ¢ç´¢ã€æ¨¡å¼ï¼Œå°±åƒè€æœ‹å‹ä¸€æ ·ï¼Œtaæ‡‚ä½ ï¼Œä½ ä¹Ÿæ‡‚taã€‚&lt;/p&gt;

&lt;p&gt;ç›´åˆ°æœ‰ä¸€å¤©æˆ‘æŠŠæ‰‹æœºæ‹¿åœ¨æ‰‹é‡Œï¼Œå°±åƒæ”¥ç€ä¸€æŠŠé”¤å­ä¸€æ ·ï¼Œåˆ°å¤„ç•™æ„é‚£ä¸ªé’‰å­ã€‚&lt;/p&gt;

&lt;p&gt;è·¯è¾¹æœ‰ä¸€å®¶çº¹èº«åº—ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªçš®è‚¤ç™½çš™ï¼Œç›¸è²Œè‹±ä¿Šçš„ç”·ç”Ÿç•¥å¸¦ç¾æ¶©çš„ååœ¨é‡Œé¢ï¼Œä¸çŸ¥å‡ºäºä»€ä¹ˆåŸå› æƒ³è¦ç»™è‡ªå·±çº¹ä¸ªèº«ã€‚çœ‹åˆ°ä¸€åªè€é¼ ä»æ²³çš„ä¸€å¤´æ¸¸åˆ°å¦ä¸€å¤´ï¼Œé’»è¿›äº†å¤§ç‰‡é“œé’±è‰çš„æ·±å¤„ã€‚çœ‹åˆ°è·¯è¾¹æœ‰ä¸€å®¶ä¿®é‹çš„åº—ï¼Œè€Œåº—é‡Œçš„ä¸€ä½å¸ˆå‚…æ˜¯è‹å“‘äººã€‚çœ‹åˆ°æ–‘é©¬çº¿æœ‰æ—¶ä¼šåœ¨å‰åŠéƒ¨åˆ†æ•…æ„å‘ˆç°æ›²æŠ˜çŠ¶ã€‚çœ‹åˆ°å‚æ™šçš„å¤©ç©ºå±…ç„¶æ˜¯ç«çƒ§äº‘ã€‚çœ‹åˆ°åˆšä¸‹å®Œé›¨ï¼Œè·¯è¾¹çš„ç»¿åŒ–å¸¦ä¸Šæœ‰æ°´ç æŒ‚åœ¨äº†èœ˜è››ç½‘ä¸Šã€‚çœ‹åˆ°åœ°ä¸Šçš„çŸ³æ¿è·¯æ˜¯å‚å·®ä¸é½ï¼Œé”™è½æœ‰è‡´åœ°æ‘†æ”¾ã€‚çœ‹åˆ°è·¯è¾¹çš„æ ‘ä¸Šç»“äº†ä¸€ä¸²ä¸çŸ¥åçš„æœå®ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªä¹‹å‰è‡ªä»¥ä¸ºä¸€è§ˆæ— ä½™çš„é£æ™¯ï¼Œç«Ÿæœ‰é‚£ä¹ˆå¤šç»†å¾®ä¹‹å¤„æœªæ›¾ç•™æ„ã€‚æˆ‘ä»¬æ€»æ˜¯å¸Œæœ›èƒ½å»å¤–é¢çš„ä¸–ç•Œçœ‹çœ‹ï¼Œçœ‹çœ‹ä¸ä¸€æ ·çš„äººï¼Œä¸ä¸€æ ·çš„äº‹ï¼Œä¸ä¸€æ ·çš„æ™¯ï¼Œè¿™å½“ç„¶æ˜¯å¥½çš„ï¼Œåªæ˜¯ä¹Ÿåˆ«å¿½ç•¥äº†ç°åœ¨ç”Ÿæ´»çš„è¿™ä¸ªå°ä¸–ç•Œï¼Œç»†ç»†å“å‘³ï¼Œæˆ–è®¸è¿˜ä¼šæœ‰ä¸å°‘æƒŠå–œå‘¢ã€‚&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Design Details - Camu</title>
   <link href="http://limboy.me/design/2014/09/20/camu.html"/>
   <updated>2014-09-20T00:00:00+08:00</updated>
   <id>http://limboy.me/design/2014/09/20/camu</id>
   <content type="html">&lt;p&gt;Camuæ˜¯èŠ¬å…°çš„&lt;a href=&quot;http://sumoing.com/&quot;&gt;sumoing&lt;/a&gt;å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾æ‹ç…§Appï¼Œè¿™æ˜¯ä¸€ä¸ªç›®å‰åªæœ‰6ä¸ªäººçš„å›¢é˜Ÿï¼Œä½†éƒ½æœ‰ç€ä¸é”™çš„åŠŸåº•ï¼Œä¸ªäººä¹Ÿæ¯”è¾ƒå–œæ¬¢/å‘å¾€è¿™æ ·çš„å°å›¢é˜Ÿã€‚&lt;/p&gt;

&lt;p&gt;å‰äº›æ—¥å­è‹¹æœåœ¨AppStoreçš„é¦–é¡µæ¨èäº†å®ƒï¼Œè¶³è§å®ƒè‚¯å®šæœ‰è¿‡äººä¹‹å¤„ã€‚ä½¿ç”¨ä¸‹æ¥çš„æ„Ÿå—æœ‰ç‚¹åƒToDoListé‡Œçš„Clearï¼Œæ‰‹åŠ¿ç”¨å¾—æ¯”è¾ƒå¤šï¼Œæ“ä½œæŒºæ–¹ä¾¿ï¼Œé¡µé¢å¾ˆå¹²å‡€ï¼Œæœ‰æ°å½“çš„åŠ¨ç”»æ•ˆæœï¼Œä¹Ÿæœ‰è‡ªå·±ä¸€äº›ç‹¬åˆ°çš„ç‚¹ã€‚ç®€å•è¯´æ¥å°±æ˜¯ã€Œä¼˜é›…ä¸”ä½“è´´ã€ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å¼€åœº&quot;&gt;å¼€åœº&lt;/h3&gt;

&lt;p&gt;Camuçš„å¼€åœºè·Ÿå…¶ä»–Appç•¥æœ‰ä¸åŒï¼Œå¸¸è§„çš„å¼€åœºæ˜¯å‡ ä¸ªå¼•å¯¼å›¾å·¦å³æ»‘åŠ¨ï¼Œè¿›å…¥åˆ°æœ€åä¸€é¡µæ—¶ï¼Œç‚¹å‡»æŸä¸ªæŒ‰é’®è¿›å…¥Appã€‚Camuçš„å¼€åœºè·ŸPaperä¸€æ ·æ˜¯ä¸€ä¸ªè§†é¢‘ï¼Œè¿™å°±æ„å‘³ç€Appä½“ç§¯çš„å¢åŠ ï¼Œä»¥åŠæ›´å¤šçš„æˆæœ¬ã€‚å¥½å¤„å°±æ˜¯è®©ç”¨æˆ·æ„Ÿå—åˆ°äº†è¯šæ„ï¼Œå¸¦ç€æ„‰æ‚¦çš„å¿ƒæƒ…å¼€å§‹äº†æ¢ç´¢ä¹‹æ—…ã€‚ä¸è¿‡è¿™ä¸ªå¤§å¤§çš„logoè¿˜æ˜¯ç•¥æ˜¾æŒ¡å®³ã€‚åŒæ—¶ç”¨ä¸€å¥è¯è¯´æ˜æœ‰äº†è¿™ä¸ªAppèƒ½åšä»€ä¹ˆâ€œBetter Photos and Videosâ€ã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-opening.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;p&gt;æ­£å¥½æä¸€ä¸‹ï¼Œå¾ˆå¤šäº§å“åœ¨æè¿°è‡ªèº«æ—¶ç»å¸¸ä¼šä»featureå…¥æ‰‹ï¼Œèƒ½åšè¿™ä¸ªï¼Œèƒ½åšé‚£ä¸ªï¼Œè€Œå¿˜äº†è¯´æœ‰äº†å®ƒä¹‹åï¼Œç”¨æˆ·èƒ½å¾—åˆ°ä»€ä¹ˆã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯è¶…çº§ç›ä¸½åƒäº†èŠ±ä¹‹åï¼Œèƒ½å‘å­å¼¹ï¼Œåº”è¯¥å»ç€é‡æè¿°çš„æ˜¯ã€Œå‘å­å¼¹ã€è¿™ä¸ªç»“æœï¼Œè€Œä¸æ˜¯ã€ŒèŠ±ã€è¿™ä¸ªäº§å“æœ¬èº«ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s-media-cache-ec0.pinimg.com/originals/cd/73/ac/cd73ac84c1a711b71fa7d1b701bc6845.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;è¯·æ±‚è®¿é—®ç›¸æœºç›¸å†Œå’Œéº¦å…‹é£&quot;&gt;è¯·æ±‚è®¿é—®ç›¸æœºã€ç›¸å†Œå’Œéº¦å…‹é£&lt;/h3&gt;

&lt;p&gt;è¶Šæ¥è¶Šå¤šçš„Appå¼€å§‹æ³¨é‡è¿™äº›å°ç»†èŠ‚äº†ï¼Œè¿™æ ·è®©ç”¨æˆ·æœ‰ç§è¢«å°Šé‡çš„æ„Ÿè§‰ï¼Œä¹Ÿä¸ºæ¥ä¸‹æ¥çš„å‡ ä¸ªå¼¹å‡ºæ¡†æœ‰äº†å¿ƒç†å‡†å¤‡ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-ask4permision.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å®æ—¶æ»¤é•œ&quot;&gt;å®æ—¶æ»¤é•œ&lt;/h3&gt;

&lt;p&gt;å¾ˆå¤šæ‹ç…§Appéƒ½æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨åº•ä¸‹æ˜¾ç¤ºä¸€æ’ç¼©ç•¥å›¾ï¼Œç„¶åç»™ç¼©ç•¥å›¾åŠ ä¸Šå®æ—¶æ»¤é•œæ•ˆæœï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥ç›´è§‚åœ°çœ‹åˆ°å„ä¸ªæ»¤é•œçš„æ•ˆæœï¼Œå¼Šç«¯æ˜¯å› ä¸ºç¼©ç•¥å›¾æ¯”è¾ƒå°ï¼Œæ‰€ä»¥çœ‹å¾—ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œéœ€è¦ç‚¹å‡»ï¼Œè¿ç”¨æ»¤é•œæ•ˆæœåæ‰èƒ½çœ‹æ¸…ï¼ŒåŒæ—¶è¿˜å ç©ºé—´ï¼Œå¹¶ä¸”è§†è§‰ä¸Šä¹Ÿå®¹æ˜“æ„Ÿè§‰ç¹æ‚ã€‚&lt;/p&gt;

&lt;p&gt;Camué‡‡ç”¨äº†å¦ä¸€ç§æ–¹å¼æ¥å¤„ç†ï¼šå·¦å³æ»‘åŠ¨ã€‚è¿™æ ·æ“ä½œä¸Šçš„æˆæœ¬å¾ˆä½ï¼Œé¡µé¢ä¹Ÿæ˜¾å¾—å¹²å‡€ï¼Œå¼Šç«¯å°±æ˜¯æ— æ³•å¿«é€ŸæŒ‡å®šæŸä¸ªæ»¤é•œæ•ˆæœï¼Œåœ¨ä»–ä»¬çœ‹æ¥å¯èƒ½å¹²å‡€ã€å¥½ç”¨çš„ä¼˜å…ˆçº§æ›´é«˜äº›ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-filter-switch.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ»¤é•œå¼ºåº¦çš„æ§åˆ¶æ˜¯é€šè¿‡ä¸Šä¸‹æ»‘åŠ¨æ¥å®ç°çš„ï¼Œå·¦å³ä¼šæœ‰ä¸¤æ ¹ç™½è‰²çš„æ¡æ¥æŒ‡ç¤ºå¼ºåº¦ï¼Œè§†è§‰ä¸Šå’Œä½“éªŒä¸Šéƒ½å¾ˆèˆ’æœã€‚è¿™ä¸€æ’çš„æŒ‰é’®ï¼Œç¬¬ä¸€æ¬¡ç‚¹å‡»æ—¶éƒ½ä¼šå‡ºç°æç¤ºï¼Œè¯´æ˜æ˜¯åšä»€ä¹ˆçš„ï¼Œæœ‰çš„è¿˜ä¼šæœ‰å¼•å¯¼åŠ¨ç”»ã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-guide.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;h3 id=&quot;å¤šç§æ‹æ‘„æ¨¡å¼&quot;&gt;å¤šç§æ‹æ‘„æ¨¡å¼&lt;/h3&gt;

&lt;p&gt;è¿™ä¹Ÿæ˜¯Camuçš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¯èƒ½å…¶ä»–Appä¹Ÿæœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œä½†Camuåœ¨è®¾è®¡ä¸Šåšçš„ç®€å•åˆæ˜äº†ã€‚&lt;/p&gt;

&lt;p&gt;ä¸€å…±æœ‰4ç§æ¨¡å¼ï¼šæ–¹å½¢ã€é•¿æ–¹å½¢ã€å·¦å³å„åŠå’Œä¸Šä¸‹å„åŠï¼ˆä¸€å¼€å§‹ä»¥ä¸ºæ˜¯è¿™æ ·ï¼Œåæ¥æ‰å‘ç°å¯ä»¥æ—‹è½¬ï¼‰ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼Œå¦‚æœå…‰çœ‹åˆ°é‚£ä¸ªé•¿æ–¹å½¢çš„iconï¼Œå¾ˆå¯èƒ½ä¸çŸ¥é“å®ƒæ˜¯åšä»€ä¹ˆç”¨çš„ï¼Œå°±ä¸å»ç‚¹å®ƒäº†ã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-mode.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;p&gt;è¿™4ç§æ¨¡å¼ä¸­æœ‰ä¸€ç§æ˜¯å¯ä»¥åœ¨æ­£æ–¹å½¢çš„åŒºåŸŸå†…ï¼Œä»»æ„æ—‹è½¬è½´çº¿ï¼Œä»è€Œå½¢æˆä¸¤ç§ä¸åŒçš„å›¾æ‹¼ä¸€èµ·çš„æ•ˆæœï¼Œå®ƒå…¶å®æ˜¯åšäº†ä¸€ä¸ªæ•ˆæœæ¥æç¤ºå¯ä»¥è½¬åŠ¨çš„ï¼Œä½†æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­æ²¡æœ‰æ³¨æ„åˆ°ï¼Œåœ¨çœ‹äº†å®˜ç½‘çš„&lt;a href=&quot;https://vimeo.com/98201619&quot;&gt;è§†é¢‘&lt;/a&gt;åæ‰å‘ç°çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-split.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç”¨ç±»ä¼¼å›½é™…è±¡æ£‹æ£‹ç›˜çš„é»‘ç™½æ ¼å­ï¼Œæ¥è¡¨ç¤ºæ²¡æœ‰ç…§ç‰‡çš„ä¸€è¾¹ï¼Œè§†è§‰ä¸Šç¡®å®æ¯”çº¯è‰²å¥½ä¸å°‘ã€‚&lt;/p&gt;

&lt;h3 id=&quot;è‡ªåŠ¨æ‹ç…§æ¨¡å¼&quot;&gt;è‡ªåŠ¨æ‹ç…§æ¨¡å¼&lt;/h3&gt;

&lt;p&gt;ä¸çŸ¥é“å…¶ä»–ç›¸æœºç±»Appæ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜çš„ï¼ŒCamuçš„å¤„ç†æ–¹å¼æ˜¯ï¼šå¦‚æœè§†çº¿å†…çš„å›¾åƒä¿æŒé™æ­¢ï¼Œé‚£ä¹ˆå°±æ‹ç…§ï¼Œä¸ç„¶å°±ç­‰åˆ°é™ä¸‹æ¥ã€‚è¿™æ ·å°±èƒ½ä¿è¯ç…§ç‰‡ä¸ä¼šæ˜¯æ¨¡ç³Šçš„ã€‚ç”¨åœ¨è‡ªæ‹ä¸Šåº”è¯¥å¾ˆåˆé€‚ã€‚&lt;/p&gt;

&lt;p&gt;Camuè¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œèƒ½é€šè¿‡å›¾åƒã€iconã€åŠ¨ç”»å°±è¡¨è¿°æ¸…æ¥šçš„äº‹æƒ…ï¼Œå†³ä¸è®©æ–‡å­—æ€å’Œè¿›æ¥ã€‚è¿™æ ·æ‰èƒ½è®©é¡µé¢ä¿æŒå¹²å‡€ï¼Œå½“ç„¶ä¹Ÿå¯¹è®¾è®¡ä¼šæœ‰æ›´é«˜çš„è¦æ±‚ã€‚ä½†Camuä¹ŸçŸ¥é“éœ€è¦æŠŠè‡ªæ‹çš„å®ç°æ–¹å¼å‘Šè¯‰ç”¨æˆ·ï¼Œç„¶åå°±å‡ºç°äº†è¿™ä¸ªå°´å°¬çš„ç•Œé¢ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-oops.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç‚¹å‡»è‡ªæ‹iconåï¼Œä¼šå‡ºç°ã€Œ1ã€ï¼Œå†ç‚¹ä¸€ä¸‹å‡ºç°ã€Œ2ã€ï¼Œç„¶åæ˜¯ã€Œ3ã€ï¼Œå†ç‚¹å°±åˆå›åˆ°äº†ã€Œ1ã€ã€‚è¿™é‡Œçš„è¡¨è¿°å…¶å®å¹¶ä¸æ˜¯éå¸¸æ¸…æ™°ï¼Œç”¨æˆ·ä¸ä¸€å®šèƒ½ä¸€ä¸‹å­æ˜ç™½è¿™å‡ ä¸ªæ•°ä»£è¡¨çš„å«ä¹‰ï¼Œä½†ç¨å¾®æƒ³ä¸€ä¸‹å°±ä¼šçŸ¥é“è¿™æ˜¯æ‹æ‘„å‡ å¼ çš„æ„æ€ã€‚&lt;/p&gt;

&lt;p&gt;æ•°å­—åˆ‡æ¢çš„åŠ¨ç”»çœ‹ç€å¾ˆèˆ’æœã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-auto.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;h3 id=&quot;ç¼–è¾‘ç…§ç‰‡&quot;&gt;ç¼–è¾‘ç…§ç‰‡&lt;/h3&gt;

&lt;p&gt;å½“æŒ‰ä¸‹æ‹ç…§æŒ‰é’®åï¼Œå°±è¿›å…¥äº†ç¼–è¾‘æ¨¡å¼ï¼Œä¾æ—§å¾ˆç®€æ´&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-edit.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™4ä¸ªæŒ‰é’®åˆ†åˆ«å¯¹åº”ã€Œå°æ°´å°ã€ã€ã€Œè¾“å…¥æ–‡å­—ã€ã€ã€Œç¼©æ”¾/æ—‹è½¬ã€ã€ã€Œæ¨¡ç³Šã€&lt;/p&gt;

&lt;h3 id=&quot;è¾“å…¥æ–‡å­—&quot;&gt;è¾“å…¥æ–‡å­—&lt;/h3&gt;

&lt;p&gt;åœ¨æ‰‹æœºä¸Šè¾“å…¥æ–‡å­—æ˜¯å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œä¸å…‰æ˜¯è¾“å…¥ï¼Œæƒ³å‡ºåˆé€‚çš„è¯­å¥ä¹Ÿæ˜¯æŒºæœ‰è€ƒéªŒçš„ï¼Œä½†å›¾é…æ–‡æ‰èƒ½æ›´å¥½åœ°è¡¨è¾¾ï¼Œäºæ˜¯Camuåšäº†Sloganè¿™ä¸ªåŠŸèƒ½ã€‚ç‚¹å‡»å¯¹åº”çš„iconåä¼šåœ¨å›¾ç‰‡ä¸Šè‡ªåŠ¨è¾“å…¥ä¸€æ®µé¸¡æ±¤æ–‡ï¼Œå¯ä»¥æ‹–åŠ¨ï¼Œè°ƒæ•´å­—ä½“ï¼Œè°ƒæ•´å¸ƒå±€ï¼Œè¿™ä¸€åˆ‡æ“ä½œèµ·æ¥éƒ½å¾ˆæ–¹ä¾¿ã€‚&lt;/p&gt;

&lt;p&gt;æ–‡å­—çš„å‡ºç°å’Œæ¶ˆå¤±æ•ˆæœä¹Ÿæœ‰æ–°æ„ï¼Œå°±åƒé•œå¤´æ‹‰ä¼¸ä¸€æ ·ï¼Œè€Œä¸”æ˜¯é€è¡Œæ“ä½œï¼Œå®ç°èµ·æ¥åº”è¯¥ä¹Ÿä¸ç®€å•ï¼Œè¿™ä¹Ÿè®©åˆ‡æ¢Sloganè¿™ä¸ªè¡Œä¸ºå˜å¾—æœ‰äº†è¶£å‘³ã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-slogan.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;h3 id=&quot;ç¼©æ”¾æ—‹è½¬&quot;&gt;ç¼©æ”¾ã€æ—‹è½¬&lt;/h3&gt;

&lt;p&gt;çœ‹åˆ°ç½‘æ ¼çº¿ï¼Œå°±çŸ¥é“å¯ä»¥ç¼©æ”¾ï¼Œä½¿ç”¨å‡ æ¬¡ä¹‹åä¹Ÿä¼šé¡ºä¾¿å‘ç°å¯ä»¥æ—‹è½¬ï¼Œè¿™æ—¶å³è¾¹çš„å¼§å½¢æ“ä½œåŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘è§‰å¾—ä¸€ä¸ªæ˜¯æ›´åŠ æ˜äº†å®ƒæ˜¯å¯ä»¥æ—‹è½¬çš„ï¼Œè¿˜æœ‰å°±æ˜¯å½“åªæƒ³è¿›è¡Œæ—‹è½¬æ“ä½œæ—¶ï¼Œå¯ä»¥å•æ‰‹è¿›è¡Œã€‚åŒæ—¶æ“ä½œè¿™ä¸ªå¼§å½¢æŒ‰é’®æ—¶å›¾ç‰‡ä¸å…‰ä¼šæ—‹è½¬ä¹Ÿä¼šå‘ç”Ÿç¼©æ”¾ï¼Œç›¸å½“äºåŒæ—¶æŠŠè¿™ä¸¤ä»¶äº‹æƒ…åšäº†ã€‚&lt;/p&gt;

&lt;video width=&quot;406&quot; height=&quot;720&quot; muted=&quot;&quot; controls=&quot;&quot;&gt; &lt;source src=&quot;/image/camu-rotate.mp4&quot; type=&quot;video/mp4&quot; /&gt; &lt;/video&gt;

&lt;h3 id=&quot;åˆ†äº«&quot;&gt;åˆ†äº«&lt;/h3&gt;

&lt;p&gt;Camuçš„åˆ†äº«åŠŸèƒ½è—å¾—æ¯”è¾ƒæ·±ï¼Œè¦ä¸æ˜¯åœ¨&lt;a href=&quot;https://vimeo.com/98201619&quot;&gt;è§†é¢‘&lt;/a&gt;é‡Œçœ‹åˆ°ï¼Œä¹Ÿä¸ä¼šåˆ»æ„åœ°å»ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;p&gt;åˆ†äº«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸Šé¢é‚£éƒ¨åˆ†ä¸ºç¤¾äº¤å¹³å°ï¼Œä¸‹é¢ä¸ºè”ç³»äººï¼Œä¸è¿‡ç”±äºè¿™äºŒè€…ä¸æ˜¯ä¸€ä¸ªscrollViewï¼Œå¯¼è‡´åœ¨æ»‘åŠ¨è”ç³»äººçš„æ—¶å€™ï¼Œä¼šå‡ºç°æ¯”è¾ƒç”Ÿç¡¬çš„æ•ˆæœã€‚&lt;/p&gt;

&lt;p&gt;å³ä¸‹è§’çš„åŒºåŸŸåœ¨æ²¡æœ‰é€‰æ‹©ç›®æ ‡ç”¨æˆ·æ—¶ï¼Œæ˜¯ç°è‰²çš„ï¼Œä½œä¸ºæç¤ºç”¨ã€‚å½“é€‰æ‹©äº†ç”¨æˆ·åï¼Œåˆä½œä¸ºæŒ‰é’®ä½¿ç”¨ï¼ŒåŒä¸€ä¸ªåŠŸèƒ½å—åœ¨ä¸åŒæƒ…å†µä¸‹ï¼Œç”¨ä½œä¸åŒçš„ç”¨å¤„ï¼Œå¯ä»¥ç®—å·§å¦™ï¼Œä¹Ÿå¯ä»¥ç®—ç³Ÿç³•ï¼Œä¸è¿‡åœ¨è¿™é‡Œå€’æ²¡æ€ä¹ˆå›°æ‰°æˆ‘ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-share.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-share-selected.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;æ¯”è¾ƒè´´å¿ƒçš„æ˜¯ï¼Œå¦‚æœä½ ä»¬ä¹‹é—´æœ‰è¿‡äº¤æµï¼Œé‚£ä¹ˆä¼šå¸¦ä¸Šå¯¹æ–¹è¯´çš„æœ€åä¸€å¥è¯ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-share-selected1.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;æ¶ˆæ¯åˆ—è¡¨&quot;&gt;æ¶ˆæ¯åˆ—è¡¨&lt;/h3&gt;

&lt;p&gt;Camuå¯ä»¥è‡ªå»ºå°ç»„ï¼Œä¹Ÿå¯ä»¥ç§èŠï¼Œæ”¯æŒå‘å›¾ç‰‡å’Œæ–‡å­—ã€‚ç•Œé¢ä¾æ—§å¾ˆç®€æ´ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-message.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-message-keyboard.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¾“å…¥è¿™é‡Œè¿˜æœ‰äº›é—®é¢˜ï¼Œæ¯”å¦‚æ»‘åŠ¨æ¶ˆæ¯æ—¶ï¼Œé”®ç›˜ä¸ä¼šç¼©å›å»ï¼Œåªæœ‰ç‚¹å‡»å¯¹è¯åŒºåŸŸæ‰è¡Œã€‚å¯¹è¯çœ‹åˆ°ä¸€åŠï¼Œæ­¤æ—¶ç‚¹å‡»è¾“å…¥æ¡†ï¼Œå‡èµ·é”®ç›˜ï¼Œä¸ä¼šè‡ªåŠ¨scrollåˆ°åº•éƒ¨ï¼Œè€Œæ˜¯éœ€è¦è¾“å…¥æ–‡å­—åï¼Œæ‰ä¼šæ»šåˆ°åº•éƒ¨ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åå°±æ˜¯å³ä¸Šè§’çš„ã€ŒMoreã€æŒ‰é’®ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯åœ¨å‘Androidè‡´æ•¬ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é€šçŸ¥&quot;&gt;é€šçŸ¥&lt;/h3&gt;

&lt;p&gt;åˆšæ‰“å¼€Camuæ—¶ï¼Œè§‰å¾—å·¦è¾¹ç©ºç©ºçš„ï¼Œç•¥æœ‰äº›éš¾å—ï¼ŒåŸæ¥æ˜¯ç”¨æ¥æ”¾é€šçŸ¥çš„ï¼Œè¿™æ ·çœ‹ç€å°±èˆ’æœäº›äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/image/camu-notification.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å°ç»“&quot;&gt;å°ç»“&lt;/h3&gt;

&lt;p&gt;æ€»ä½“è¯´æ¥Camuè¿˜æ˜¯å¾ˆæœ‰è¯šæ„çš„ç”¨å¿ƒä¹‹ä½œï¼Œç®€å•ç¾è§‚åˆå¥½ç”¨ï¼Œä¹Ÿæœ‰ä¸€äº›ç‹¬ç‰¹çš„ç‚¹ï¼Œè€Œä¸”é’ˆå¯¹ä¸åŒå°ºå¯¸çš„å±å¹•åšäº†ä¸åŒçš„ä¼˜åŒ–ã€‚å¦‚æœè¦æ‰“åˆ†çš„è¯ï¼Œæˆ‘ä¼šç»™87åˆ†ã€‚&lt;/p&gt;
</content>
 </entry>
 
 
</feed>
